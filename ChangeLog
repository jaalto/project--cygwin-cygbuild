2009-12-14  Jari Aalto  <jari.aalto@cante.net>

	* bin/cygbuild.sh: (CYGBUILD_CONFIGURE_OPTIONS):
	Add --with-intl
	(CygbuildConfOptionAdjustment): Add --with-* option
	support check.
	(CygbuildProgramVersion): Adjust display. Add URL.

2009-12-12  Jari Aalto  <jari.aalto@cante.net>

	* bin/template/perl-cpan-patch.ex: New.

	* bin/template/Makefile.ex (INSTALL_OBJS_DOC): New.
	(install-doc): New.
	(INSTALL_DIR): New.
	(INSTALL_SCRIPT): New.

2009-12-10  Jari Aalto  <jari.aalto@cante.net>

	* bin/lib/cygbuild.pl (UpdateAnnouncement): Accept 'New:' prefix,
	not just 'New package:'
	(UpdateAnnouncement): Remove extra debug call.

	* bin/cygbuild.sh: (CygbuildDefineGlobalCompile): treat libpython
	as python.
	(CygbuildDefineGlobalCompile): use SRCDIR to check Makefiles for
	libtool.
	(CygbuildShellEnvironenment): add CXXFLAGS.
	(CygbuildDefineGlobalCompile): Add '-Wl,' to --no-undefined
	linker flag.

2009-12-09  Jari Aalto  <jari.aalto@cante.net>

	* bin/lib/libcheck.sh: (CygbuildCmdInstallCheckFSFaddress): adjust
	wording.

	* bin/lib/cygbuild.pl (UpdateAnnouncement): Replace generic
	"package" with readl package name.

	* bin/cygbuild.sh: (PackageUsesLibtoolMain): Adjust regexp
	'\blibtool\b' to '\blibtoo' to notice "INTL_LIBTOOL_SUFFIX_PREFIX"
	(CygbuildCommandMainCheckSpecial): Add alias ls-patch.
	(CygbuildCmdDownloadCygwinPackage): Use setup-2.ini for Cygwin 1.7
	(CygbuildDllToLibName): Add "mhash" case. Change zlib (doc) to
	zlib0 (runtime).

2009-12-08  Jari Aalto  <jari.aalto@cante.net>

	* bin/cygbuild.sh (CygbuildInstallFixInterpreterMain): Correct
	first line 'Suspicious Python' check. See if the line is comment.

2009-11-27  Jari Aalto  <jari.aalto@cante.net>

	* bin/cygbuild.sh (CygbuildObjDumpLibraryDepList): ignore Cygwin
	1.7 MPR.DLL.

2009-10-22  Jari Aalto  <jari.aalto@cante.net>

	* bin/lib/libcheck.sh:
	(CygbuildCmdInstallCheckSetupHintFieldCategory): Add a missing
	backslash to continued line CYGBUILD_SETUP_HINT_CATEGORY.

	* bin/template/Makefile.ex (maintainer-clean): New.
	Add comments to all *clean targets.

2009-09-30  Jari Aalto  <jari.aalto@cante.net>

	* bin/template/Makefile.redirect.ex: Remove extra variables
	and shape up.

	* bin/lib/cygbuild.pl (Help): Work around Perl bug in
	pod2text. Change option presentation to notation
	'-o, --option'.

	* bin/lib/libcheck.sh: (top level): change all
	tail/head command to use --lines=N option.
	(CygbuildCmdInstallCheckBinFiles): Correct *Waen() call to
	(CygbuildPythonLibraryDependsCache): Generate cache.
	(CygbuildRubyLibraryDependsMain): Generate cache.

	*Warn().
	(CygbuildCmdInstallCheckSetupHintDependExists): search
	for exact library match. On failure, show close library
	matches.
	(CygbuildPerlLibraryDependsMain): Generate Perl cache.

	* bin/cygbuild.sh:  (top level): change all
	tail/head command to use --lines=N option.
	(CygbuildChmodExec): Return correct status.
	(CygbuildPostinstallWriteStanza): remove
	CygbuildChmodExec(). Add more quoting.
	(CygbuildInstallCygwinPartPostinstall): Install
	with modes 755, not 644.
	(CygbuildBootVariablesGlobalCachePerl): Correct typo.
	(CygbuildBootVariablesGlobalCachePython): Correct typo.
	(CygbuildHelpShort): Adjust layout.
	(CygbuildHelpLong): Move exit command to correct place.
	(CygbuildBootVariablesGlobalCachePerlGenerate): New.
	(CygbuildCygcheckLibraryDepListFull): Fix indentation.
	(CygbuildBootVariablesGlobalCachePythonGenerate): New.
	(CygbuildBootVariablesGlobalCacheGenerate): New.
	(CygbuildDefineGlobalRubyVersion): New.
	(CygbuildBootVariablesGlobalCacheRubyGenerate): New.
	(CygbuildBootVariablesGlobalCacheRuby): New.
	(CygbuildDefineGlobalPythonVersion): Return status
	(CygbuildDefineGlobalPerlVersion): Return status.
	(CygbuildCmdFilesWrite): Use *.ex, not *.tmp extension.
	(CygbuildInstallPackageDocs): Improve debug.
	(CygbuildCmdMkpatchMain): Verify destination patch
	directory.
	(CYGBUILD_INSTALL_IGNORE): Add *.ex.
	(CYGBUILD_IGNORE_FILE_TYPE): Add .ex.
	(CygbuildBootVariablesGlobalMain): Add *.ex to variable
	'cygbuild_opt_exclude_tmp_files'.
	(CygbuildFindLowlevel): Add *.ex.
	(CygbuildCommandMainCheckSpecial): Add alias lspatch.
	(CygbuildCmdMkpatchMain): Check that $diffsrc exists.
	(CygbuildBootVariablesGlobalMain): Add *.mo

2009-09-29  Jari Aalto  <jari.aalto@cante.net>

	* bin/cygbuild.sh: (CygbuildCommandMain): Add
	alias 'dirs' to 'mkdirs' command.

2009-09-28  Jari Aalto  <jari.aalto@cante.net>

	* bin/cygbuild.sh: (CygbuildProgramVersion): Add
	option 'short'.

2009-09-27  Jari Aalto  <jari.aalto@cante.net>

	* bin/lib/libcheck.sh: (CygbuildCmdInstallCheckBinFiles):
	Ignore *.dll and *.pyc files and others. Change
	for loop to more efficient while loop which preferves
	file names correctly. Use stat(1) to read file size.
	(CygbuildCmdInstallCheckEverything): Use real if-statements.
	This fixes 'stat' value settings.

	* bin/cygbuild.sh (CygbuildMakefileRunInstallPythonFix):
	Adjust 'may take a while..." message.
	(CygbuildFileSizeRead): Improve handling of file names
	with spaces.
	(CygbuildFileSize): Add quotes.
	(CygbuildInstallFixInterpreterGeneric): Improve message.
	(CygbuildProgramVersion): Do not announce URL by default.
	(CYGBUILD_AUTHOR): New variable.
	(CYGBUILD_LICENSE): New variable.
	(CygbuildProgramVersion): Display CYGBUILD_AUTHOR
	and CYGBUILD_LICENSE

2009-09-25  Jari Aalto  <jari.aalto@cante.net>

	* bin/cygbuild.sh: (CygbuildDefineGlobalCommands): Define
	command stat(1) in variable STAT.
	(CygbuildFileSizeRead): New. Use stat(1) where available.
	(CygbuildFileSize); use more robust
	`CygbuildFileSizeRead'.

	* bin/lib/libcheck.sh: (CygbuildCmdInstallCheckBinFiles):
	Correct ls -l output handling: Read file sizes correctly.

2009-09-16  Jari Aalto  <jari.aalto@cante.net>

	* bin/cygbuild.sh:
	(CygbuildMatchGlob): New.
	(CygbuildDefineGlobalCommands): Add missing double quote.
	(CygbuildSrcDirCheck): Adjust message.
	(CygbuildCmdDownloadUpstream): change external
	command name from 'mywebget' to 'pwget'. Use
	'type -p', not which(1).

2009-08-06    Jari Aalto  <jari.aalto@cante.net>

	* bin/Makefile (install-man): Call target 'man'.
	(INSTALL_OBJS_MAN1): Remove unneeded lib/*.1

	* bin/cygbuild.sh: (CygbuildCommandMain):
	Display word FATAL if getopt is not available.
	(CygbuildDefineGlobalCommands): Check that file(1)
	utility exists.

2009-02-06 Fri  Jari Aalto  <jari.aalto@cante.net>

	* bin/Makefile (man): Add cygbuild.1
	(doc): New target.
	(cygbuild.1): New target.
	(clean): Clean manual pages.

2009-02-05 Thu  Jari Aalto  <jari.aalto@cante.net>

	* doc/index.html: (Install from Version Control): correct
	'make install-etc' to 'make install-symlink'

	* bin/lib/cygbuild.pl (UpdateAnnouncement): Call UpdateYears().

	* Makefile: (help): New target.
	(install-symlink): New target.

	* TODO: Add headings: incomplete, planned.

	* README: (Important files): Update directory information.

	* doc/devel/README.txt: (Information for developers): Clean up
	section.
	(Policies): Update. Add CODING STYLE.

	* doc/Makefile (help): New target. Document other targets.

	* bin/Makefile: (help): New target. Document other targets.
	(install-symlink): Adjust comment.

	* bin/cygbuild.sh (CygbuildIsDirMatch): Check directory before
	`cd'.
	(CygbuildCommandMain): Add getopt safeguards. If 'getopt' is not
	available, options cannot be parsed. If `CygbuildIsGbsCompat', do
	not run `CygbuildBootVariablesGlobalShareMain'.
	(CygbuildTreeSymlinkCopy): Simplify 'lndir' error message.
	(CygbuildDefineGlobalCommands): Verify that commands make, gcc. perl
	are in PATH.
	(CygbuildMsgFilter): Use cat if perl is not available.

2009-02-05  Jari Aalto  <jari.aalto@cante.net>

	* bin/lib/cygbuild.pl (UpdateAnnouncement): Improve call to Date().
	(UpdateNewVersionStanza): Improve call to Date().
	(UpdateYears): Improve call to Date().
	(UpdateAnnouncement): Delete 'New Package' line.

	* bin/cygbuild.sh (CygbuildDefineGlobalMain): Correct
	CYGBUILD_FILE_MANIFEST_TO from 'manifest.lst' to 'manifest-to.lst'.
	(CygbuildIsDirMatch): New.
	(CygbuildInstallExtraManual): Support CYGWIN-PATCHES/man directory.
	(CygbuildInstallPostinstallPartEtc): Change variable `dest'
	to `destdir'. Use command line arg `dest'.
	(CygbuildPostinstallWriteMain): Assign command line argument
	$1 to variable dest.
	(CygbuildCommandMain): Correct -d option without numeric argument.
	(CygbuildCmdConfMain): Move 'configure command' message.
	(CygbuildCmdConfAutomake): Simplify if-statement.

2009-02-04  Jari Aalto  <jari.aalto@cante.net>

	* bin/template/cygwin-announce.mail.tmp (License): Add Copyright
	line.

	* bin/template/install-after.sh.tmp
	(top level): Correct argument order in synapsis.
	(main): Fix positional arguments.

	* bin/cygbuild.sh (CygbuildCmdInstallMain): Fix call message about
	calling $scriptAfter.

2009-02-02  Jari Aalto  <jari.aalto@cante.net>

	* bin/cygbuild.sh: (CygbuildFileReadOptionsMaybe): Improve
	external option read message.

2008-12-05  Jari Aalto  <jari.aalto@cante.net>

	* bin/cygbuild.sh: (CygbuildCommandMain): Suggest 'util-linux' package
	of 'getopt' is not available.

2008-11-05  Jari Aalto  <jari.aalto@cante.net>

	* bin/cygbuild.sh (CygbuildInstallFixEtcdirInstall): Rewrite
	.inst/etc handling for preremove and postinstall.

2008-11-04  Jari Aalto  <jari.aalto@cante.net>

	* etc/lib/cygbuild.pl: (HELP::OPTIONAL EXTERNAL FILES): Document
	new file CYGWIN-PATCHES/mandir.

	* bin/cygbuild.sh: (CygbuildPatchApplyMaybe): Check
	content of done-patch.tmp in more detail. The old cygbuild
	versions did not record PATH names. Offer support for
	backward compatibility in case of 'unpatch' so that that
	both 'path/file.patch' and 'file.patch' records are removed.
	(CygbuildIsCplusplusPackage): Add 'g++' check for Makefiles.
	(CygbuildPatchApplyRun): Signal 'Unpatching' during
	--reverse patch.
	(CygbuildDefineGlobalMain): New EXTRA_MANDIR_FILE 'mandir'.
	(CygbuildInstallExtraManual): Add support for reading manual pages
	from subdirectory CYGWIN-PATCHES/manpages.
	(CygbuildDefineGlobalMain): Make SCRIPT_BUILD_CYGFILE and
	SCRIPT_CONFIGURE_CYGFILE absolute.
	(CygbuildCommandMain): from command
	'repackage-all|repackage|repkg', remove publish.
	(CygbuildCmdPublishExternal): Use standard two dash(--) in output.

	* etc/template/preremove.sh.tmp Add --verbose to rm(1) command.

2008-10-24  Jari Aalto  <jari.aalto@cante.net>

	* bin/cygbuild.sh: (CygbuildCmdFixFilesReadme):
	Rewrite logid. Remove else.
	(CygbuildCmdFixFilesAnnounce): New.

	* etc/lib/cygbuild.pl (ReadmeFix): Before file write, check
	length of $orig, not $file.
	(UpdateAnnouncement): New.
	(TestDriverUpdateAnnouncement): New.

2008-08-21  Jari Aalto  <jari.aalto@cante.net>

	* etc/lib/cygbuild.pl (UpdatePackageTags): Change
	placeholder text to '$placeholder'

2008-08-20  Jari Aalto  <jari.aalto@cante.net>

	* bin/cygbuild.sh (CygbuildDllToLibName): Correct 'cyg'
	prefix handling. Add zlib special case.
	(CygbuildDefineVersionVariables): Improve error message.
	(CygbuildInstallCygwinPartMain): Improve error message.
	(CygbuildFilePackageGuessMain): New variable 'ext'. Rewrite
	archive extension regexp.
	(top level::CYGBUILD_SRCPKG_URL): Change to use
	mirrors.eu.kernel.org

2008-08-20  Jari Aalto  <jari.aalto@cante.net>

	* etc/lib/cygbuild.pl: (HELP::Patch management
	commands::patch/unpatch): Document that *.patch files are sorted.

	* etc/lib/libcheck.sh: (CygbuildCmdInstallCheckBinFiles): Remove
	*.pyc.

	* bin/cygbuild.sh:
	(CygbuildDefineGlobalCommand): Improve error messages.
	(CygbuildCmdDownloadUpstream): Announce mywebget.pl URL
	is program was not found. Drop *.pl extension. Improve
	error message if CYGWIN-PATCHES/ not found.

2008-05-08  Jari Aalto  <jari.aalto@cante.net>

	* bin/cygbuild.sh: (CygbuildInstallFixInterpreterGeneric):
	Handle '/usr/bin/env interpreter' shebang lines better.

2008-03-29  Jari Aalto  <jari.aalto@cante.net>

	* etc/lib/libcheck.sh: (CygbuildCmdInstallCheckEverything): New.

	* bin/cygbuild.sh
	-- Relocate massive amount of functions to libcheck.sh.
	(CygbuildCmdInstallCheckMain): Rewritten. Move
	logic to `CygbuildCmdInstallCheckEverything'.
	(CygbuildInstallFixInterpreterMain): At beginning, chnage incorrect
	variable debinition pybin to `rbbin'. This error caused all
	python file to have ruby interpreters.
	(CygbuildTarOptionCompress): Return --gzip, --bzip2, not j, z.
	(CygbuildCmdPkgDevelStandardBin): Make taropt more readable.
	(CygbuildCmdPkgDevelStandardMain): Remove unuset tar variable
	statements.
	(CygbuildExtractTar): Make tar options more readable.
	(CygbuildPod2man): Set mansect to 1 if empty. Add new arg 3,
	Destdir.

2008-03-28  Jari Aalto  <jari.aalto@cante.net>

	* etc/template/Makefile.tmp (BINDIR): Remove extra /bin.

2008-03-18  Jari Aalto  <jari.aalto@cante.net>

	* bin/cygbuild.sh: (CygbuildCmdStripMain): Use plain find,
	which is faster. Convert for-loop to while loop. Change
	Support filenames with spaces.
	(CygbuildStripCheck): All -L to find.

2008-03-17  Jari Aalto  <jari.aalto@cante.net>

	* bin/cygbuild.sh: (CygbuildCmdDownloadCygwinPackage): Return
	error code instead of die if cannot download.
	(CygbuildCommandMainCheckSpecial): Remove created directory
	if download failed.

2008-03-14  Jari Aalto  <jari.aalto@cante.net>

	* etc/lib/cygbuild.pl: (HELP::Patch management commands):
	Document new command [patch-list].

	* bin/cygbuild.sh (CygbuildPerlLibraryList): Remove var SORT.
	(CygbuildObjDumpLibraryDepList): Remove var SORT.
	(CygbuildCygcheckLibraryDepListFull): Remove var SORT.
	(CygbuildCygcheckLibraryDepMain): Show also objdump results.
	(CygbuildDefineGlobalCommands): Define GPGOPT.
	(CygbuildGPGsignFiles): Use GPGOPT.
	(CygbuildGPGverify): Use GPGOPT.
	(CygbuildDllToLibName): new.
	(CygbuildCygcheckLibraryDepMain): Use objdump result and
	`CygbuildDllToLibName'.
	(CygbuildPatchFileList): Was CygbuildPatchList.
	(CygbuildFindLowlevel): New.
	(CygbuildPatchFileList): Use CygbuildFindLowlevel
	(CygbuildCommandMainCheckSpecial): New command [patch-list].
	(CygbuildCygcheckLibraryDepMain): Adjust objdump handling.
	(CygbuildDefineGlobalCommands): Move prefix of perl, python
	and ruby from /usr/bin to /bin.

2008-03-13  Jari Aalto  <jari.aalto@cante.net>

	* bin/cygbuild.sh:
	-- Move all checking functions to separate library:
	   etc/lib/libcheck.sh. Commit: 1eb59c7
	(CygbuildBootVariablesGlobalMain): Move
	CYGBUILD_SETUP_HINT_CATEGORY to libcheck.sh
	(CygbuildCmdInstallCheckMain): Use libcheck.sh
	(CygbuildInstallPackageDocs): Adjust docdirguess.
	(CygbuildPatchList): Use `CygbuildFindDo'.

	* etc/lib/libcheck.sh: New file.
	(CygbuildCygcheckLibraryDepSourceMake): Fix regexp

	* Makefile
	(FROM_ETC_LIB): New
	(OBJS_ETC_LIB): New.
	(install-lib-symlinks): New.
	(install-share-lib): New.
	(install-share): Add install-share-lib.
	(install-in-place): Add install-lib-symlinks.

	[ commit: fb2dca2]

	* bin/cygbuild.sh: (CygbuildCygcheckLibraryDepSource): Add
	xmlto, asciidoc check. Add *.mk search.
	(CygbuildCmdInstallCheckBinFiles): Add /usr/games.
	(CygbuildInstallFixFileExtensions): Add /usr/games. Ignore
	find error (no directories to search).
	(CygbuildCmdInstallCheckDirStructure): Add /usr/games.
	(CygbuildInstallExtraManualCompress): Support space in
	file names.
	(CygbuildCygcheckLibraryDepReadme): Use `CygbuildDetermineReadmeFile'.
	(CygbuildCygcheckLibraryDepSourceMake): New.
	(CygbuildCygcheckLibraryDepSourceMain): Renames. Was
	`CygbuildCygcheckLibraryDepSource'.
	(CygbuildCygcheckLibraryDepSourcePython): New.

2008-03-12  Jari Aalto  <jari.aalto@cante.net>

	* etc/lib/cygbuild.pl
	(top level): Drop 'use 5.004'. Prototypes are standard in Perl.
	(UpdateNewVersionStanza): New.
	(ReadmeFix): Call `UpdateNewVersionStanza'.
	(HELP): Add export NAME and EMAIL examples to the beginning.
	Adjust "Case A".

	* bin/cygbuild.sh: (CygbuildBootVariablesGlobalMain):
	Update CYGBUILD_INSTALL_IGNORE
	(CygbuildCygcheckLibraryDepSource): Improve getopt regexp.
	Correct python grep statement. New logic.
	(CygbuildCmdInstallCheckBinFiles): Add lib/ and /share/PKG.
	(CygbuildInstallFixFileExtensions): Correct find call.
	Add handling for manual pages.
	(CygbuildCmdInstallCheckBinFiles): Add Ruby library support.
	(CygbuildInstallFixInterpreterMain): Add Ruby support. Change
	to use recursive find. Include lib/ and share/ directories.
	(CygbuildInstallFixInterpreterGeneric): New.
	(CygbuildRubyLibraryList): New.
	(CygbuildDefineGlobalCommands): Add RUBYBIN
	(CygbuildInstallFixInterpreterMain): Correct find -type call.
	(CygbuildConfOptionAdjustment): Fix detection of extra configure
	options.
	(CygbuildCygcheckMain): Simplify function.
	(CygbuildDefineGlobalCommands): emove CYGPATH. Not needed.
	(CygbuildAskYes): Fix return status.
	(CygbuildInstallPackageDocs): Handle filenames with spaces.
	(CygbuildMakefileRunInstallCygwinOptions): Fix DOCDIR setting.

2008-03-11  Jari Aalto  <jari.aalto@cante.net>

	* etc/lib/cygbuild.pl:
	-- Chnage all open command to 3-parameter form.
	(HELP::Packaging commands): Update
	`readmefix' command documentation.
	(UpdateYears): New.
	(UpdatePackageTags): New.
	(FileWrite): Add binmode. Add debug.

	* etc/template/Makefile.redirect.tmp (EXE): Add missing target ending
	colon.

	* bin/cygbuild.sh: (CygbuildCmdInstallCheckCygpatchDirectory):
	Chnage find(1) call to `CygbuildFindDo'.
	(CygbuildFindDo): Add more ignores. Like temporary,
	monotone VCS and patch reject files.
	(CygbuildCmdInstallCheckFSFaddress): New.
	(CygbuildCmdInstallCheckMain): Use `CygbuildCmdInstallCheckFSFaddress'.
	(CygbuildCmdReadmeFixMain): Completely rewritten.
	(CygbuildCmdFixFilesReadme): New.
	(CygbuildCmdFixFilesOther): New.
	(CygbuildCmdReadmeFixFile): Completely rewritten.
	(CygbuildCmdPerlModuleCall): Renamed. Was `CygbuildCmdReadmeFixFile'.
	(CygbuildCmdFixFilesOther): Convert to recursive search.
	(CygbuildCygcheckLibraryDepSource): Search for getopt. Add
	option --with-filename to grep calls.
	(CygbuildCmdDownloadUpstream): Use default for DIR_CYGPATCH.
	(CygbuildCommandMainCheckSpecial): Move download command here.
	(CygbuildCmdDownloadUpstream): Rewrote.

2008-03-09  Jari Aalto  <jari.aalto@cante.net>

	* etc/template/install-after.sh.tmp: Document new arguments
	to program: PRG and VER.

	* bin/cygbuild.sh: (CygbuildGPGverify): Add to gpg call:
	--no-permission-warning --no-secmem-warning --no-mdc-warning
	(CygbuildCmdConfMain): Remove option -r from autoconf call.
	No such options exists.
	(CygbuildDefineVersionVariables): check for disk read error.
	(CygbuildCmdInstallMain): Send PKG and VER to install-after.sh
	(CygbuildBootVariablesGlobalMain): Add to config.guess, config.sub
	`cygbuild_opt_exclude_cache_files'.
	(CygbuildPatchApplyRun): Make sure patch target files are writable.

2008-03-08  Jari Aalto  <jari.aalto@cante.net>

	* etc/lib/cygbuild.pl: (HELP::TROUBLESHOOTING). Add
	section `Porting and Python os.rename'.
	(PACKAGE MAINTENANCE COMMANDS::Other commands): Remove
	command [shadow].
	(OPTIONAL EXTERNAL FILES): Rephrase initial paragraph.

	* bin/cygbuild.sh:
	(CygbuildInstallFixDocdirInstall): Ensure that target directory for
	tar move exists.
	(CygbuildInstallFixFileExtensions): check documentation for
	filenames.
	(CygbuildIsCygwin): New.
	(CygbuildIsLinux): New.
	(CygbuildCygcheckLibraryDepSource): Rewrite logic. Detect SMTPSERVER
	(CygbuildFindDo): Exclude version control directories.
	(CygbuildTreeSymlinkCopy): Use `CygbuildFindDo'.
	(CygbuildInstallPackageInfo): Use `CygbuildFindDo'.
	(CygbuildTarDirectory): Simplify `status' check.
	(CygbuildPatchApplyRun): Use `CygbuildIsCygwin' to check if
	--binary option is needed.
	(CygbuildTreeSymlinkCopy): Add missing continuation marker to
	call `CygbuildFindDo'.
	(CygbuildCommandMain): Remove command [reshadow].

	* etc/template/setup.py.tmp: New file.

2008-03-07  Jari Aalto  <jari.aalto@cante.net>

	* etc/lib/cygbuild.pl: Remove option -P|--prefix. Unneeded.

	* bin/cygbuild.sh:
	-- change variable $OPTION_PREFIX to OPTION_PREFIX_MODE
	(CygbuildCmdMkpatchMain): Remove j or z
	option check. Convert tar options to --long format.
	(CygbuildTarDirectory): Fix tar directory detection. If there
	were files that conatined spaces, the function failed. Moving
	$(NF) to column $6 fixes this. Remove j or z option check.
	Convert tar options to --long format.
	(CygbuildInstallFixDocdirInstall): Convert tar options to
	--long format.
	(CygbuildCmdDownloadCygwinPackage): Remove j or z option check.
	(CygbuildCommandMain): Remove option -P|--prefix. Unneeded.
	(CygbuildMakefileRunInstallMain): Rename. Was
	`CygbuildMakefileRunInstall'. Obey --install-prefix option.
	(CygbuildMakefilePrefixCheck): Rewrite logic how to
	detect prefix= and PREFIX=.
	(CygbuildBootVariablesGlobalCachePython): New. Add
	CYGBUILD_CACHE_PYTHON_FILES.
	(CygbuildDefineGlobalPythonVersion): New.
	(CygbuildPythonLibraryDependsCache): New.
	(CygbuildPerlLibraryDependsCache): Improve lib search regexp.
	(CygbuildCmdInstallCheckPythonLibraries): New.
	(CygbuildPythonLibraryList): New.
	(CygbuildCmdInstallCheckBinFiles): Add python library check.
	Moved Perl library code check to its own case. Removed
	`continue' from file extension check if-statement.
	(CygbuildCmdInstallCheckPerlLibraries): Sort dependencies.
	(CygbuildBootVariablesGlobalMain): From
	`cygbuild_opt_exclude_object_files' remove *.egg-info. This is
	essential Python install information file.
	(CygbuildCygcheckLibraryDepAdjustOld): Remove unused function.
	(CygbuildStripCR): new.
	(CygbuildCygcheckMain): Check is cygcheck is available.
	(CygbuildPythonCheckImport): New.
	(CygbuildPythonLibraryDependsMain): New.
	(CygbuildBootVariablesGlobalMain): Remove *.egg-info from
	from cygbuild_opt_exclude_object_files
	(CygbuildMakefileRunInstallPythonFix): Remove subshell call.
	(CygbuildCmdInstallCheckCygpatchDirectory): Remove subshell call.
	(CygbuildInstallFixPermissions): New.
	(CygbuildInstallFixMain): Use `CygbuildInstallFixPermissions'.

2008-03-06  Jari Aalto  <jari.aalto@cante.net>

	* etc/lib/cygbuild.pl: (HELP::Contributing packages): Fix
	ITP message example.
	(GPG EXAMPLES): Cosmetic chnages.

	* bin/cygbuild.sh:
	-- Change Verb() calls to Warn() calls near [WARN] messages.
	(CygbuildCmdAllMain): Remove interactive
	step if signatures failed.
	(top level): Chnage var+value into POSIX var:+value format.
	Change -s (short) options in cat, diff ln, mv, rm, tar etc. to
	--long options.
	(CygbuildCmdInstallCheckShFile): New.
	(CygbuildCmdInstallCheckShellFiles): Add cases for Bourne and
	Bourne-Again.
	(CygbuildCmdInstallCheckPythonFile): Add arg FILE check.
	(CygbuildCmdInstallCheckPerlFile): Add arg FILE check.
	(CygbuildTarDirectory): Remove subshell from `wc' call. Remove
	`cut' command.
	(CygbuildInstallFixInterpreterPerl): Remove extra `set' command
	near `wc'.
	(CygbuildCmdAllMain): Add back signature verification and
	interactive question.
	(CygbuildCmdGPGVerifyMain): Add support for OPTION_FORCE.
	(CygbuildPatchList): Simplify call to find command.
	(CygbuildBootVariablesGlobalMain): Remove call to
	`CygbuildIsGbsCompat'. Always call
	`CygbuildBootVariablesGlobalShareMain'
	(CygbuildBootVariablesId): If GBS, set correct CYGBUILD_PROG_LIBPATH.
	(CygbuildIsDestdirSupported): Return immediately if no perl module.
	Remove unneeded variable `out'.
	(CygbuildTreeSymlinkCopy): Ignore version control directories.
	(CygbuildCmdInstallCheckShellFiles): Pass -O extglob to bash checks.
	(CygbuildCommandMainCheckSpecial): Correct regexp to detect command
	`cygsrc'.'
	(CygbuildCmdDownloadCygwinPackage9: Improve error message if package
	was not found.
	(CygbuildConfCC): Correct retval.log.1 to retval.log
	(CygbuildInstallFixInfoInstall): Correct install to /etc/defaults.
	(CygbuildInstallFixDocdirInstall): Correct /usr/share/doc/<pkg>/
	relocation code.

2008-03-05  Jari Aalto  <jari.aalto@cante.net>

	* README: (Dependencies): Remove.

	* doc/README.txt: (Information for developers): Delete obsolete
	Sourceforge information. Document commit message convention.
	(Dependencies): Moved from top level REAME here.

	* doc/cygbuild-rebuild.pod: Move location from bin/

	* etc/data/etc/data/perl-5.8.8.lst: New file.

	* etc/lib/cygbuild.pl: Move location from bin/
	(HELP::QUICK OVERVIEW): Present import command.
	(SYNOPSIS): Add brackets around -r. Not mandatory any more.

	* bin/cygbuild.sh: (CygbuildDefineGlobalCommands):
	Define GPG, WGET conditionally.
	(CygbuildGPGavailableCheck): Change from negative tests
	to positive tests.
	(CygbuildCmdDownloadCygwinPackage): Rewrite WGET test.
	(CygbuildCommandMain): Move `CygbuildDefineGlobalCommands'
	here from CygbuildCommandMain().
	(CygbuildCmdDownloadCygwinPackage): Rewite wget test.
	(CygbuildDefineGlobalCommands): Remove variable BASH.
	(CygbuildPathBinFast): Fix serious error. Return 1 if
	path is not found.
	(CygbuildMatchPatternList): Renamed. Was
	`CygbuildMatchBashPatternList'.
	(CygbuildBootVariablesId): Set CYGBUILD_PROG_PATH by searching
	PATH as last resort.
	(CygbuildCmdConfMain): Use CygbuildIsPerlPackage.
	Add Python handling.
	(CygbuildInstallCygwinPartMain): Improve error message.
	(CygbuildBootVariablesGlobalCacheSet): Display message only
	if verbose mode is on.
	(CygbuildCmdMkdirs): Display message only
	if verbose mode is on.
	(CygbuildCommandMain::import): Add readmefix and move mkdir command.
	(CygbuildCmdConfMain): Display message inly under verbose mode.
	(CygbuildCmdInstallFinishMessage): Suggest sort. Handle test mode
	differently.
	(CygbuildBootVariablesGlobalCacheSet): Whole new logic. Remove
	dependency to 'cygcheck -l perl'.
	(CygbuildBootVariablesGlobalCachePerl): New.
	(CygbuildBootVariablesGlobalLibSet): Set perl cache.
	(CygbuildBootVariablesGlobalShareDir): New.
	(CygbuildExitIfNoDir); Renamed. Was CygbuildExitNoDir.
	(CygbuildExitIfNoFile); Renamed. Was CygbuildExitNoFile.
	(CygbuildBootVariablesGlobalShareMain): Correct variable dir
	at the end of function.
	(CygbuildProgramVersion): Use ## prefix in non-color mode too.
	(CygbuildCmdInstallCheckCygpatchDirectory): Correct refactored FIND.
	(CygbuildCmdInstallCheckSetupHintDependExists): Under Linux, do not
	check the install database.
	(CygbuildHelpLong): Remove unneeded *.pl check.
	(CygbuildHelpSourcePackage): Remove unneeded *.pl check.
	(CygbuildPerlModuleLocation): Remove unneeded *.pl check.
	(CygbuildCmdDependCheckMain): Remove unneeded *.pl check.
	(CygbuildMakeRunInstallFixPerlMain): Streamline code.
	(CygbuildIsDestdirSupported): Remove unneeded *.pl check.
	(CygbuildCommandPath): Remove. Not used any more.
	(CygbuildPerlModuleLocation): Remove. Not used any more.
	(CygbuildBootVariablesGlobalLibSet): Display warning if *.pl
	not found.
	(CygbuildBootVariablesId): Remove PATH setting. Trust user.
	New variable CYGBUILD_PROG_LIBPATH.
	(CygbuildCmdInstallCheckDocdir): Ignore image files.
	(CygbuildCmdInstallCheckSetupHintDependExists): Correct
	installed.db check.
	(CygbuildCmdInstallCheckPerlLibraries): Display message only
	if depends found.
	(CygbuildCmdInstallCheckPerlFile): Display message only
	if perl notes found. Replace bang-slash line in better way
	by using tail command.
	(CygbuildCmdInstallCheckPerlLibraries): Adjust displayed
	message.
	(CygbuildInstallFixInterpreterPerl): Use variable retval.
	(CygbuildInstallFixInterpreterPython): Use variable retval.
	(CygbuildInstallFixPerlPacklist): Use variable retval.
	(CygbuildDefineGlobalCommands): New variables PERLBIN PYTHONBIN.
	(CygbuildInstallFixInterpreterMain): Use PERLBIN PYTHONBIN.
	(CygbuildCmdInstallCheckBinFiles): Use PERLBIN PYTHONBIN.
	(CygbuildInstallFixInterpreterPython): Use PYTHONBIN.
	(CygbuildInstallFixInterpreterPerl): Display diff message
	only under verbose. Detect and fix multiple shebang lines.
	(CygbuildCmdInstallCheckPerlFile): Ignore warnigns from Perl base.
	Display perl warnings only under verbose.
	(CygbuildPatchList): Correct refactor leak SORT.
	(CygbuildPatchCheck): Correct refactor leak SORT.
	(CygbuildBootVariablesGlobalMain): Do not call
	`CygbuildBootVariablesGlobalShareMain' when running GBS.

	[ commit: 21c6baa ]

	* bin/cygbuild.sh: (CygbuildBootVariablesGlobalCacheSet): Move
	message. Clear CYGBUILD_CACHE_PERL_FILES if no cache can be set.
	(CygbuildPerlLibraryDependsCache): Check cache variable.

	[ commit: 0a6b221..6cc78b6 ]

	* bin/cygbuild.sh: REFACTORING: Convert all $LS, $MV etc.
	variables into regular calls in series of commits.

	[ up to commit: 0a6b221 ]

	* bin/cygbuild.pl: (HELP::QUICK OVERVIEW): Remove key id
	and use $GPGKEY variable in example.

	* README: Adjust short description.
	(Version control information): Add new topic.
	(Version control information): Moved from INSTALL.
	(Dependencies): Moved from INSTALL.

	* INSTALL: (Install instructions): Mention /usr/local and
	prefix= setting. Remove verything but install instructions.

	* Makefile: (install-etc-main-symlink): disable installing
	/etc/cygbuild/programs.conf. No longer used.
	(PL): Update location to etc/lib
	($(DOCDIR)/cygbuild-rebuild.1): Update location to
	doc/cygbuild-rebuild.pod.
	(install-in-place): Remove target `install-etc-main-symlink'.
	(FROM_ETC_DATA): New.
	(OBJS_ETC_DATA): New.
	(ETCDIR_DATA): New.
	(install-etc-dir-template): Add data/
	(install-etc-dir-structure): Renamed. Was `install-etc-dir-template'.
	(install-etc): Add `install-etc-data'.
	(install-in-place): Remove `install-man'.
	(install-template-symlinks): Renamed. Was `install-etc-template-symlink'.
	(install-share-data): Renamed. Was `install-etc-data'.
	(install-share-template): Renamed. Was `install-etc-template'.
	(install-share): Renamed. Was `install-etc'.
	(install-data-symlinks): New.
	(install-dir-structure): Renamed. Was `install-etc-dir-structure'.

	* bin/cygbuild.sh: (CygbuildInstallFixInterpreterPerl): Improve
	perl replace code. Display message only if something was done.
	(CygbuildInstallFixInterpreterMain): Move message to function
	`CygbuildInstallFixInterpreterPerl'.
	(CygbuildDefineGlobalCommands): Disable loading configuration
	file.
	(CygbuildBootVariablesGlobalEtcSet): Remove
	CYGBUILD_CONFIG_PROGRAMS (/etc/programs.conf).
	(CygbuildVersionControlType): Mention why ARCH and RCS are
	not tested.

2008-03-04  Jari Aalto  <jari.aalto@cante.net>

	* bin/cygbuild.pl: (HELP::LIBRARY USAGE): Remove initial
	boot call.
	(TROUBLESHOOTING): Adjust paragraph wording.
	(Perl and double install is needed): Removed.
	(Install commands): Remove traces of --init-db option.
	(MISCELLANEOUS::Use of hardlinks): Add new topic.
	(MISCELLANEOUS::setup.hint should list all dependencies): Add new
	topic.

	* bin/cygbuild.sh: (CygbuildCmdInstallCheckBinFiles): Add
	bash and gawk dependency check.
	(CygbuildIsDarcsPackage): New.
	(CygbuildIsMonotonePackage): New.
	(CygbuildVersionControlType): Add Monotone, Darcs detection.
	(CygbuildMain): Under CYGBUILD_LIB, boot few variables.
	(CygbuildCmdInstallCheckPerlFile): Add cp -l check.
	(CygbuildCmdInstallCheckShellFiles): Activate function.
	Funtion was unused due to file name bug in for-loop.
	(CygbuildCmdInstallCheckPerlFile): Use relative filenames in
	messages.
	(CygbuildFindDo): New.
	(CygbuildBootVariablesGlobalMain): Adjust CYGBUILD_FIND_EXCLUDE.
	(CygbuildCmdInstallCheckTexiFiles): New.
	(CygbuildCmdInstallCheckMain): Use `CygbuildCmdInstallCheckTexiFiles'.
	(CygbuildCygcheckLibraryDepGrepTraditonal): Use variable CYGCHECK
	(CygbuildDefineGlobalCommands): Move CYGCHECK and CYGPATH to
	the beginning.
	(CygbuildPostinstallWriteMain): Add comment about '#:<stanza>'
	to postinstall.sh
	(CygbuildNoticeDevel): New.
	(CygbuildCmdPackageBinMain): Remove unneeded status variable.
	Call CygbuildNoticeDevel.
	(CygbuildMakefilePrefixIsStandard): Chnage + to * in regext.
	This finds prefix=value.

2008-03-03  Jari Aalto  <jari.aalto@cante.net>

	* bin/cygbuild.sh: (CygbuildBootVariablesGlobalMain): Add
	VERSION file to variable cygbuild_opt_exclude_tmp_files.
	(CygbuildMakefilePrefixCheck): Adjust grep to find prefix=
	(CygbuildCmdFilesWrite): Fix variable name from 'to' to 'todir'.
	(CygbuildPatchList): Ignore */tmp/* directories.
	(CygbuildConfOptionAdjustment): Notify about --with and --without
	options in ./configure.
	(CygbuildCmdBuildStdMakefile): move set -x call.
	(CygbuildInstallFixEtcdirInstall): Add --quiet to egrep.
	(CygbuildBootVariablesGlobalCacheSet): Add
	CYGBUILD_CACHE_PERL_FILES.
	(CygbuildDefineGlobalPerl): New.
	(CygbuildDefineGlobalCommands): Define CYGPATH, CYGCHECK.
	(CygbuildPerlLibraryDependsGuess): New
	(CygbuildPerlLibraryDependsMain): Rewrite.
	(CygbuildPerlLibraryDependsCache): New. Use
	CYGBUILD_CACHE_PERL_FILES.
	(CygbuildPerlLibraryList): Improve regexp to ignore comment lines.

2008-03-02  Jari Aalto  <jari.aalto@cante.net>

	* bin/cygbuild.sh:
	(CygbuildIsMakefileCstandard): New.
	(CygbuildIsMakefileCstandard): Restore from revno:40a593c
	(CygbuildIsCplusplusPackage): Restore from revno:40a593c
	(CygbuildBootVariablesGlobalMain): Add perllocal.pod
	to variable CYGBUILD_TAR_EXCLUDE.
	(CygbuildCygcheckLibraryDepMain): Add prefix 'depends: '
	to all messages.

2008-03-01  Jari Aalto  <jari.aalto@cante.net>

	* bin/cygbuild.sh (dir): (CygbuildMakefileRunInstallCygwinOptions):
	Fix reading of variable makefile.
	(CygbuildMakefilePrefixCheck): Improve prefix check.
	(CygbuildMakefilePrefixIsStandard): Improve prefix check.
	(CygbuildBootVariablesId): Adjust PATH setting.
	(CygbuildMakeRunInstallFixPerlPostinstall): Improve postinstall
	snippet.
	(CygbuildInstallFixEtcdirInstall): Disregard pre/postinstall
	directory.
	(CygbuildCmdInstallCheckDocdir): Remeove head(1); won't work
	on image files.
	(CygbuildInstallFixInterpreterMain): Tighten regexp.
	(CygbuildInstallFixInterpreterPerl): Improce substitution.
	(CygbuildMakeRunInstallFixPerlPostinstall): Add -E to grep call.

2008-02-29  Jari Aalto  <jari.aalto@cante.net>

	* bin/cygbuild.pl: (HELP::OPTIONS): Remove --init-pkgdb and
	--nomore-space.

	* bin/cygbuild.sh: (CygbuildCmdInstallFinishMessage): Restore
	old code that used pwd. This is correct in packaging scripts.
	(CygbuildIsRubyPackage): New.
	(CygbuildMakefileRunInstallRubyMain): New.
	(CygbuildCmdBuildMain): Add ruby support.
	(CygbuildCmdCleanMain): Add ruby support.
	(CygbuildCmdShadowMain): Add ruby support.
	(CygbuildCmdConfMain): Add ruby support.
	(CygbuildConfRubyMain): New.
	(CygbuildDefineGlobalPackageDatabase): Remove
	(CygbuildBootVariablesGlobalCacheSet): Remove CYGBUILD_CACHE_PAKAGES.
	(CygbuildCommandMain): Remove options --init-pkgdb,
	--nomore-space. Add option --lzma.
	(CygbuildCompressManualPage): New.
	(CygbuildBootVariablesGlobalMain): Add lzma, lzop, rzip to
	cygbuild_opt_exclude_archive_files
	(CygbuildFileTypeByExtension): Add Ruby.
	(CygbuildCygcheckMainOld): Remove.
	(CygbuildCmdInstallCheckBinFiles): Add Ruby.
	(CygbuildIsMakefileCplusplus): Remove.
	(CygbuildIsCplusplusPackage): Remove.
	(CygbuildBootVariablesGlobalMain): Add RPM *.spec to
	CYGBUILD_INSTALL_IGNORE.
	(CygbuildInstallPackageDocs): Fix error in include and exclude
	treatment.
	(CygbuildCmdInstallCheckDocdir): Correct empty file check.
	(CygbuildPostinstallWriteStanza): New.
	(CygbuildPostinstallWriteMain): Rewrite logic. Add new input
	argument STANZA.
	(CygbuildInstallPostinstallPartEtc): Rename. Was
	`CygbuildInstallDefaultsPostinstall'.
	(CygbuildInstallFixInfoInstall): New.
	(CygbuildInstallFixMain). Use CygbuildInstallFixInfoInstall.
	(CygbuildInstallPostinstallPartInfo): New.
	(CygbuildBootVariablesGlobalMain); Update
	CYGBUILD_SETUP_HINT_CATEGORY according to setup.exe

2008-02-28  Jari Aalto  <jari.aalto@cante.net>

	* bin/cygbuild.sh: Add support for new option
	cygbuild-no-docdir-guess.
	(CygbuildExitIfEmpty): New.
	(CygbuildMakefileRunInstallCygwinOptions): Check missing
	Makefile. Adjust PREFIX for perl installs.
	(CygbuildMakefileRunInstall): Change 'docdir' from /usr/share/doc/PKG
	to package specific /usr/share/doc/PKG-VER.
	(CygbuildConfPerlMain): Read configure.env.options.
	Display Perl call with --verbose.
	(CygbuildCommandMain): Improve command 'import'.
	(CygbuildPod2man): Fix call to date(1).
	(CygbuildCommandMainCheckSpecial): Support multiple packages with
	command cygsrc.
	(CygbuildStrToRegexpSafe): Add characters: ()[].

	* etc/template/install.tar.options.tmp: Add new options
	--exclude=cygbuild-no-docdir-guess

	* bin/cygbuild.pl: (HELP::OPTIONAL EXTERNAL FILES::install.tar.options)
	Document new option cygbuild-no-docdir-guess

2008-02-27  Jari Aalto  <jari.aalto@cante.net>

	* bin/cygbuild.sh: (CygbuildInstallDefaultsPostinstall): Escape
	variable correcly, so the postinstall file contains contains the
	name, not the value.
	(CygbuildInstallPackageDocs): Use relative paths for ../examples
	as necessary.

2008-02-26  Jari Aalto  <jari.aalto@cante.net>

	* bin/cygbuild.sh:
	(CygbuildMakefileRunInstall): Remove call to
	`CygbuildDebianRules2MakefileMaybe'.
	(CygbuildDebianRules2MakefileMaybe): Remove.
	(CygbuildDebianRules2Makefile): Remove.
	(CygbuildMakefileRunInstall): Notify about missing makefile.
	(CygbuildInstallPackageDocs): Install also directories
	examples, example and sample.

	* bin/cygbuild.pl (DebianRulesInstalldirs): Remove.
	(DebianRulesInstall): Remove.
	(DebianRulesProcess): Remove.
	(DebianMakefile): Remove.
	(DebianRulesMain): Remove.
	(CygbuildInstallFixPermissions): Incorrect variable at the end.
	Use `readList'.
	(CygbuildMakefilePrefixCheck): Grep more files.
	(CygbuildMakefileRunInstallCygwinOptions): correct
	variable name verb to verbose.

2008-02-25  Jari Aalto  <jari.aalto@cante.net>

	* bin/cygbuild.sh: (CygbuildDefineGlobalScript): Use
	`CygbuildVersionInfo' instead of unreliable bash substitution
	code.
	(CygbuildDefineVersionVariables): Remove exit and return
	error code.
	(CygbuildDefineVersionVariables): Remove extra code from end.
	Die if `CygbuildDefineVersionVariables' fails.
	(CygbuildCmdInstallCheckBinFiles): Warn about .py and .pl
	exensions.
	(CygbuildDefineGlobalScript): Adjust SCRIPT_PKGVER.

2008-02-24  Jari Aalto  <jari.aalto@cante.net>

	* bin/cygbuild.sh (CygbuildPod2man): Add --release to pod2man.
	(CygbuildCygcheckMain): Make sure slashes are correct.
	(CygbuildInstallPackageDocs): Streamline function. If there
	is no doc/ dir, still run the install if --include option is set.
	(CygbuildIsDirEmpty): Remove die call.
	(CygbuildFileConvertToUnix): Ignore *.rtf etc

2008-02-22  Jari Aalto  <jari.aalto@cante.net>

	* bin/cygbuild.pl: (OPTIONAL EXTERNAL FILES::manualpage.1.pod):
	Rename. Was manualpage.pod. Explain basics of manual page
	sections.

	* bin/cygbuild.sh:
	(CygbuildBootVariablesGlobalMain) Add *.{rej,bak,tmp} to
	CYGBUILD_INSTALL_IGNORE.
	(CygbuildInstallPackageDocs): Comment out
	pattern match code and use solely CYGBUILD_INSTALL_IGNORE.
	files.
	(CygbuildInstallFixDocdirInstall): Protect regexp with
	`CygbuildStrToRegexpSafe'.
	(CygbuildInstallFixDocdirInstall): Add --test mode support.
	(CygbuildCmdFilesWrite): Add unpack support for template files.
	E.g. install cygwin-announce.mail.tmp as cygwin-announce.mail.
	(CygbuildInstallFixDocdirInstall): Return of nothing to do.
	(CygbuildInstallExtraMain): Add `CygbuildMakeRunInstallFixPerlManpage'.
	(CygbuildPerlLibraryDepends): New.
	(CygbuildPerlLibraryList): New.
	(CygbuildCmdInstallCheckPerlLibraries): New.
	(CygbuildCmdInstallCheckBinFiles): Use
	`CygbuildCmdInstallCheckPerlLibraries'.
	(CygbuildCmdDownloadCygwinPackage): Rename. Was
	`CygbuildCmdGetSource'. Download binary package too.
	(CygbuildCommandMain): Add option --dir to command 'cygsrc'.
	(CygbuildCommandMainCheckSpecial): Renamed. Was
	`CygbuildCommandMainCheckHelp'.
	(CygbuildCmdDownloadCygwinPackage): Check wget error status.
	(CygbuildCmdDownloadCygwinPackage): add MODE argument to
	select only binary package download.
	(CygbuildBootVariablesGlobalMain): Remove *.ps from
	`cygbuild_opt_exclude_tmp_files'.

2008-02-21  Jari Aalto  <jari.aalto@cante.net>

	* bin/cygbuild.sh (top level): Remove old BASH test and change
	to more reliable process substitution test.
	(CygbuildPatchApplyMaybe): Add 2nd argument MSG.
	(CygbuildCmdPrepMain): Move message 'applying included patches ...'
	to the `CygbuildPatchApplyMaybe'. Improve error code handling
	after `CygbuildPatchApplyMaybe'.
	(CygbuildMakefileRunClean): Remove unused function.
	(CygbuildCmdCleanMain): write messages only during verbose.
	(CygbuildHelpShort): Correct option -C to -c. Rephrase few
	paragrahs.
	(CygbuildIsSourceUnpacked): New.
	(CygbuildCmdPrepPatch): Use `CygbuildIsSourceUnpacked'. Remove
	extra rm *.o call.
	(CygbuildPatchApplyRun): Add 'local opt', which causes nasty bug
	During source package 'prep' phase.
	(CygbuildCmdInstallCheckReadme): Shorten path names in messages.

2008-02-20  Jari Aalto  <jari.aalto@cante.net>

	* bin/cygbuild.sh: (CygbuildVersionInfo): Fix small error
	in version detection: foo1.2b was interpreted as [foo 1.2], not
	[foo 1.2b].
	(CygbuildMakefileName): Add few more guesses for the makefile.
	(CygbuildMakefilePrefixIsStandard): Reduce guessed to $@ and *.mk.
	Add error checking for empty files.
	(CygbuildMakefileRunInstall): Send makefile name to
	`CygbuildMakefilePrefixCheck' and `CygbuildMakefilePrefixIsStandard'.
	(CygbuildMakefilePrefixCheck): Add input arg MAKEFILE and throw away
	Makefile name guessing code.
	(CygbuildCmdMkpatchMain): Check unpatch failure.
	(CygbuildDefineGlobalCompile): Remove C++ autodetections.
	(CygbuildPatchPrefixStripCountFromFilename): Return error code.
	(CygbuildPatchPrefixStripCountFromContent): Return error code.
	Improve -p1 detection.
	(CygbuildMatchRemoveWord): New.
	(CygbuildBootVariablesGlobalMain): Remove --binary from CYGBUILD_PATCH_OPT,
	Under Cygwin it is legal only if destination file has CRLF.
	(CygbuildPatchApplyRun): Use `CygbuildFileIsCRLF' to set patch
	option --binary
	(CygbuildFileIsCRLF): Check that FILE exists.
	(CygbuildCmdInstallPatchVerify): New
	(CygbuildCmdInstallMain): Use `CygbuildCmdInstallPatchVerify'
	(CygbuildMsgFilter): Show patch patch in different color.

2008-02-19  Jari Aalto  <jari.aalto@cante.net>

	* bin/cygbuild.sh: (CygbuildCmdReadmeRemoveFileSection): Remove
	awk edit. Moved to perl library.
	(CygbuildBootVariablesGlobalMain): Add --binary to CYGBUILD_PATCH_OPT.
	(CygbuildPatchApplyMaybe): Fix problem with `unpatch' where not
	all files ere patched.
	(CygbuildBootVariablesGlobalMain): Remove
	`cygbuild_opt_exclude_cygbuild'.
	(CygbuildCmdPkgSourceCvsMain): Remove.
	(CygbuildCmdPkgSourceMain): Remove version contol handling.
	(CygbuildCommandMain): Remove --checkout option.
	(CygbuildCmdPkgSourceCvsdiff): Remove.
	(CygbuildBootVariablesGlobalMain): Remove CYGBUILD_CVSDIFF_OPTIONS.
	Move CYGBUILD_DIFF_OPTIONS opions to new variable
	`cygbuild_opt_exclude_cache_files'.
	(CygbuildCmdConfMain): Add case for configure.in
	(CygbuildCmdReadmeFixFile): Remove binpkg tar `CygbuildExitNoFile' call.
	(CygbuildCmdReadmeFixMain): Remove binpkg tar file check.
	(CygbuildDefineGlobalMain): Change SCRIPT_CONFIGURE_CYGFILE and
	SCRIPT_BUILD_CYGFILE use relative paths.

	* bin/cygbuild.pl (ReadmeFix): Add Copyright year update.
	Remove 'files included...' section.
	(HELP::OPTIONS): Remove --checkout option and related documentation.
	Change -C to -c (color) short option.
	(HELP::Other commands::download): Update perl webget project URL.
	(PackageCVScoScript): Remove.
	(PackageCVSmain): Remove.
	(ReadmeFix): Add missing \n to 'Files included in' substitution.

2008-02-18  Jari Aalto  <jari.aalto@cante.net>

	* bin/cygbuild.pl: (HELP::Packaging commands): Remove functionality
	no longer presend in command `readmefix.

	* etc/template/package.README (Language): Typo in word
	'Licensed ...'. Corrected to Licensed.

	* etc/template/build.env.options.tmp: Remove obsolte file.

	* bin/cygbuild.sh:
	(CygbuildDefineGlobalMain): Remove obsolete EXTRA_BUILD_ENV_OPTIONS.
	(CygbuildCmdBuildStdMakefile): Do not use EXTRA_BUILD_ENV_OPTIONS.
	(CygbuildCmdPkgSourceStandard): Tighten regexp to *not*
	include binary package in src package.
	(CygbuildCmdBuildStdMakefile): Display Gcc version information.
	(CygbuildCmdInstallCheckManualPages): Verify integrity of
	compressed files.
	(CygbuildCmdReadmeRemoveFileSection): New
	(CygbuildCmdReadmeFixFile): Call `CygbuildCmdReadmeRemoveFileSection'
	(CygbuildFileCmpReplaceIfDiffer): New.

2008-02-17  Jari Aalto  <jari.aalto@cante.net>

	* etc/template/patch-after.sh.tmp: New.

	* etc/template/patch-before.sh.tmp: New.

	* bin/cygbuild.pl: (HELP::Other commands): Change
	getsrc command to cygsrc.

	* bin/cygbuild.sh (CygbuildBootVariablesId): Remove unused
	CVS based variables.
	(CygbuildCommandMain): Change getsrc command to cygsrc.
	(CygbuildFileConvertCRLF): New
	(CygbuildFileConvertLF): New.
	(CygbuildFileIsCRLF): New.
	(CygbuildDefineGlobalMain): Define SCRIPT_PATCH_BEFORE,
	SCRIPT_PATCH_AFTER
	(CygbuildBootFunctionExport): Export new functions.

2008-02-16  Jari Aalto  <jari.aalto@cante.net>

	* etc/etc/programs.conf: Replace EGREPP with EGREP.

	* bin/cygbuild.pl: (HELP::Patch management commands::patch):
	Document new behavior that patches are searches recursively.
	Mention about the use of sequential number in patch filenames.

	* bin/cygbuild.sh:
	-- Replace all EGREPP with EGREP.
	(CygbuildPatchList): New. Find any *patch
	recursively.
	(CygbuildPatchApplyMaybe): Use `CygbuildPatchList'.
	(CygbuildInstallFixEtcdirInstall): Ignore cd call error.
	(CygbuildPatchApplyRun): Display patch name always.
	(CygbuildCmdInstallCheckCygpatchDirectory): Loose dot from file
	extension check so that *patch matches both .dpatch and .patch.
	(CygbuildCmdInstallCheckDirStructure): Fix empty dir check.
	(CygbuildCmdInstallCheckDocdir): Warn about missing doc/PKG dir.
	(CygbuildInstallPackageDocs): Add files: Copyright, Install
	(CygbuildBootVariablesGlobalMain): Remove 'debian' from
	variable `cygbuild_opt_exclude_dir'.
	(CygbuildCmdInstallCheckDocdir): Correct typo in find command
	that cause error: -type: command not found
	(CygbuildCmdInstallCheckLineEndings): Ignore error after head(1).
	(CygbuildCmdInstallCheckSetupHintFieldNames): Renamed. Was
	`CygbuildCmdInstallCheckSetupHintFields'.
	(CygbuildBootVariablesGlobalMain): New variable
	`CYGBUILD_SETUP_HINT_CATEGORY'.
	(CygbuildCmdInstallCheckSetupHintFieldCategory): New.
	(CygbuildCmdInstallCheckSetupHintMain): Use
	`CygbuildCmdInstallCheckSetupHintFieldCategory'.
	(CygbuildCmdReadmeFixMain): Check missing archive and suggest
	running command `package'.
	(CygbuildPatchListDisplay): Fix displayed names.
	(CygbuildPatchCheck): Display files first, then directories.
	(CygbuildPatchList): Sort the patches. Ignore version controlled
	directories.

2008-02-15  Jari Aalto  <jari.aalto@cante.net>

	* bin/cygbuild.sh: (CygbuildCmdInstallDirClean): New.
	(CygbuildCmdInstallFinishMessage): New.
	(CygbuildInstallFixDocdirInstall): New.
	(CygbuildInstallFixEtcdirInstall): New.
	(CygbuildInstallFixEtcdirPostinstall): New.
	(CygbuildDefineGlobalMain): Define $DIR_ETC_GENERAL
	(CygbuildInstallFixMain): Use `CygbuildInstallFixDocdirInstall'
	and `CygbuildInstallFixEtcdirInstall'.
	(CygbuildInstallFixDocdirInstall): Remove empty directories.
	(CygbuildCmdInstallCheckDirStructure): Check that there are no
	files in tolevel usr/share usr/lib.
	(CygbuildConfCC): Always include users' options from
	configure.options. Do not clear e.g. --datadir. Move call
	`CygbuildFileReadOptionsMaybe' after the libtool check.
	(CygbuildCmdInstallMain): Move postinstall call to end.
	(CygbuildInstallFixEtcdirInstall): Support test mode.
	(CygbuildInstallFixDocdirInstall): Support test mode. Fix
	nasty bug where variables weremixed up with the environment.
	(CygbuildInstallFixEtcdirPostinstall): change cp(1) to
	install(1) in postinstall script.
	(CygbuildInstallFixDocdirInstall): Better doc/ check with ls(1).
	Exclude Cygwin dir from doc/ check.
	(CygbuildInstallFixEtcdirPostinstall): Correct /etc/default/<files> to
	/etc/defaults/etc/<files>
	(CygbuildInstallDefaultsPostinstall): Rename. Was
	`CygbuildInstallFixEtcdirPostinstall'. Make more general.
	(CygbuildCmdBuildStdMakefile): Show make call if -v option is set.
	(CygbuildShellEnvironenment): Fix bug where 'list' was newer
	filled in.
	(CygbuildPostinstallWrite): Shorten pathname in warning message.

	* etc/template/package.README (Build instructions): Change
	<PKG>-<VER>-<REL>-src to more generic <PKG>-*-src
	(layout): Make all '------' lines equal lenght.

	* bin/cygbuild.pl (Package): Delete trailing slash from 'package-'
	name.
	(ReadmeFix): Don't call ReadMeFilesIncluded().

2008-02-14  Jari Aalto  <jari.aalto@cante.net>

	* bin/cygbuild.pl: (HELP::Packaging commands::publish): Document
	new PACKAGE argument sent to external publish command.

	* bin/cygbuild.sh: (CygbuildMakefilePrefixIsStandard): New.
	(CygbuildMakefileRunInstallCygwinOptions): Use
	`CygbuildMakefilePrefixIsStandard' and change automatically
	to PREFIX if prefix= is not detected.
	(CygbuildCmdReadmeFixFile): Adjust message display only
	in verbose mode.
	(CygbuildMakefileRunInstall): Remove debug `exit' calls.
	(CygbuildPatchListDisplay): Remove unnecessary `cat'. Add sort -u.
	(CygbuildCommandMain): Add alias `pcheck'
	(CygbuildVersionInfo): Improve parsing packages like
	foo_0.4.0-test5
	(CygbuildCmdPublishSignature): Delete trailing slash from
	input arg `dest'.
	(CygbuildCmdPublishExternal): Send $PKG to external publish
	program.
	(CygbuildReadmeReleaseMatchCheck): Improve release check.
	(CygbuildMakefileRunInstall): check PREFIX for Makefiles.
	(CygbuildMakefileRunInstallCygwinOptions): Change input argument
	`pfx' to accept raw syntax `prefix=<value>'.
	(CygbuildMakeRunInstallFixPerlPostinstall): Add PKG to
	.postinstall_append to make the file unique.
	(CygbuildCmdInstallCheckSetupHintQuotes): New.
	(CygbuildCmdInstallCheckSetupHintMain): Use
	`CygbuildCmdInstallCheckSetupHintQuotes'.
	(CygbuildMakefileRunInstallCygwinOptions): Display
	make command if option -v is set.
	(CygbuildIsDirEmpty): New.
	(CygbuildMakeRunInstallFixPerlPostinstall): Refactor how
	the postinstall script does things. Use
	/usr/share/perl/cygwin-pods.
	(CygbuildBootVariablesGlobalMain): Add [#~] to
	CYGBUILD_SHADOW_TOPLEVEL_IGNORE).
	(CygbuildCmdBuildStdMakefile): Fix message.

2008-01-31  Jari Aalto  <jari.aalto@cante.net>

	* bin/cygbuild.sh: (CygbuildBootVariablesGlobalMain):
	Fix typo at in variable `cygbuild_opt_exclude_version_control'.

2008-01-26  Jari Aalto  <jari.aalto@cante.net>

	* bin/cygbuild.sh: (cygbuild_opt_exclude_version_control):
	Add ignore pattern for quilt's state directories.

2007-12-21  Jari Aalto  <jari.aalto@cante.net>

	* bin/cygbuild.pl (Version): Support foo1.2.3
	(Package): Support foo1.2.3

	* bin/cygbuild.sh: (CygbuildCygcheckLibraryDepListFull): New,
	replaces `CygbuildObjDumpLibraryDepList'.
	(CygbuildCygcheckLibraryDepMain): Use
	`CygbuildCygcheckLibraryDepListFull'.
	(CygbuildCygcheckLibraryDepMain): Add error checking.
	(CygbuildCygcheckLibraryDepGrepPgkNamesMain): Add error checking.
	(CygbuildVersionInfo): Support foo1.2.3
	(CygbuildFilePackageGuessFromDirectory): Loosend version check.
	(CygbuildCmdInstallCheckPkgDocdir); Ignore certain files.
	(CygbuildHelpShort): Mention long options.
	(CygbuildInstallTaropt2type): New.
	(CygbuildInstallPackageDocs): Improve treatment of
	CYGWIN-PATCHES/install.tar.options
	(CygbuildInstallPackageInfo): Ignore .sinst
	(CygbuildTreeSymlinkCopy): Remove egrep and use find -prune.
	Delete *.dll *.la *.so if included in original package.
	(CygbuildConfCC): Adjust --option list output (perl call).

2007-12-20  Jari Aalto  <jari.aalto@cante.net>

	* bin/cygbuild.pl: (HELP::QUICK OVERVIEW): Mention command
	`almostall'.

	* bin/cygbuild.sh (CygbuildMakefileRunInstallPythonFix):
	Check manual page location and fix it if needed.
	(CygbuildInstallPackageInfo): chnage mkdir(1) to install(1).
	(CygbuildCmdInstallCheckManualPages): Improve missing manual
	page check.
	(CygbuildMakefileRunInstall): Always run
	`CygbuildMakefilePrefixCheck'
	(CygbuildCommandMain): Use quotes.
	(CygbuildHelpLong): Call `CygbuildBootVariablesGlobalShareMain'
	and use $CYGBUILD_STATIC_PERL_MODULE
	(CygbuildCygbuildDefineGlobalSrcOrigGuess): Support *.tgz *.tbz
	(CygbuildTarOptionCompress): Support *.tbz
	(CygbuildInstallPackageDocs): Obey directory references
	like --include=contrib/* and create needed directory.
	(CygbuildCygcheckMain): Send cygcheck output forward.
	(CygbuildCmdInstallCheckPkgDocdir): Add contrib/ dir check.

2007-12-19  Jari Aalto  <jari.aalto@cante.net>

	* bin/cygbuild.sh: (CygbuildCmdInstallCheckDirStructure):
	Ignore /etc/X11/app-defaults
	(CygbuildCmdInstallCheckSetupHintDependExists): Restore
	for..in and remove while..do.

2007-12-18  Jari Aalto  <jari.aalto@cante.net>

	* bin/cygbuild.sh:
	(CygbuildCmdPkgDevelStandardDev): Remove
	process substitution.
	(CygbuildCmdInstallCheckDirEmpty): Remove process substitution.
	(CygbuildCmdInstallMain): Send path to custom install script.
	(CygbuildLibInstallEnvironment): Add quotes.
	(CygbuildDefineEnvClear): Unset INCLUDE_PATH
	(CygbuildShellEnvironenment): Remove INCLUDE_PATH
	(CygbuildCmdStripMain): Strip also *.so.
	(CygbuildObjDumpLibraryDepList): New.
	(CygbuildCygcheckMain: New implementation.
	(CygbuildCygcheckLibraryDepGrepTraditonal): New.
	(CygbuildCmdInstallMain): Send absolute path to external install
	script.
	(CygbuildBootVariablesId): Add CYGBUILD_PROG_FULLPATH
	(CygbuildBootVariablesGlobalMain): Add *.dll to
	CYGBUILD_MATCH_FILE_EXE
	(CygbuildInstallFixPermissions): New implementation.

2007-12-15  Jari Aalto  <jari.aalto@cante.net>

	* bin/cygbuild.sh: (CygbuildCmdInstallMain): Feed messages from
	install-after.sh through `CygbuildMsgFilter'.
	(CygbuildMsgFilter): Treat >> and --- messages. Ner perl $ENV
	implemantation.
	(CygbuildBootVariablesGlobalColors): Add more color variations.
	(CygbuildCmdInstallCheckBinFiles): Fix 'Binary name clash' message.

2007-12-14  Jari Aalto  <jari.aalto@cante.net>

	* etc/template/postinstall.sh.tmp (InstallConffiles): Add cmp(1).
	(CygbuildDefineGlobalMain): Rename CYGBUILD_FILE_MANIFEST_TO and
	CYGBUILD_FILE_MANIFEST_FROM
	(CygbuildInstallCygwinPartMain): Treat new postinstall-manifest.lst
	(CygbuildCmdInstallCheckPkgDocdir): Renamed. Was
	`CygbuildCmdInstallCheckDocPages'.
	(CygbuildCmdInstallCheckDocdir): New.
	(CygbuildCmdInstallCheckMain): Use `CygbuildCmdInstallCheckDocdir'.
	(CygbuildFileSize): New.
	(CygbuildCmdInstallCheckSetupHintSdesc): Check that starting
	sentence is capitalized.
	(CygbuildPatchApplyMaybe): Fine tune message display. Unpatch: exit
	immediately is there is no CYGWIN-PATCHES/done-patch.tmp. Adjust
	verbose during 'GBS compat' mode.
	(CygbuildCmdInstallMain): Display relative paths.
	(CygbuildDefineGlobalMain): Use absolute path for
	CYGPATCH_DONE_PATCHES_FILE
	(CygbuildShellEnvironenment): Empty INCLUDE_PATH during compile
	to make sure the environment is clean.

2007-12-13  Jari Aalto  <jari.aalto@cante.net>

	* bin/cygbuild.sh: (CygbuildCmdBuildPython): Change to
	use `CygbuildRunPythonSetupCmd' will will print less output.
	(CygbuildRunPythonSetupCmd): On error dispay results.
	(CygbuildCmdInstallMain): Send $0 to custom
	CUGWIN-PATCHES/instal.sh

2007-12-12  Jari Aalto  <jari.aalto@cante.net>

	* bin/cygbuild.sh: (CygbuildConfPerlMain): Remove SITEPREFIX
	(CygbuildMakeRunInstallFixPerlManpage): improve POD to manpage
	conversion.
	(WasLibraryInstallMakefile): New.
	(WasLibraryInstall): Use `WasLibraryInstallMakefile'.

2007-12-08  Jari Aalto  <jari.aalto@cante.net>

	* bin/cygbuild.sh:
	-- Comment out all `CygbuildPerlModuleLocation' calls and
	   use $CYGBUILD_STATIC_PERL_MODULE
	(CygbuildCommandMain): Add option -F|--force.
	(CygbuildCmdPkgDevelStandard): Move manual pages from
	devel-lib to devel-dev. Rewrote devel-dev. Split function.
	(CygbuildCmdPkgDevelStandardDev): New.
	(CygbuildCmdPkgDevelStandardLib): New. Fix version number.
	(CygbuildCmdPkgDevelStandardBin): New.
	(CygbuildCmdPkgDevelStandardDoc): New.

2007-12-07  Jari Aalto  <jari.aalto@cante.net>

	* bin/cygbuild.sh:
	-- Add `trap' to clean temporary files.
	(CygbuildCmdInstallCheckMain): Fix status code assignment.
	(CygbuildCygcheckLibraryDepGrepPgkNames): Check
	missing cache file better.
	(CygbuildCmdGetSource): Now handles multiple patches
	in Cygwin Net release source packages. Detect *.cygport
	(CygbuildCmdConfAutomake): Simplify.
	(CygbuildCmdConfMain): Run `CygbuildCmdConfAutomake' inside
	.build, not $srcdir.
	(CygbuildCmdPkgDevelStandard): Improve manual page search.
	Add color support. Add bin package support
	(CygbuildCmdPackageBinMain): New
	(CygbuildCmdPackageDevMain): New
	(WasLibraryInstall): New
	(CygbuildCommandMain): Change indentation level in for-command loop.
	(CygbuildReadmeReleaseMatchCheck): Do not display error
	if CYGWIN/<pkg>.README is not found.

2007-12-05  Jari Aalto  <jari.aalto@cante.net>

	* bin/cygbuild.sh
	(CygbuildInstallPackageDocs): Fix --test more behavior. Do not
	run the tar command.
	(CygbuildInstallExtraBinFiles): New. Treat CYGWIN-PATCHES/bin
	(CygbuildCmdInstallCheckMakefiles): New. Try to detect use of
	static libraries.
	(CygbuildConfCC): Warn about static library linking during
	./configure
	(CygbuildReadmeReleaseMatchCheck): Use relative path in message
	(CygbuildCmdInstallCheckSetupHintMain): Broke long function
	into pieces. Now also uses `CygbuildMsgFilter' everywhere to
	display colored errors.
	(CygbuildCmdInstallCheckSetupHintCategory): New. Improve
	Perl and Python checks.
	(CygbuildCmdInstallCheckSetupHintDependExists): New (split).
	Chnage [OK] to plain OK.
	(CygbuildCmdInstallCheckSetupHintLdesc): New (split)
	(CygbuildCmdInstallCheckSetupHintSdesc): New (split)
	(CygbuildCmdInstallCheckSetupHintFields): Completely new.
	(CygbuildMsgFilter): Do not print() if there is no output.
	Remove `unset' and add `local' declarations.
	(CygbuildCmdInstallCheckDirEmpty): Add [0-9] to detect all
	numeric content.

2007-12-03  Jari Aalto  <jari.aalto@cante.net>

	* bin/cygbuild.pl (BinPkgListing): Add support for *.gz
	tar file.
	(HELP::OPTIONS): Document -C|--color option.
	(HELP::OPTIONAL EXTERNAL DIRECTORIES):
	New topic. Document new feature CYGWIN-PATCHES/bin.

	* bin/cygbuild.sh (CygbuildRunShell): Less output.
	Collect python output to file and dispay them only
	if verbose is set.
	(CygbuildBootVariablesGlobalMain):
	`cygbuild_opt_exclude_version_control' add .mtn.
	`cygbuild_opt_exclude_version_control' add INSTALL.
	(CygbuildPatchCheck): Display relative path to patch file.
	(CygbuildBootVariablesGlobalMain):
	`CYGBUILD_INSTALL_IGNORE' added ABOUT_NLS, README.mingw32
	(CygbuildInstallPackageDocs): Fix missing quotes from
	`CYGBUILD_INSTALL_IGNORE'.
	(CygbuildCmdStripMain): Add '**' start message.
	(CygbuildInstallExtraManualCompress): Ignore already compressed
	files.
	(CygbuildPatchCheck): Use relative patch in messages.
	(CygbuildCmdShadowDelete): Write message only if verbose on.
	(CygbuildCmdShadowMain): Display relative paths.
	(CygbuildCommandMain): New command line option -C|--color and
	new variable OPTION_COLOR.
	(CygbuildBootVariablesGlobalMain): Define CYGBUILD_COLOR_*
	variables.
	(CygbuildEcho): New
	(CygbuildMsgFilter): New. Support colored messages.
	(CygbuildProgramVersion): prepend '-- ' to output.
	(CygbuildProgramVersion): Add color support
	(CygbuildHelpShort): Remove non-essential option -x, -m and
	add new option -C.
	(CygbuildMsgFilter): Treat FATAL texts.

2007-12-02  Jari Aalto  <jari.aalto@cante.net>

	* bin/cygbuild.pl (ReadmeFix): Correct tags like: YYYY-MM-DD,
	Firstname Lastname and YYYY.

	* bin/cygbuild.sh:
	- Adjust indentation of all messages to '-- '
	(CygbuildCmdInstallCheckBinFiles):
	Check 1st line Perl and Python interpreter correctness.
	(CygbuildInstallFixInterpreterPerl): New.
	(CygbuildInstallFixInterpreterPython): New
	(CygbuildInstallFixInterpreterMain): New
	(CygbuildInstallFixPerlPacklist): New
	(CygbuildInstallFixMain): Use
	`CygbuildInstallFixInterpreterMain' and
	`CygbuildInstallFixPerlPacklist'.
	(CygbuildCmdAllMain): New.
	(CygbuildCommandMain): New command 'almostall'.
	Changed command 'upstream-download' to 'download'
	(Help): Document 'almostall'.
	(CygbuildBootVariablesGlobalMain): New variable
	`cygbuild_opt_exclude_other'. Update variable
	`cygbuild_opt_exclude_auto_files'.
	(CygbuildWhichCheck); New.
	(CygbuildRunIfExist): New.
	(CygbuildPatchDiffstat): New.
	(CygbuildGPGsignFiles): Display relative filename
	(CygbuildGPGsignFiles): Adjust output messages.

2007-11-30  Jari Aalto  <jari.aalto@cante.net>

	* etc/template/install.tar.options.tmp: Remove Copyright
	template.

	* etc/template/upstream.perl-webget: Remove Copyright
	template.

	* etc/template/setup.hint: Adjust comments

	* bin/cygbuild.sh:
	(CygbuildBootVariablesGlobalMain):
	CYGBUILD_DIFF_OPTIONS: Ignore config.status.
	(CygbuildCommandMain): Add alias 'pchk' as 'patch-check'.
	(CygbuildCmdInstallCheckSetupHint):
	Fix 'setup.hint category should include...'. The
	awk variable 'line' was replaced with correct '$0'.
	(CygbuildConfPerlMain):
	Read user options from CYGWIN-PATCHES/configure.options.
	Add INSTALLDIRS=vendor and set correct PREFIX=/usr
	(CygbuildInstallFixPermissions): Wrong syntax FIND => $FIND
	(CygbuildMakeRunInstallFixPerl): Impre error checking of
	perllocal.pod
	(CygbuildMakeRunInstallFixPerlManpage): New.

2007-11-29  Jari Aalto  <jari.aalto@cante.net>

	* etc/template/postinstall.sh.tmp (InstalInfo): Added quotes
	and removed extra $(ls ...) call. Not neeed in for-loop.

2007-11-06  Jari Aalto  <jari.aalto@cante.net>

	* bin/cygbuild.sh:(CygbuildCmdInstallCheckSetupHintx):
	Improve ldesc: double quote check.

2007-11-04  Jari Aalto  <jari.aalto@cante.net>

	* bin/cygbuild.sh: (CygbuildCmdInstallCheckSetupHint):
	Add check for finding double quotes from ldesc: portion.

2007-10-29  Jari Aalto  <jari.aalto@cante.net>

	* bin/cygbuild.sh: (CygbuildVersionInfo): Add support for
	foo_V1.1, foo-1.1-rc1
	* bin/cygbuild.pl (Version): Add support for
	foo_V1.1, foo-1.1-rc1

2007-10-28  Jari Aalto  <jari.aalto@cante.net>

	* etc/template/package.README: Remove 'Other version' tag
	from the end.

2007-10-27  Jari Aalto  <jari.aalto@cante.net>

	* etc/template/Makefile.tmp (install): Replace
	$(PACKAGE) target with 'all'.
	(EXE): Fix rule to use $OBJS, not $SRCS

2007-10-26  Jari Aalto  <jari.aalto@cante.net>

	* bin/cygbuild.sh: (CygbuildInstallExtraManualCompress):
	Remove find(1) calls from if-statements. This fixes bug,
	where function got stalled, because there was no files
	to compress.
	(CygbuildCmdInstallCheckCygpatchDirectory): Ignore
	*.tmp and *[#~] files from whitespace check.
	(CygbuildMakefileRunInstall): If there is no Makefile,
	Call CygbuildNoticeBuilddirMaybe() first.
	(CygbuildCmdInstallCheckDirStructure): Added /use/share/
	content check.

2007-10-18  Jari Aalto  <jari.aalto@cante.net>

	* etc/template/*: Change all 'Your Name' phrases to
	'Firstname Lastname'.

	* bin/cygbuild.sh: (CygbuildCmdInstallCheckReadme): Search
	phrase 'Firstname Lastname'.
	(CygbuildConfCC): Change variable $conf from srcdir to
	builddir.
	(CygbuildCmdConfMain): Handle autoreconf case better.
	(CygbuildBootVariablesGlobalMain): Add .git and
	.darcs to CYGBUILD_SHADOW_TOPLEVEL_IGNORE.

2007-10-01  Jari Aalto  <jari.aalto@cante.net>

	* bin/cygbuild.sh: (CygbuildCmdInstallCheckShellFiles):
	shorten message by using relative path. Display symlink destination.
	Correct for-loop to check only files.
	(CygbuildCmdInstallCheckSetupHint): Correct variable name 'retval'.
	Added 'category:' line check.
	(CygbuildDefineGlobalCommands): Rewrote perl and python handling.
	Define variables PERL_VERSION, PYTHON_VERSION, PYTHON_LIBDIR.
	(CygbuildSetLDPATHpython): Use PYTHON_LIBDIR.
	(CygbuildPatchApplyMaybe): if there is no *.patch, ignore ls(1)
	message.
	(CygbuildBootVariablesGlobalMain):
	cygbuild_opt_exclude_object_files: exclude *egg-info
	(CygbuildPatchCheck): Adjusted regexp to check *.c files.
	Display file name in message 'patch contains files'.
	(CygbuildInstallFixPermissions): New.
	(CygbuildChmodExec): Change +x to ugo+x.
	(CygbuildChmodDo): New.

2007-09-30  Jari Aalto  <jari.aalto@cante.net>

	* bin/cygbuild.sh: (CygbuildPatchApplyMaybe): Unpatch files
	in reverse order.

2007-09-28  Jari Aalto  <jari.aalto@cante.net>

	* bin/cygbuild.sh: (CygbuildCmdInstallCheckReadme):
	Corrected version regexp.
	(CygbuildCmdInstallCheckLibFiles): Fix call to cygcheck function.
	(CygbuildReadmeReleaseMatchCheck): Impreoved awk gsub() regexp.
	(CygbuildInstallFixMain): New.
	(CygbuildInstallFixMandir): New.
	(CygbuildCmdInstallCheckLibFiles): Comment out one echo.

2007-09-20  Jari Aalto  <jari.aalto@cante.net>

	* etc/template/postinstall.sh.tmp (InstallConffiles): Use 'egrep -E'
	and better regexp to ignore also empty lines.

	* bin/cygbuild.pl: (HELP::OPTIONAL EXTERNAL FILES::
	preremove-manifest-from.lst): Correct #PKGDIR to $PKGDIR.

	* bin/cygbuild.sh: (CygbuildVersionInfo): Rewrote substitution
	commands. Now Debian special *.orig extension is handled correctly.
	(CygbuildCommandMain::repackage-all,repackage-bin): Remove check
	commands.
	(CygbuildRunShell): Removed 'cd'. Run in current directory.
	(CygbuildSetLDPATHpython): More careful LD_LIBRARY_PATH and
	$LD_RUN_PATH treatment.
	(CygbuildCmdInstallCheckDirStructure): Added /etc check
	(CygbuildShellEnvironenment): Define DESTDIR and prefix.
	(CygbuildCmdInstallCheckManualPages): Tighten manual page directory
	check.

2007-09-19  Jari Aalto  <jari.aalto@cante.net>

	* etc/template/install.tar.options.tmp: Mention
	--exclude=cygbuild-no-docdir-install

	* bin/cygbuild.pl: (HELP::OPTIONAL EXTERNAL FILES::diff.options):
	Clarify paragraphs.
	(HELP::OPTIONAL EXTERNAL FILES::install.tar.options): Document
	--exclude=cygbuild-no-docdir-install

	* etc/template/Makefile.tmp (clean): Added comments next
	to targets.
	(ETCDIR): Remove extra $.

	* bin/cygbuild.sh: (CygbuildFileReadOptionsMaybe):
	Shorten displayed message.
	(CygbuildCmdBuildMain): Shorten displayed message.
	(CygbuildInstallPackageDocs): Support new option
	'cygbuild-no-docdir-install'.
	(CygbuildCmdInstallCheckCygpatchDirectory): Ignore *.orig* files.
	(CygbuildMatchBashPatternList): Moved to primitives.
	(CygbuildIsMakefileCplusplus): Change \t to [[:space:]].
	(CygbuildMakefilePrefixCheck): Change \t to [[:space:]].
	(CygbuildCmdInstallCheckCygpatchDirectory): Change \t to [[:space:]].
	(MakefileUsesRedirect): Change \t to [[:space:]].
	(CygbuildInstallPackageDocs): Add option --dereference to tar,
	so that documentation is copied 'as is'.
	(CygbuildCmdInstallCheckSetupHint): Convert PKG into safe regexp
	before testing words from 'ldesc:'.
	(CygbuildPatchApplyMaybe): Use grep option --fixed-strings to
	match already applied patches. Fixed $continue variable name
	which caused reapplying already applied patch.
	(CygbuildIsCplusplusPackage): New.
	(CygbuildMakefileName): Fix "$@" handling.
	(CygbuildDefineGlobalCompile): Fix C++ code check and definition
	of 'ccache g++'.
	(CygbuildDefineGlobalMain): Remove  call to
	`CygbuildDefineGlobalCompile'. It is too early when package
	may not be even unpacked yet (Cygwin source pacakging GBS).
	(CygbuildCmdBuildMain): Call `CygbuildDefineGlobalCompile'

2007-09-18  Jari Aalto  <jari.aalto@cante.net>

	* etc/etc/programs.conf (EGREP): Replace option
	--perl-regexp with --extended-regexp.
	(EGREPP): New.

	* bin/cygbuild.sh:
	- Fix source package generation with version number like
	  foo-0.3+git20070827
	(CygbuildCmdMkpatchMain): Shorten
	paths in messages.
	(CygbuildStrToRegexpSafe): New
	(CygbuildCmdInstallCheckReadme): Use `CygbuildStrToRegexpSafe'.
	(CygbuildCmdPkgSourceStandard): Use `CygbuildStrToRegexpSafe'.
	(CygbuildFilePackageGuessMain): Use `CygbuildStrToRegexpSafe'.
	(CygbuildDefineGlobalCommands): EGREP Replace option
	--perl-regexp with --extended-regexp. New variable EGREPP.
	(CygbuildHelpSourcePackage): Cosmetic change to displayed
	message.
	(CygbuildIsSourceProgram): New.
	(CygbuildIsGbsCompat): Use `CygbuildIsSourceProgram'
	(CygbuildPerlModuleLocation): Use `CygbuildIsSourceProgram'

2007-09-15  Jari Aalto  <jari.aalto@cante.net>

	* bin/cygbuild.sh:
	- Converted all \< and \> in egrep calls to perl syntax \b.
	(CygbuildCmdMkpatchMain): Force unapplying local patches, no
	matter what while taking the diff.
	(CygbuildPatchApplyMaybe): Added call argument modifiers options
	'-force', '-quiet' and '-nostat'.
	(CygbuildPatchCheck): Removed message that lists applied
	patches.
	(CygbuildPatchListDisplay): New.
	(CygbuildCommandMain::patch-check): Call `CygbuildPatchListDisplay'.

2007-09-14  Jari Aalto  <jari.aalto@cante.net>

	* bin/cygbuild.pl: (HELP::OPTIONS): Document new option --bzip2.

	* etc/etc/programs.conf (GREP): Changed --extended-regexp
	to --perl-regexp. Needed for TAB \t in regexps.

	* bin/cygbuild.sh:
	- Check CYGWIN-PATCHES/* for trailing whitespace.
	- Shorted many messages relative to srcdir.
	(CygbuildCygcheckMain): Renamed. Was
	`CygbuildCygcheck'.
	(CygbuildCygcheckLibraryDepMain): Exit immediately if
	no library dependencies found.
	(CygbuildCmdInstallCheckSymlinkExe): Renamed. Was
	`CygbuildCmdInstallSymlinkExe'.
	(CygbuildCmdInstallCheckCygpatchDirectory): New.
	(CygbuildCmdInstallCheckMain): Use
	`CygbuildCmdInstallCheckTrailingWspc'.
	(CygbuildPatchApplyRun): Improved handling of additional options
	by using $@.
	(CygbuildPatchApplyMaybe): Improved patch/unpatch and error
	checking in case the commands were called multiple times.
	Show the full patch command only if --verbose is set.
	(CygbuildCmdInstallCheckDirStructure): Changer ERROR
	to WARN if /bin was found.
	(CygbuildInstallExtraManual): The *.N.pod pages are converted
	into *.N. Delete these generated pages after the install.
	(CygbuildCmdInstallCheckCygpatchDirectory): Display file in error:
	Possible unfilled template line
	(CygbuildCmdInstallCheckSymlinks): Fix iWARN indentation: 2 more
	spaces to the right.
	(CygbuildCmdInstallCheckCygpatchDirectory): Adjust 'your name'
	regexp by leaving out [<] test.
	(CygbuildInstallPackageDocs): Adjust indentation of message
	'Fixing permission'
	(CygbuildVersionInfo): once again fix version number handling
	with multiple word names: one-two-three-N.N.

2007-09-13  Jari Aalto  <jari.aalto@cante.net>

	* bin/cygbuild.sh:
	- Added new option --bzip2 to choose *.bz2 compression.
	(CygbuildDefineGlobalCommands): GZIP
	incorrectly defined as 'bzip'. New variable BZIP.
	(CygbuildCompress): New. Support both gzip and bzip2.
	(CygbuildInstallExtraManualCompress): Call `CygbuildCompress'
	(CygbuildProgramVersion): New.
	(CygbuildCommandMain): Added getop handling for --bzip2 and
	treatment in while loop to set OPTION_BZIP. Removed
	options -V|--version that are already handled in
	`CygbuildCommandMainCheckHelp'. Call `CygbuildProgramVersion'.
	Don't call `CygbuildReadmeReleaseMatchCheck' when GBS mode
	in on (when running the *.sh source script).
	(CygbuildGPGverify): Added missing backslash from comand
	continuation at gpg --verify. The log file appeared empty and caused
	message 'FAILED! Signature not published'.

2007-09-11  Jari Aalto  <jari.aalto@cante.net>

	* bin/cygbuild.pl (Version): Support exotic version number like
	foo-R31b.tar.gz

	* bin/cygbuild.sh
	- Fix "perl: warning: Setting locale failed" by defininf LC_ALL=C
	  in suitable places.
	(CygbuildMakefileRunInstallPythonMain): Set
	prefix to /usr, not /usr/share. Rewrote input argument
	handling to use shift and $@.
	(CygbuildCmdInstallCheckDirStructure): Warn about deprecated
	X11R6 directory.
	(CygbuildVersionInfo): Support exotic version number like
	foo-R31b.tar.gz
	(CygbuildBootVariablesGlobalEtcMain): Check GBS compat and do
	not require ETC to be installed.
	(CygbuildCmdInstallCheckDirEmpty): New.
	(CygbuildVersionInfo): Greatly simplified the version explode
	code.
	(CygbuildIsNumberLike): Relax regexp not to include leading anchor.
	(CygbuildCmdInstallCheckReadme): README file name checking
	simplified.
	(CygbuildCommandMain): Move `CygbuildDefineGlobalScript'
	to the beginning.
	(CygbuildCmdBuildStdMakefile): Renamed, was
	`CygbuildCmdBuildMainMakefile'
	(CygbuildCmdPrepMain): Move `CygbuildCmdPrepPatch' call inside
	`CygbuildCmdPrepIsUnpacked'.
	(CygbuildDefineGlobalScript): Moved initialization of variables
	here.
	(CygbuildHelpSourcePackage): Message improved for no-build-source.
	(CygbuildSrcDirLocation): Improved recognition.

2007-09-10  Jari Aalto  <jari.aalto@cante.net>

	* bin/cygbuild.sh: (CygbuildCmdInstallCheckSymlinks); New.

2007-09-07  Jari Aalto  <jari.aalto@cante.net>

	* bin/cygbuild.sh:
	- Moved many function to the beginning as "primitives"
	- Added initial support to run program under Linux
	(CygbuildPerlModuleLocation): Check
	'in place installation'. If user has just unpacked the sources
	or uses a VCS checkout, then determine the Perl library location.
	(CygbuildBootVariablesGlobal): New variable
	CYGBUILD_PERL_MODULE_NAME
	(CygbuildBootVariablesGlobalCacheSet): New.
	(CygbuildBootVariablesGlobalCacheMain): New.
	(CygbuildBootVariablesGlobalShareSet): New.
	(CygbuildBootVariablesGlobalShareMain): New.
	(CygbuildBootVariablesGlobalEtcSet): New.
	(CygbuildBootVariablesGlobalEtcMain): New.
	(CygbuildBootVariablesGlobalLibSet): New.
	(CygbuildBootVariablesGlobal): Moved functionality to new
	functions above.
	(CygbuildBootVariablesGlobalMain): Renamed. Was
	`CygbuildBootVariablesGlobal'
	(CygbuildBootVariablesId): New variables CYGBUILD_PROG_PATH and
	CYGBUILD_PROG_NAME
	(CygbuildTemplatePath): Removed.
	(CygbuildCmdFilesMain): Removed call to `CygbuildTemplatePath'
	and used $CYGBUILD_TEMPLATE_DIR_MAIN

	* bin/cygbuild.sh: Send 2 additional arguments to
	CYGBUILD_PUBLISH_BIN: version and release.

	* bin/cygbuild.pl: (HELP::Packaging commands::publish). Document
	that CYGBUILD_PUBLISH_BIN now takes 5 arguments instead of previous
	3.

2007-09-06  Jari Aalto  <jari.aalto@cante.net>

	* etc/etc/programs.conf: Arrange all entries in alphabetical
	order. Added missing GPG variable.

	* bin/cygbuild.sh (CygbuildBootVariablesId): Put quotes around
	$PATH
	(CygbuildDefineGlobalCommands): Removed /usr/local special
	case for GPG.

2007-09-01 Sat  Jari Aalto  <jari dot aalto A T cante dot net>

	* bin/cygbuild.sh (function CygbuildDefineGlobalCommands()): 1.937
	Streamlines. The PATH makes sure /usr/bin programs are used.
	(function CygbuildCygcheckLibraryDepGrepPgkNames()): 1.937
	Completely rewritten. Now uses solely awk. The new implemention
	is simpler and faster.
	(top level::CYGBUILD_HOMEPAGE_URL): Updated to freshmeat.

2007-08-30 Thu  Jari Aalto  <jari dot aalto A T cante dot net>

	* etc/template/install.tar.options.tmp: 1.4 Added example for new
	option: --include

	* bin/cygbuild.pl (Version): 1.257 Correct handling of complex
	package name foo-1.80+dbg-0.61.tar.gz

	* bin/cygbuild.sh (function CygbuildShellEnvironenment()): 1.937
	New.
	(function CygbuildRunShell()): 1.937 Slimmed. Moved code to
	`CygbuildShellEnvironenment'
	(function CygbuildCmdBuildMainMakefile()): 1.937 Removed duplicate
	environment code. Use `CygbuildShellEnvironenment'
	(function CygbuildDefineGlobalCompile()): 1.937 Initially
	set CC=gcc and CXX=g++
	(function CygbuildMakefilePrefixCheck()): 1.937 Check
	if there already is custom install.sh and do not display
	message about it.
	(function CygbuildInstallTaropt2match ()): 1.937 Added input
	parameter $type, which control if exclude or include is wanted.
	(function CygbuildInstallPackageDocs()): 1.937 Support new
	--include from install.tar.options
	(function CygbuildPatchPrefixStripCountFromContent()): 1.937
	Removed `mercurical' variable and replaced with generic one.
	(CygbuildInstallPackageDocs): Use builddir, not srcdir for
	installation source directory.

2007-08-29 Wed  Jari Aalto  <jari dot aalto A T cante dot net>

	* bin/cygbuild.sh (function CygbuildCmdPrepPatch()): 1.937
	More accurate check for determining if cygwin patch was
	already applied.

2007-08-28 Tue  Jari Aalto  <jari dot aalto A T cante dot net>

	* bin/cygbuild-rebuild.sh: 1.8 Removed Id. Changed VERSION.

	* bin/cygbuild.sh (function CygbuildCommandMainCheckHelp()): 1.937
	Moved  -V|--version here from `CygbuildCommandMain'.
	(function CygbuildHelpLong()): 1.937 Added new argument $exit.
	(function CygbuildHelpShort()): 1.937 Added new argument $exit.
	(CygbuildHelpShort::NOTES): 1.937 Removed checkout instructions.
	(function CygbuildCygcheckLibraryDepAdjust()): 1.937
	The indentation level proved to be unreliable source of depend
	information. Restoeed old behavior. See
	<http://cygwin.com/ml/cygwin-apps/2007-08/msg00215.html> for
	more information.

	* bin/cygbuild-rebuild.pod: (HELP): Removed AVAILABILITY

	* bin/cygbuild.pl: ($URL): Unused variable removed.
	(top level::Id): tag removed.
	(HELP::OPTIONS): Removed version control software names
	from --checkout option description.

	* README: (Information for developers): Removed sourceforge
	information. Removed all CVS information and replaced it
	with generic VCS instructions.
	(Information for developers::Using CVS commands from Emacs):
	Topic removed.

	* etc/makefile/vars.mk (TAR_OPT_NO):Ignore git, bzr, hg, RCS.

	* etc/etc/programs.conf (EGREP): Added
	--binary-files=without-match

	* bin/cygbuild.sh: 1.937
	(CygbuildCygcheckLibraryDepMain): Renamed.
	Was `CygbuildCygcheckLibraryDep'. Call
	`CygbuildCygcheckLibraryDepAdjust'. Added check for missing library
	from package.README.
	(CygbuildCygcheckLibraryDepAdjust): New.
	(CygbuildFileDeleteLine): New.
	(CygbuildCygcheckLibraryDepList): New.
	(CygbuildCygcheckLibraryDepReadme): New.
	(CygbuildCygcheckLibraryDepSource): New.
	(CygbuildCygcheckLibraryDepSetup): New.
	(CygbuildCygcheckLibraryDepGrepPgkNames): New.
	(CygbuildBootVariablesId::CYGBUILD_RETVAL): Added $USER to make
	it multiuser resistant.
	(CygbuildDefineGlobalCommands::EGREP): Added
	--binary-files=without-match
	(top level): Removed CYGBUILD_ID. Moved CYGBUILD_HOMEPAGE_URL
	and CYGBUILD_VERSION at the beginning.
	(Help): Display CYGBUILD_VERSION and CYGBUILD_HOMEPAGE_URL.

2007-08-27    <jari aalto A T cante net>

	* bin/cygbuild.sh: (CygbuildCmdInstallCheckDirStructure):
	Added check for /bin which should be /usr/bin. Added
	check for /doc which should be /usr/doc.
	(CygbuildIsGitPackage): New.
	(CygbuildVersionControlType): Use `CygbuildIsGitPackage'.
	(CygbuildCmdInstallCheckReadme): Handle special character '+'
	in version, like 0.3+git20070827-1

	* bin/cygbuild.pl (Package): Fixed 'regexp quote'. Package
	name that contained plus sign did not work. E.g.
	odt2txt-0.3+git20070827.

2007-08-25    <jari aalto A T cante net>

	* bin/cygbuild.sh: (CygbuildCmdStripMain): Call strip(1)
	only once instead of for every file. This is faster.

	* etc/template/postinstall.sh.tmp (PATH): Added quotes.

	* etc/template/preremove.sh.tmp (PATH): Added quotes.

	* etc/template/vc-cvs-checkout.sh.tmp (PATH): Added quotes.

	* etc/template/install.sh.tmp: (InstallMake): Simplified a bit.
	Chnaged from /bin/bash to /bin/sh

2007-08-24    <jari aalto A T cante net>

	* bin/cygbuild.sh: (CygbuildCmdInstallSymlinkExe): New check.
	(CygbuildCmdInstallCheckMain): Call `CygbuildCmdInstallSymlinkExe'.
	(CygbuildPathResolveSymlink): Duplicate PATH/PATH/binary, when
	shoudl have been PATH/binary fixed. Introduced new $abs variable
	for absolute path.
	(CygbuildPathBinFast): Added /usr/sbin and /sbin checks.
	(CygbuildCygcheckLibraryDep): Added setup.hint check.
	Use `CygbuildWarn', not `echo'.

2007-08-23    <jari aalto A T cante net>

	* bin/cygbuild.sh: (CygbuildCygcheckLibraryDep):
	Added search for execvp() call from *.c and *.cc files
	to warn about need for additional dependencies.
	(PackageUsesLibtoolMain): Tightened regexp. Require
	word boundary \< .. \>
	(CygbuildDefineGlobalCompile): Define CYGBUILD_AM_LDFLAGS

2007-08-22    <jari aalto A T cante net>

	* etc/template/package.README: Added 'Forum or Wiki:'
	topic.

	* bin/cygbuild.sh: (CygbuildIsSrcdirOk): Allow excotic
	version numbers: *-*[0-9] => *-*[0-9]*
	(CygbuildBootVariablesGlobal::CYGBUILD_PATCH_OPT):
	Removed --set-utc
	(CygbuildConfOptionAdjustment): Adjust proper options that
	./configure supports.
	(CygbuildConfCC): Call CygbuildConfOptionAdjustment to
	get proper options.
	(CygbuildCommandMain): Debug option (-d) can now be
	given without LEVEL. It defaults to 1 with warning.
	(CygbuildInstallPackageDocs): Under --test mode
	variables $mode644 and $mode755 are empty. Added check.

2007-08-21    <jari aalto A T cante net>

	* etc/template/install.tar.options.tmp: Clarified comment
	at the beginning.

	* bin/cygbuild.sh: (CygbuildCommandMain): Commands
	'repkgbin' and 'repkgdev': Removed call to publish.
	(CygbuildBootVariablesGlobal): Added *,v to variable
	`cygbuild_opt_exclude_version_control'.
	(CygbuildCmdInstallCheckDirStructure): Added missign $pfx
	from usr/sbin and X11 directory (incorrect check fixed).
	(CygbuildCmdInstallCheckShellFiles): Changed plain `return' to
	`return 0' to fix incorrect return code. Added /usr/sbin
	check. Added $CYGBUILD_PREFIX.
	(CygbuildCmdInstallCheckBinFiles): Added /usr/sbin check.
	(CygbuildCommandMain): Adjusted command 'all'. When running
	under GBS mode, do not try to build source package.
	(PackageUsesLibtoolMain): Regexp fixed.
	(CygbuildRunShell): Adjusted flag settings.
	(CygbuildDefineGlobalMain): Removed unused FILE_LIST_ALL.
	Removed FILE_LIST_PKG
	(CygbuildCmdGPGSignMain): Removed FILE_LIST_PKG.
	(CygbuildCmdPkgDevelStandard): Major surgery to make this
	even remote working.
	(CygbuildInstallPackageDocs): Simplified chmod for-loop.
	Much faster now with separate $mode644 and $mode755 variables.
	(CygbuildMakefileRunInstallCygwinOptions): Added DOCDIR to
	makefile call
	(CygbuildCmdInstallCheckDirStructure): Check incorrect
	lib/X11/app-defaults.
	(CygbuildConfigureOptionsExtra): Added --with-app-defaults
	(CygbuildIsX11appDefaults): Check also configure.in configure
	(CygbuildGrepCheck): Changed short options to readable --long
	options.
	(PackageUsesLibtoolMain): tightened regexp. Just word 'libtool'
	search is too simple. The text could be in comments.
	(CygbuildConfCC): Print options in sorted order.
	(CygbuildInstallExtraManualCompress): Removed for-loop from
	gzip. Compressing all files at once is faster.
	(CygbuildPathResolveSymlink): initialize $patch with current
	directory ".". Changed /bin paths to /usr/bin.
	Fixed bug concerning the symbolically linked manual pages;
	Dind't compress those.

2007-08-20  Jari Aalto  <jari aalto A T cante net>

	* bin/cygbuild.sh: (CygbuildCmdInstallCheckSetupHint):
	Removed option -F and added option --files-with-matches
	from grep(1) in for-loop. Print [OK] messages always, not
	just during verbose.
	(CygbuildCmdPkgDevelStandard): Major improvements. But there
	is still work to do. Command 'pkgdev' does not yet work
	correctly.

2007-08-19  Jari Aalto  <jari aalto A T cante net>

	* etc/etc/programs.conf (WGET): New.

	* bin/cygbuild.sh: (CygbuildCmdGetSource): Require
	end anchor in AWK 're' during search of package name.
	(CygbuildFileDaysOld): New.
	(CygbuildDefineGlobalCommands): Added WGET
	(CygbuildCmdGetSource): Check if cache file is too old and
	retrieve new one automatically.
	(CygbuildCygcheck): Change patch from /bin to /usr/bin
	(CygbuildCygcheckLibraryDep): New.
	(CygbuildDefineGlobalCommands::EGREP): Changed -E to
	more readable --extended-regexp.
	(CygbuildCmdInstallCheckBinFiles): Do not display
	absolute path for possible Perl, Python dependency for
	file; only relative to .inst/ directory.

2007-08-18  Jari Aalto  <jari aalto A T cante net>

	* bin/cygbuild.sh: (CygbuildCmdInstallCheckBinFiles):
	Improved messages to print relevant file names as well.

2007-08-17  Jari Aalto  <jari aalto A T cante net>

	* bin/cygbuild.pl (Version): Use version check
	\d+[^-]+, not \d+\.[^-]+ because there really exotic pakages
	like xterm-229.tar.gz

	NOTE: cygbuild.sh 1.905 includes extensive changes
	- Includes support for exotic verion schemes, like 1.3.4beta2+1
	- Many statements were converted to a safer format.
	- Example: [ -d $var ] => [ -d "$var" ]
	- Example: cp $from $to => cp "$from" "$to"

	* bin/cygbuild.sh: (CygbuildCmdPkgBinaryMain): typo
	changed `SCRIPT_BIN_PACKAGE' to `$SCRIPT_BIN_PACKAGE'.
	(CygbuildHelpSourcePackage): Check $CYGBUILD_STATIC_PERL_MODULE
	(CygbuildCommandMain): Added `shift' at the beginnign to
	remove $1, in case it's the program name.
	(CygbuildCmdGetSource): Small fixes, more accurate handling and
	better messages.
	(CygbuildBootVariablesGlobal): Renamed CYGBUILD_DATA_DIR
	to CYGBUILD_SHARE_DIR. Fixed Location of
	CYGBUILD_TEMPLATE_DIR_MAIN
	(CygbuildDefineVersionVariables): Use version check
	[0-9]*, not [0-9]*.*[0-9] because there really exotic pakages
	like xterm-229.tar.gz
	(CygbuildCheckRunDir): New. Warn about incorrect $cwd.
	(CygbuildCommandMain): Call `CygbuildCheckRunDir'

2007-08-16  Jari Aalto  <jari aalto A T cante net>

	* etc/makefile/unix.mk (install-bin-pl): New.
	(install-bin-sh): New.
	(install-bin-pl): New. Install to /usr/share/cygbuild/lib
	instead of /usr/bin
	(install-bin-symlink): Remove *.sh extension during install.
	(clean-install): Removed.

	* bin/cygbuild.pl: (HELP::Packages with non-standard versioning
	schemes): Topic removed.
	(HELP::QUICK OVERVIEW) Case B removed: unusual verison schemes.
	(CygbuildMakefileName): Changed $* to $@ and added quotes
	around filename variables.
	(HELP::Other commands::getsrc): Document new command.
	(HELP::Patch management commands): New topic.
	(Release): Added support for foo-N-Npre3-2 style versioning
	scheme.
	(Version): Added support for foo-N-Npre3-2 style versioning
	scheme.

	* bin/cygbuild.sh: (CygbuildDefineGlobalCommands):
	Check variable $file better.
	(CygbuildVersionInfo): Now understands other than foo-N.N, like
	foo-N.NpreN etc. version schemes.
	(CygbuildFilePackageGuessFromDirectory): Restored change made
	in 2007-08-12
	(CygbuildCmdConfMain): Call `CygbuildCmdShadowDelete' before
	`CygbuildCmdShadowMain'.
	(CygbuildDefineVersionVariables): Use [0-9]*.*[0-9]* and not
	[0-9]*.*[0-9] to match version number: e.g. '1.20beta'
	(CygbuildBootVariablesGlobal): New CYGBUILD_DATA_DIR.
	Renamed CYGBUILD_LIB_DIR_ROOT to CYGBUILD_LIB_DIR.
	Renamed CYGBUILD_LIB_DIR to CYGBUILD_CACHE_DIR.
	New CYGBUILD_CACHE_SRCPKG.
	Relocated cygbuild.pl to /usr/share/cygbuild/lib
	(CygbuildCommandMain): Assume release number 1, if user hasn't
	set -r RELEASE. Added new command `getsrc'.
	(CygbuildCmdGetSource): New.
	(CygbuildCmdBuildMainMakefile): Rewrote how to pass CFLAGS,
	LDFLAGS flags to `make' call

2007-08-14  Jari Aalto  <jari aalto A T cante net>

	* bin/cygbuild.sh (CygbuildMakefilePrefixCheck):
	check also src/Makefile for DESTDIR. Added -q to grep options
	when verbose is not in effect.

2007-08-12  Jari Aalto  <jari aalto A T cante net>

	* bin/cygbuild.sh: (CygbuildFilePackageGuessFromDirectory).
	Require that the directory name ends to *[0-9], not just *[0-9]*.
	(CygbuildCmdBuildPython): Changed LDFLAGS from
	-Wl,-no-undefined to plain -no-undefined
	(CygbuildRunShell): LDFLAGS treatment fix.
	(CygbuildReadmeReleaseMatchCheck): Simplified call to
	`CygbuildDetermineReadmeFile'.
	(CygbuildCmdPkgSourceStandard): Downgraded message 'Deleting old
	release' from WARN to NOTE

2007-08-10  Jari Aalto  <jari aalto A T cante net>

	* bin/cygbuild.sh: (CygbuildCmdPkgSourceStandard): Clean also
	destination src.tar.bzr $FILE_SRC_PKG
	(CygbuildCmdPkgBinaryStandard): Clean also FILE_BIN_PKG
	(CygbuildReadmeReleaseMatchCheck): New.
	(CygbuildCmdPkgSourceStandard): Use 'cp -f' to copy original
	source file. This fixes the read-only problem.

2007-08-09  Jari Aalto  <jari aalto A T cante net>

	* bin/cygbuild.sh: (CygbuildPatchPrefixStripCountFromContent):
	Make awk call stop at first patch file. Serious error fixed.
	(CygbuildCmdInstallCheckSetupHint): Rewrote incorrect setup.hint
	'requires:' package list check.
	(CygbuildTarDirectory): Added check for empty $retval.

2007-08-08  Jari Aalto  <jari aalto A T cante net>

	* bin/cygbuild.sh (CygbuildCmdMkdirs): removed $objdir. This
	was the foo-N.N which already exists.
	(CygbuildCmdConfMain): Repharased 'runnig it for you now' =>
	'running it now'.

2007-08-06  Jari Aalto  <jari aalto A T cante net>

	* bin/cygbuild.pl: (Help::POD): Documnted commands
	patch, patch-check, unpatch.

	* bin/cygbuild.sh: (CygbuildPatchPrefixStripCountFromContent):
	Added mercurial (hg) patch detection support.
	(CygbuildBootVariablesGlobal):
	'cygbuild_opt_exclude_version_control' added .git
	(CygbuildPatchApplyMaybe): Removed pushd/popd
	(CygbuildPatchPrefixStripCountFromContent): Incorrect variable
	$data changed to $patchin Mercurical patch test.
	(CygbuildPatchCheck): Tightened awk regexp.
	(CygbuildCommandMain): Added command 'patch-check'.
	(CygbuildDefineGlobalMain): Renamed DIR_CYGPATCH_DONE_PATCHES
	to CYGPATCH_DONE_PATCHES_FILE
	(CygbuildPatchCheck): New feature. Display applied patches
	(CygbuildTarDirectory): If tar file included symbolic links the
	function got confused. Tightened awk code.

2007-08-03  Jari Aalto  <jari aalto A T cante net>

	* bin/cygbuild.sh: (CygbuildPatchApplyRun): Message 'you may need
	to rm...' is only displayed if -v option is set.
	(CygbuildPatchPrefixStripCountFromContent): Fixed awk exit code.
	if no '+++' was found, return error 1. Fixed recognization of
	patch path from '+++' => '---'
	(CygbuildCommandMain): Added command 'unpatch'.
	(CygbuildCmdBuildMainMakefile): Fixed $debug setting.
	(CygbuildDefineGlobalMain): DIR_CYGPATCH_DONE_PATCHES renamed from
	(CygbuildCmdInstallCheckShellFiles): Rewrote perl, python check.
	Use file(1) instead of unreliable find(1) and limit search
	to usr/bin only.
	(CygbuildPatchPrefixStripCountFromContent): Run echo(1)
	return value only if count is set.

	*.lst to *.tmp so that it gets ignored during making the patch.
	(CygbuildCmdMkpatchMain): Run 'CygbuildPatchApplyMaybe unpatch'
	to remove local patches, before taking the diff.

2007-07-25  Jari Aalto  <jari aalto A T cante net>

	* etc/template/install.sh.tmp: replaced $* with $@.
	Added ":" true(1) commands to functions that are initially
	"empty". Bash won't execute empty function bodies, that
	contain comments only.
	(InstallMake): Added LANG=C

2007-04-26  Jari Aalto  <jari aalto A T cante net>

	* bin/cygbuild.sh:
	(top level): Detech 'sh' and relaunch under 'bash' automatically.
	(PackageUsesLibtoolMain): Changed $* to $@
	(PackageUsesLibtoolCompile): Changed $* to $@
	(Help): Text formatting changes.

2007-04-12  Jari Aalto  <jari aalto A T cante net>

	* bin/cygbuild.sh
	(top level): Added LC_ALL=C and removed it from all functions.
	(CygbuildBootVariablesIdx): New.
	(CygbuildBootVariablesCache): New.
	(CygbuildCommandMain): Use
	`CygbuildBootVariablesCache' and
	`CygbuildBootVariablesGlobal'.
	(CygbuildCmdMkpatchMain): Removed verbose from rm(1) call.
	(CygbuildDefineEnvClear): Changed to more informative message
	string.

2007-04-12  Jari Aalto  <jari aalto A T cante net>

	* bin/cygbuild.sh: (CygbuildCmdShadowMain): Removed
	message 'preparing compile'. Fixed indentation in messages:
	added 2 more spaces.

2007-04-11  Jari Aalto  <jari aalto A T cante net>

	* bin/cygbuild.sh: (CygbuildCmdBuildMainMakefile):
	Changed status from 10 to 17, so that the error point
	is more easily found from code.

2007-03-25  Jari Aalto  <jari aalto A T cante net>

	* bin/cygbuild.sh: readlink case fixed. Didn't add slash
	after DIR ($dir$file => $dir/$file).

2007-03-24 Jari Aalto  <jari dot aalto A T cante dot net>

	* bin/cygbuild.sh (function CygbuildCmdInstallCheckLineEndings): New.
	Added head(1) to make scanning faster.
	(function CygbuildCmdInstallCheckMain): Call
	`CygbuildCmdInstallCheckLineEndings'

2007-03-23 Jari Aalto  <jari dot aalto A T cante dot net>

	* bin/cygbuild.sh (function CygbuildCommandMainCheckHelp): New.
	Replace old and broken -h|--help option check.
	(function CygbuildCommandMain): Use `CygbuildCommandMainCheckHelp'.
	(function CygbuildBootGlobals ()): New. Wrap variable initializations
	inside a function so that they are not evaluated right away.
	(function CygbuildPathResolveSymlink): Removed extra "/" from PATH
	setting. This corrected "//".
	(function CygbuildBootExport): New.

2007-03-22 Jari Aalto  <jari dot aalto A T cante dot net>

	* bin/cygbuild.sh: (CygbuildWhich): Incorrect variable bin => $1

2007-03-21  Jari Aalto  <jari dot aalto A T cante dot net>

	* etc/template/Makefile.tmp: Added assembler compiling rule

	* bin/cygbuild.sh: (CygbuildMatchRegexp): Removed double quotes
	from regexp match (error in bash 3.x fixed).
	(CygbuildCommandMain): Added check that 'getopt' is present.

2007-03-18 Sun  Jari Aalto  <jari dot aalto A T cante dot net>

	* bin/cygbuild.sh (function CygbuildWhich ()): 1.871 New.
	(function CygbuildPathAbsoluteSearch()): 1.871 Use
	CygbuildWhich().
	(function CygbuildTreeSymlinkCopy()): 1.871 Use
	CygbuildWhich().
	(function CygbuildCmdInstallCheckBinFiles()): 1.871  Use
	CygbuildWhich().

2006-11-21  Jari Aalto  <jari aalto A T cante net>

	* etc/template/Makefile.tmp: Added .asm support.
	($(EXE)): Use $@

2006-11-20  Jari Aalto  <jari aalto A T cante net>

	* etc/template/Makefile.tmp ($(EXE)): Missing CFLAGS added.

2006-06-28  Jari Aalto  <jari dot aalto A T cante dot net>

	* etc/template/manualpage.pod.tmp: Moved OPTIONS before
	DESCRIPTION.

	* bin/cygbuild.sh: (CygbuildGPGverify): Filter 'insecure
	memory|faq.html' lines.
	(CygbuildExtractTar): Added warning if archive does not contain
	package-N.N dir. Remove push/pop and used -C option of tar to
	extract file.
	(CygbuildTarDirectory): Did not find top level directory correctly.
	Fixed.
	(CygbuildCmdMkpatchMain): If archive did not have top level dir,
	the patch making failed. Remove push/pop and used -C option of tar to
	extract file.

2006-06-16  Jari Aalto  <jari aalto A T cante net>

	* etc/template/Makefile.tmp (SRCS): New.
	(OBJS): Corrected.
	(EXE): rewritten PACKAGE compile rule.
	(EXE): New.
	(LDFLAGS): New.
	(clean): Added $(PACKAGE) and *.exe

2006-05-14  Jari Aalto  <jari dot aalto A T cante dot net>

	* bin/cygbuild.sh (CygbuildVersionInfo): PErl code fine tuning.
	Lifter @a off the if-statement for easier debug.

2006-03-28    Jari Aalto  <jari dot aalto A T cante dot net>

	* bin/cygbuild.sh: (CygbuildInstallPackageInfo):
	Better find(1) statement.
	(CygbuildCmdInstallCheckManualPages):
	Better error message.

2006-03-09  Jari Aalto  <jari dot aalto A T cante dot net>

	* etc/template/Makefile.tmp (INSTALL_SUID): New.

2006-02-27 Mon  Jari Aalto  <jari dot aalto A T cante dot net>

	* etc/template/Makefile.tmp (ETCDIR): 1.12 $PACKAGE => $(PACKAGE)

	* bin/cygbuild.sh
	(function CygbuildMakefileRunTarget()): 1.866 Changed WARN
	to NOTE if target was missing.

	* etc/template/install.env.options.tmp: PREFIX =>
	CYGBUILD_PREFIX

2006-02-23 Thu  Jari Aalto  <jari dot aalto A T cante dot net>

	* bin/cygbuild.sh (function CygbuildCmdStripMain()): 1.858 Removed
	unnecessary find(1) option -print.
	(function CygbuildCmdInstallCheckDocPages()): 1.858 Removed
	unnecessary find(1) option -print.
	(function CygbuildCmdInstallCheckManualPages()): 1.858 Removed
	unnecessary find(1) option -print.
	(function CygbuildInstallPackageInfo()): 1.858 Removed
	unnecessary find(1) option -print.
	(function CygbuildCmdCleanMain()): 1.858 Removed
	unnecessary find(1) option -print.
	(function CygbuildGPGsignMain()): 1.858 Removed
	unnecessary find(1) option -print.
	(function CygbuildCmdFinishMain()): 1.862 List with ls(1) source
	and binary files in GBS mode.
	(CygbuildcommandMain): Command [all]: Removed
	`CygbuildCmdInstallCheckMain'. It's a devel option.
	(CygbuildCmdInstallCheckManualPages): 1.863 REmoved separate
	*postinstall* file check. Already covered by
	CYGBUILD_IGNORE_ETC_FILES. Corrected 'leading dot' check.
	(function CygbuildCmdPrepMain()): 1.863 Moved
	`CygbuildCmdMkdirs' upward.

2006-02-22 Wed  Jari Aalto  <jari dot aalto A T cante dot net>

	* etc/makefile/vars.mk (echo-vars): Corrected makefile Rule:
	hint.

	* bin/cygbuild.pl (build binary): 1.246 (HELP::OPTIONS::--gbs):
	New option. This is the g-b-s compatibility mode.

	* bin/cygbuild.sh (function CygbuildRunPythonSetupCmd()):
	1.852 Removed `CygbuildRun'. Use `CygbuildRunShell'.
	(function CygbuildRun()): 1.852 $* => "$@"
	(function CygbuildCommandMain()): 1.852 Added option --gbs and
	variable OPTION_GBS_COMPAT
	(function CygbuildCmdPkgBinaryStandard()): 1.852 Added
	OPTION_GBS_COMPAT support.
	(function CygbuildDefineGlobalMain()): 1.852 Added
	OPTION_GBS_COMPAT support.
	(function CygbuildIsGbsCompat()): 1.854 New.
	(function CygbuildDefineGlobalScript()): 1.854 Set
	OPTION_GBS_COMPAT automatically.
	(function CygbuildCmdDependMain()): 1.854 Added missing -o
	to find(1).
	(function CygbuildInstallPackageInfo()): 1.854 Added missing -o
	to find(1).
	(function CygbuildCmdInstallCheckShellFiles ()): 1.854 Added missing -o
	to find(1).
	(function CygbuildCmdInstallCheckLibFiles()): 1.854 Added missing -o
	to find(1).
	(function CygbuildCmdInstallCheckLibFiles()): 1.854 Added missing -o
	to find(1).
	(function CygbuildStripCheck()): 1.854  Added missing -o
	to find(1).
	(function CygbuildFilesExecutable()): 1.854 Added missing -o
	to find(1).
	(function CygbuildFilesExecutable()): 1.854 Removed unnecessary option
	-print.
	(top level::CYGBUILD_PUBLISH_DIR): 1.854 Renamed. Was
	CYGWIN_BUILD_PUBLISH_DIR
	(function CygbuildIsSrcdirOk()): 1.856 Added support for Debian
	*.orig directories.
	(function CygbuildFilePackageGuessMain()): 1.857 Use
	`CygbuildWarn' for message.
	(function CygbuildCmdPkgExternal()): 1.857 Use
	`CygbuildWarn' for message.
	(function CygbuildCmdPkgSourceExternal ()): 1.857 Use
	`CygbuildWarn' for message.
	(function CygbuildCmdPkgSourceCvsdiff()): 1.857 Use
	`CygbuildWarn' for message.
	(function CygbuildFilePackageGuessFromDirectory()): 1.857
	Added short circuit test.
	(function CygbuildFilePackageGuessMain()): 1.857 Added
	Debian *.orig support.
	(function CygbuildInstallCygwinPartMain()): 1.858 Added
	error checking for missing README.
	(function CygbuildCmdMkpatchMain()): 1.858 Added Debian
	.orig support.
	(function CygbuildGrepCheck()): 1.858 $* => "@$"

2006-02-21 Tue  Jari Aalto  <jari dot aalto A T cante dot net>

	* bin/cygbuild.sh (top level): 1.840 Removed
	$CYGBUILD_HOMEPAGE_URL and added CVS instructions. (function
	CygbuildCommandMain()): 1.840 Added 'src-package', 'conf*',
	'unpack', 'list', 'checksig', 'auto*' g-b-s compatibility
	commands.
	(CygbuildCmdAutotool): New.
	(function CygbuildRunShell()): 1.840 Check for empty
	CYGBUILD_CC and CYGBUILD_CXX. Set Cc and CXX to their default
	values if not set.
	(function CygbuildRunShell()): 1.846 Removed $OPTION_DEBUG,
	becasye can't suppose bash -x. The running command could be
	anything; like python.
	(function CygbuildIsEmpty()): 1.846 New. Use bash 3.x
	(function CygbuildRunShell()): 1.846 Added guard against
	empty CC, CXX.
	(function CygbuildIsNumber()): 1.846 New. Use bash 3.x
	(function CygbuildMatchRegexp ()): 1.846 New.
	(function CygbuildIsReleaseMatch()): 1.846 Removed.
	(function CygbuildMatchBashPatternList()): 1.846 Renamed.
	Was `CygbuildBashPatternListMatch'.
	(function CygbuildIsVersion()): 1.846 Removed. Unused.
	(function CygbuildIsNumberLike()): 1.846 New.
	(function CygbuildIsVersionMatch()): Removed. Replaced by
	CygbuildIsNumberLike

2006-02-20 Mon  Jari Aalto  <jari dot aalto A T cante dot net>

	* bin/cygbuild.sh: 1.840 (CygbuildCommandMain): Added
	alias 'bin-package'.
	(function CygbuildCmdInstallCheckSetupHint()): 1.840 Added check
	for obsolete lib*. Should be cyg*.

2006-02-18 Sat  Jari Aalto  <jari dot aalto A T cante dot net>

	* bin/cygbuild.sh (function CygbuildCmdStripMain()): 1.838 Changed
	WARN => NOTE: 'Hm, no installed files to strip'

2006-02-17 Fri  Jari Aalto  <jari dot aalto A T cante dot net>

	* etc/template/Makefile.tmp (install-man): 1.11 Incorrect
	variable name: INSTALL_OBJSMAN1 => INSTALL_OBJS_MAN1

	* bin/cygbuild.sh (function CygbuildCmdInstallCheckLibFiles()): 1.826
	Added *.a (usr/lib/) and *.dll (usr/bin/) checks.
	(function CygbuildCmdInstallCheckReadme()): 1.826 Fixed verison
	check to comply with g-b-s. Added <date> and <older VER>
	tag checks.
	(CYGBUILD_FIND_OBJS=): Removed unnecessary '-o'
	(CYGBUILD_FIND_EXCLUDE=): Removed unnecessary '-o'
	(function CygbuildFilesExecutable()): 1.829 Removed unnecessary '-o'
	(function CygbuildCmdDependMain()): 1.829 Removed unnecessary '-o'
	(function CygbuildInstallPackageInfo()): 1.829 Removed unnecessary '-o'
	(function CygbuildCmdInstallCheckBinFiles()): 1.829 Removed
	unnecessary '-o'
	(function CygbuildStripCheck()): 1.829 Removed unnecessary '-o'
	(function CygbuildCmdInstallCheckReadme()): 1.830 Corrected verison
	regexp.
	(function CygbuildCmdPrepClean()): 1.830 Incorrect $TOPDIR
	replaced with $srcdir.
	(function CygbuildPathAbsoluteSearch()): 1.832 Removed $WHICH,
	use builtin 'type -p'.
	(function CygbuildPathAbsoluteSearch()): 1.832 Rewritten.
	(function CygbuildPathResolveSymlink()): 1.832 New.
	(function CygbuildCmdInstallCheckPythonFile ()): 1.832 Wrong
	python path check. Added '/usr/bin/env python'.
	(function CygbuildTreeSymlinkCopy()): 1.833 Removed $WHICH.
	Use type -p.
	(function CygbuildCmdInstallCheckBinFiles()): 1.833 Removed $WHICH.
	Use type -p.
	(function CygbuildDefineGlobalCommands()): 1.833 Comented out
	WHICH.
	(function CygbuildCmdInstallCheckBinFiles()): 1.833 Added symlink
	resolve.
	(function CygbuildFilePackageGuessMain()): 1.833 Added packaging
	script detection. Added *.sig file ignore to call
	`CygbuildFilePackageGuessArchive'.
	(OVERALL): 1.836 Added '** ' to all main commands. Was '-- '

2006-02-16 Thu  Jari Aalto  <jari dot aalto A T cante dot net>

	* bin/cygbuild.pl (HELP::PACKAGE MAINTENANCE COMMANDSInstall::
	commands::check): 1.242 Added note to option --file.
	(HELP::OPTIONS::--file): Explain how the option is used
	to check any Cygwin binary packaging.

	* bin/cygbuild.sh (function CygbuildFileReleaseGuess()): 1.820
	Changed incorrect 'let -a' to 'local -a'.
	(CygbuildDefineGlobalMain): 1.820 when $templatepkg was set,
	it contained incorrect variable $arg. Fixed to $argPkg.
	(function CygbuildCmdInstallCheckDirStructure()): 1.820 Removed
	extra '/' => -d $dir$try.
	(function CygbuildCommandMain()): 1.820 DElete trailing
	slash from input to --cyginstdir
	(function CygbuildCmdInstallCheckSetupHint()): 1.820 Removed
	text from message: 'report this bug'.
	(function CygbuildFilesExecutable()): 1.820 Added missing "-o" options
	from find(1). Added */bin/* and */sbin/* searches. Added -L
	option to follow symbolic links.
	(function CygbuildCmdInstallCheckBinFiles()): 1.820 Added -L
	option to find(1)
	(function CygbuildCmdInstallCheckLibFiles()): 1.820 Added -L
	option to find(1)
	(CYGBUILD_IGNORE_FILE_TYPE): 1.820 Correct '+(' => '@('
	(CYGBUILD_IGNORE_ETC_FILES): 1.820 Correct '+(' => '@('
	(function CygbuildCmdInstallCheckShellFiles ()): 1.820 Added -L
	option to find(1)
	(function CygbuildCmdInstallCheckReadme()): 1.820 Added -L
	option to find(1)
	(function CygbuildCmdInstallCheckManualPages()): 1.820 Added -L
	option to find(1)
	(function CygbuildCmdInstallCheckDocPages()): 1.820 Added -L
	option to find(1)
	(function CygbuildCmdInstallCheckBinFiles()): 1.820 Added -L
	option to find(1)
	(function CygbuildCmdInstallMain()): 1.820 1.820 Added -L
	option to find(1)
	(function CygbuildCmdInstallCheckTempFiles()): 1.820  Added -L
	option to find(1)
	(function CygbuildCmdInstallCheckInfoFiles()): 1.820 Added -L
	option to find(1)
	(function CygbuildCmdInstallCheckReadme()): 1.820 Added missing
	backslash to [ERROR] message continuation line.
	(function CygbuildCmdInstallCheckReadme()): 1.820  Added missing
	backslash to [WARN] message continuation line.
	(function CygbuildCmdInstallCheckShellFiles ()): 1.822 Better
	[NOTE] message. Added Python check.
	(function CygbuildCmdInstallCheckReadme()): 1.822 Added $verbose;
	if set, print all foudn $version lines.
	(function CygbuildCmdInstallCheckSetupHint()): 1.822 Add
	check for non-existing $dir.
	(function CygbuildCygcheck()): 1.823 New.
	(function CygbuildCmdInstallCheckBinFiles()): 1.823 Removed
	code. Use `CygbuildCygcheck'.
	(function CygbuildCmdInstallCheckLibFiles()): 1.823 Under
	verbose, call `CygbuildCygcheck'.
	(function CygbuildCmdInstallCheckMain()): 1.823 Added DONE
	message to the end. Skip $DIR_CYGPATCH check if it does not exist.

2006-02-14 Tue  Jari Aalto  <jari dot aalto A T cante dot net>

	* etc/template/setup.hint: 1.7 Added category 'Gnome'.

	* bin/cygbuild.sh: 1.817 (CygbuildMain): From command
	[repackage-bin] removed `CygbuildCmdReadmeFix'.
	(function CygbuildHelpLong()): 1.817 Removed [ -s $retval ] test.
	(function CygbuildCmdPkgSourceStandard()): 1.817 Added $RM
	and $verbose. Moved 'local pkg' upward.
	(function CygbuildCmdPkgSourceStandard()): 1.817 SERIOUS BUG:
	the source tar archive did not contain original package if
	it was in Debian .orig.tar.gz format. Fixed.

2006-02-12 Sun  Jari Aalto  <jari dot aalto A T cante dot net>

	* bin/cygbuild.sh (function CygbuildMakefileRunInstall()): 1.791
	Added && to make sure all Python and Perl install steps succeed.
	(function CygbuildCmdInstallCheckEtc()): 1.791 If there are
	no .inst/etc/* files, then don't check.
	(function CygbuildCmdInstallCheckLibFiles()): 1.791 Chnaged WARN
	to INFO when no man pages are included. No more return (1) error
	code.
	(function CygbuildCmdBuildPython()): 1.791 Added -no-undefined
	LDFLAGS when making pythong *.dll files.
	(function CygbuildMakefileRunCleanPythonMain()): 1.791 Added
	message.
	(function CygbuildCmdBuildMainMakefile()): 1.791 Added
	AM_LDFLAGS=-no-undefined
	(function CygbuildCmdShadowMain()): 1.810 Added Python stup.py
	'clean' command.
	(function CygbuildCygDirCheck()): 1.810 Droppe $id from the
	[WARN] message 'contains tags'. Incorrect grep(1) regexp
	'\<' changed to '[<]'.
	(CYGBUILD_PROGRAM): 1.811 Changed 'cygbuild.sh' to 'Cygbuild'.
	(function CygbuildCmdCleanMain()): 1.812 Use
	CygbuildMakefileRunCleanPythonBuilddirMain()
	(function CygbuildRunPythonSetupCmd()): 1.813 Renamed.
	Was `CygbuildMakefileRunCleanPythonMain'.
	(function CygbuildMakefileRunPythonInDir()): 1.813 New.
	(function CygbuildMakefileRunInstallPythonMain()): 1.813 Use
	`CygbuildRunPythonSetupCmd'.
	(function CygbuildCmdShadowMain()): 1.813 Use
	`CygbuildRunPythonSetupCmd'.
	(function CygbuildRunPythonSetupCmd()): 1.815 Removed
	'Looks like ...' message.
	(CygbuildCmdPkgSourceStandard): 1.815 added vetter 'ls'  parameter
	to make more strict file list.
	(function CygbuildCmdDistcleanMain): 1.817 Changed 'or similar
	to 'or equiv.'

2006-02-09 Thu  Jari Aalto  <jari dot aalto A T cante dot net>

	* bin/cygbuild.sh (function CygbuildHelpSourcePackage()): 1.791
	Streamlined error message.
	(function CygbuildCmdPkgSourceStandard()): 1.791 Added
	`CygbuildGPGsignFiles' to sign the result foo-N.N-N.sh script.
	(function CygbuildCmdInstallCheckSetupHint()): 1.791 Added
	check for find(1) failure.

	* etc/template/postinstall.sh.tmp (InstallConffiles ()): 1.19
	Added $dest for `$from', so that the verifying works for
	.inst/ directory.

2006-02-08 Wed  Jari Aalto  <jari dot aalto A T cante dot net>

	* bin/cygbuild.pl
	(HELP::OPTIONS): Grammar fixes.
	(HELP::OPTIONS::--no-strip): 1.238 Added
	note that this option should not be used.
	(HELP::PACKAGE MAINTENANCE COMMANDS::files): Added
	install-after.sh.tmp and short description.
	(HELP::PACKAGE MAINTENANCE COMMANDS::clean): Corrected syntax.
	(HELP::PACKAGE MAINTENANCE COMMANDS:install): Added example
	how to run in test mode.
	(HELP::PACKAGE MAINTENANCE COMMANDS:install:preremove): New.
	Similar to 'postinstall' script test command.
	(HELP::PACKAGE MAINTENANCE COMMANDS:package): Old documentation
	corrected. The result is not put ../ but to under .sinst/ directory.
	(HELP::PACKAGE MAINTENANCE COMMANDS:source-package): Old
	documentation corrected. The result is not put ../ but to under
	.sinst/ directory.
	(HELP::PACKAGE MAINTENANCE COMMANDS:publish): Changed to better
	path name in example. Now menion .sinst/ directory. Added missing
	brackets [] from command names.
	(Commands B<[package]>): 1.238 Change from -s to --sign.
	(HELP::PACKAGE MAINTENANCE COMMANDS:patch): Grammar fixed.
	(HELP::DESCRIPTION): Grammar fixes.
	(HELP::OPTIONAL EXTERNAL FILES): Emplain .tmp suffix.
	(HELP::ENVIRONMENT): Removed DEBFULLNAME

	* index.html: 1.33 Corrected page according to
	<http://validator.w3.org/>.

	* bin/cygbuild.sh (CYGBUILD_IGNORE_ETC_FILES): 1.791 Added
	`bash_completion.d'.
	(function CygbuildCmdInstallCheckManualPages()): 1.791 Exclude
	from manual page check files: */usr/share* */usr/lib*
	(function CygbuildCommandMain()): 1.791 command [all]: Added call
	to CygbuildCmdInstallCheckMain(). Added new command [preremove].
	(function CygbuildDependsList()): 1.791 New.
	(function CygbuildCmdInstallCheckBinFiles()): 1.791 Added call to
	CygbuildDependsList. The shell dependencies must be listed. Added
	check for Perl, Python executables under /bin, so that they are
	required to appear in setup.hint 'requires:' as well.
	(function CygbuildCmdPreremoveInstallMain()): 1.791 New.
	(function CygbuildCmdPostInstallMain()): 1.791 Changed
	`scriptPostInstall' variable to cimple `script'.
	(function CygbuildCmdScriptRunMain()): 1.791 New.

	* etc/template/postinstall.sh.tmp (InstallConffiles ()): 1.19 Incorrect
	variable in grep: changed to $conffiles_to.

	* etc/template/preremove.sh.tmp (RemoveConffiles ()): 1.4 Incorrect
	variable in grep: changed to $conffiles_to.
	(RemoveConffiles ()): 1.4 Changed `diff' command to `cmp'. This
	may be faster.

2006-02-07 Tue  Jari Aalto  <jari dot aalto A T cante dot net>

	* etc/template/upstream.perl-webget.tmp: 1.2 Added missing
	newline.

	* etc/template/preremove.sh.tmp (RemoveConffiles ()): 1.4 Changed
	#PKGDOCDIR => $PKGDOCDIR and #PKG => $PKG

	* bin/cygbuild.sh (function CygbuildCmdInstallCheckEtc()): 1.791
	Exclude from check: /etc/preremove and /etc/postinstall
	(CYGBUILD_IGNORE_ETC_FILES): 1.791 New.
	(function CygbuildCmdInstallCheckManualPages()): 1.791 Use
	CYGBUILD_IGNORE_ETC_FILES
	(function CygbuildIsSrcRootOk ()): 1.791 New.
	(function CygbuildCmdMkpatchMain()): 1.791 Before making patch,
	verify that the build directory conforms de facto package-N.N
	otherwise created patch will fail when applied later.
	(function CygbuildCmdStripMain()): 1.791 Wording changed
	'not an x86 executable' => 'not a binary executable'.

	* etc/template/setup.hint (ldesc:): 1.7 Removed 'some text' and
	left sdesc and ldesc empty. Easier to fill in when no text needs
	to be deleted.

2006-02-06 Mon  Jari Aalto  <jari dot aalto A T cante dot net>

	* bin/cygbuild.sh (function CygbuildDefineGlobalCompile()): 1.791
	Added '[INFO] Good, seems to be libtool enabled' if package uses
	libtool. Enabled only with --verbose option.
	(function PackageUsesLibtoolMain ()): 1.791 Renamed. Was
	`MakefileUsesLibtoolMain'.
	(function PackageUsesLibtoolCompile ()): 1.791 Renamed. Was
	`MakefileUsesLibtoolCompile'.
	(function CygbuildDefineGlobalCompile()): 1.791 Improved
	libtool check by looking at file `configure' as well.
	(function CygbuildConfCC()): 1.791 Improved
	libtool check by looking at file `configure' as well.
	(function CygbuildCmdBuildMainMakefile()): 1.791 Incorrect variable
	LFLAGS => LDFLAGS. Incorrect variable flag => flags. Incorrect
	variable $CYGBUILD_LDLAGS => $CYGBUILD_LDFLAGS. Did not use the
	CC, CXX, LDFLAGS at all.

2006-02-04 Sat  Jari Aalto  <jari dot aalto A T cante dot net>

	* etc/template/postinstall.sh.tmp (): 1.19
	(Environment): 1.4 Corrected initialization of variable $dest.
	(InstallConfFiles) Added $dest in front of find(1) directory.

	* etc/template/preremove-manifest-from.lst.tmp: New.

	* etc/template/preremove.sh.tmp
	Added comments to the beginning how to test the script.
	(Main ()): 1.4 Wrong function
	called. InstallConffiles => RemoveConffiles
	(RemoveConffiles ()): 1.4 Added missing `read' command to
	while loop. Allow comments in /etc/preremove/geoip-manifest-from.lst
	and /etc/preremove/geoip-manifest.lst (added grep filter).
	Added variable $tmpprefix. Added $dest in front of find(1)
	directory.
	(Environment): 1.4 Corrected initialization of variable $dest.

	* bin/cygbuild.pl (HELP::QUICK OVERVIEW): 1.238 Added
	'... -v depend' command to the example run. Reworded
	'nasty-package' to 'some-package'.

	* bin/cygbuild.sh (function CygbuildCommandMain()): 1.791
	Added synonym 'depends' for 'depend command.
	(function CygbuildDefineEnvClear()): 1.791 Added '[INFO]' tag
	to message 'Clearing environment...'
	(function CygbuildPatchApplyRun()): 1.791 Added '[NOTE]'
	to the text of 'If patch fails ...'.
	(function CygbuildRunShell()): 1.791 Added 'local' to
	undefined variable 'cmd'.
	(function CygbuildHelpShort()): 1.791 Extra newline removed
	from top of help text.
	(function CygbuildCmdInstallCheckEtc()): 1.791 New.
	(function CygbuildCmdInstallCheckMain()): 1.791 Call
	`CygbuildCmdInstallCheckEtc'.

2006-01-23 Mon  Jari Aalto  <jari dot aalto A T cante dot net>

	* etc/template/configure.options.tmp: 1.4 Added --disable-nls
	example.

	* etc/template/upstream.perl-webget.tmp: 1.1 Added
	sourceforge download example.

2006-01-15 Sun  Jari Aalto  <jari dot aalto A T cante dot net>

	* etc/template/Makefile.tmp (INSTALL_OBJS_ETC): 1.10 New.

	* bin/cygbuild.sh (function CygbuildCmdFilesWrite()): 1.787
	Don't overwrite existing files.

2006-01-14 Sat  Jari Aalto  <jari dot aalto A T cante dot net>

	* etc/template/upstream.perl-webget.tmp: New template for upstream
	downloads.

	* bin/cygbuild.sh (function CygbuildCmdMkpatchMain()): 1.787 To
	make a patch two things happen. A) the original source archive is
	unpacked to ./build/foo-1.3 and then it is moved under name
	./build/foo-1.3-orig. B) Next the user made changed are copied to
	./build/foo-1.3. The Diff is taken between these two. However,
	when next round [mkpatch] happens, there IS OLD DIRECTORY
	./build/foo-1.3 (user's changes) that's being overwritten by the
	archive unpack. => no differences. Now fixed: remove both
	directories A and B before doing anything else
	(function CygbuildPatchApplyMaybe()): 1.787 Incorrect call:
	CygbuildCygbuildDie => CygbuildDie
	(Top Level::CYGBUILD_PATCH_OPT): Added '--strip=0' because
	without it applying the patch will fail.
	It needs to work inside foo-1.3/ directory

2006-01-12 Thu  Jari Aalto  <jari dot aalto A T cante dot net>

	* etc/template/Makefile.tmp (SHAREDIR): 1.10 New.
	(LIBDIR): 1.10 New.
	(INSTALL_OBJS_MAN1): 1.10 Renamed. Was INSTALL_OBJSMAN1
	(INSTALL_OBJS_SHARE): 1.10 New.

2005-12-20 Tue  Jari Aalto  <jari dot aalto A T cante dot net>

	* bin/cygbuild.pl: 1.237 (HELP::STANDARDS): Added note to compile
	using -Wl,--enable-auto-image-base as per message by Yitzchak
	Scott-Thoennes 2005-12-19 in cygwin-apps mailing list.

2005-12-02  Jari Aalto  <jari dot aalto A T cante dot net>

	* etc/template/upstream.perl-webget.tmp: New.

2005-11-24 Thu  Jari Aalto  <jari dot aalto A T cante dot net>

	* bin/cygbuild.sh (function
	CygbuildMakefileRunInstallPythonFix()): 1.785 Typo in output.

2005-10-16 Sun  Jari Aalto  <jari dot aalto A T cante dot net>

	* bin/cygbuild.sh (function CygbuildCommandMain()): 1.784
	Added new command [upstream-download].

	* bin/cygbuild.pl: 1.236 (HELP::Other commands): Moved
	[all] to the beginning (alphabetical ordering).
	(HELP::Other commands): Documented new command
	[upstream-download].

2005-10-15 Sat  Jari Aalto  <jari dot aalto A T cante dot net>

	* bin/cygbuild.sh (function CygbuildPythonCompileFiles()): 1.782
	Rewrote compiling by using pure python. No more shell calls
	for every file to compile python file.

2005-10-01 Sat  Jari Aalto  <jari dot aalto A T cante dot net>

	-- This is preliminary release where it is possible to
	   create packages directly from Version controlled checkout (CVS).
	-- The option "--checkout source-pkg" make package than can
	   retrieve the exact snapshot.

	* etc/etc/programs.conf: 1.7 Added LN.

	* bin/cygbuild.sh (function CygbuildExtractWithScript()): 1.779
	Added error checking after symlink and mkdir.
	(function CygbuildDefineGlobalCommands()): 1.779 Added LN.
	(function CygbuildTreeSymlinkCopy()): 1.780 Removed
	local LN.
	(function CygbuildPythonCompileFiles()): 1.780 New.
	(function CygbuildPythonCompileDir()): 1.780 New.
	(function CygbuildMakefileRunInstallPythonMain()): 1.780 Added
	recompiling all files.

2005-09-30 Fri  Jari Aalto  <jari dot aalto A T cante dot net>

	* bin/cygbuild.sh
	(top level): New variable `cygbuild_opt_exclude_cygbuild'
	Do not include CYGWIN-PATCHES/c-cvs-checkout.sh to *.patch
	(function CygbuildCmdPkgSourceCvsdiff()): 1.770
	Improved error checking.
	(function CygbuildDefineGlobalMain()): 1.770 removed *.tmp
	extension from SCRIPT_SOURCE_GET_TEMPLATE.
	(function CygbuildCmdPkgSourceCvsMain()): 1.770 Check that
	$template exists.
	(function CygbuildCommandMain()): 1.774 Added
	call to CygbuildVersionControlType() to noticy about
	option --checkout.
	(function CygbuildCmdPkgSourceCvsMain()): 1.776 Extra .sh
	was added to the CVS checkout script:
	foo-20050930-1-source-install.sh.sh =>
	foo-20050930-1-source-install.sh
	(function CygbuildCmdPkgSourceCvsMain()): 1.777 incorrect
	'build' script. Used cygbuild-*.sh when it shoudl have been
	<package>-*.sh. Fixed.
	(function CygbuildFilePackageGuessMain()): 1.777 Incorrect
	regexp parameter to CygbuildFilePackageGuessArchive(). Didn't
	allow YYYYMMDD version numbers, but only NN.NN.
	(function CygbuildFilePackageGuessArchive()): 1.777 Removed -v
	options from AWK call.
	(function CygbuildFilePackageGuessMain()): 1.777 Return ! if
	cannot find source package.

	* etc/template/vc-cvs-checkout.sh.tmp (top level): 1.1 Added
	PATH. Added variable `verbose'. Added :CHECKOUTMODULE: tag.
	(PrintBanner ()): 1.1 New.
	(CheckBinList ()): 1.1 Use HERE doc, not double quotes.

	* bin/cygbuild.pl (sub Date): 1.234 Return HH:MM with leading
	zeroes.
	(sub PackageCVScoScript): 1.234 Added :CHECKOUTMODULE: tag.

2005-09-27 Tue  Jari Aalto  <jari dot aalto A T cante dot net>

	* bin/cygbuild.pl (HELP::Build commands::clean): 1.223
	documented new *clean commands: clean, distclean, realclean etc.

	-- Massive replacements: All 'Exit 1' calls changed to
	   CygbuildDie(). Exit is now namespace clean => CygbuildExit.

	* bin/cygbuild.sh (function CygbuildCommandMain()): 1.767
	Command [clean] is now generic. I.e. `distclean', `realclean'
	or just `clean' runs the appropriate make targets.
	Call CygbuildCmdCleanByType(). Removed separate
	command [distclean]
	(function CygbuildMakefileRunTarget()): 1.767 New.
	(function CygbuildCmdCleanByType()): 1.767 New.
	(function CygbuildDie()): 1.767 New.
	(function CygbuildExitNoDir()): 1.767 Use CygbuildDie()
	(function CygbuildExitNoFile()): 1.767 Use CygbuildDie()
	(function CygbuildCmdDistcleanMain): 1.767 Removed code
	which is now handled in call to CygbuildMakefileRunTarget()
	(function CygbuildCmdTestMain()): 1.767 Excess code removed.

2005-09-22 Thu  Jari Aalto  <jari dot aalto A T cante dot net>

	* bin/cygbuild.pl (HELP::FILES): 1.223 Documented
	the use of /var/cache/cygbuild.
	(HELP::OPTIONS): Documented new user options
	--cyginstdir, --cygbuilddir, --cygsinstdir
	(HELP::Install commands::check): 1.223 Documented that
	--cyginstdir is useful with the [check] command to test
	other packages' installations.

	* bin/cygbuild.sh (function CygbuildStrRemoveExt()): 1.759
	Added *.tbz2
	(function CygbuildTarOptionCompress()): 1.759 Typo: condition
	case must be *tgz)  not  tgz).
	(function CygbuildCmdInstallCheckReadme()): 1.760 Instead of 3
	lines of INFO warnings, now print only 2.
	(CYGBUILD_LIB_DIR_ROOT): 1.761 Moved /var/lib/cygbuild
	to /var/cache/cygbuild
	(function CygbuildCygDirCheck()): 1.761 More strict check:
	fo not use *README*, but $PKG.README
	(function CygbuildCommandMain()): 1.761 Added new options
	--cyginstdir, --cygbuilddir, --cygsinstdir. Added `unset' commands for
	new $OPTION_* variables.
	(function CygbuildDefineGlobalMain()): 1.761 Use
	OPTION_PREFIX_CYGINST, OPTION_PREFIX_CYGBUILD,
	OPTION_PREFIX_CYGSINST if they are set. These replace hard
	codes paths like .inst, .build, .sinst.
	(function CygbuildCmdInstallCheckLibFiles()): 1.764 Added for-loop
	to show library files, instead of cryptic one line echo.
	(function CygbuildPatchApplyRun()): 1.766 Print PWD where
	the patch is being applied. Helps in debugging.
	(function CygbuildDefineGlobalMain()): 1.767 Changed
	DIR_CYGPATCH_DONE_PATCHES frm done.patch.tmp => done-patch.lst

2005-09-21 Wed  Jari Aalto  <jari dot aalto A T cante dot net>

	--  New command [patch] can now apply all *.patch files included
	    in CYGWIN-PATCHES. The --strip=N count can be indicated in the
	    the file name by placing word 'strip+N' somewhere. Like
	    CYGWIN-PATCHES/foo-1.2.3.strip+3.patch

	* bin/cygbuild.pl (HELP::Other commands): 1.223 Documented
	new command [patch].

	* bin/cygbuild.sh (function CygbuildPatchApply()): 1.757
	Removed hard coded patch file name. Now takes argument $1,
	the patch file name.
	(function CygbuildCmdPrepPatch()): 1.757 Send $FILE_SRC_PATCH
	to CygbuildPatchApply().
	(function CygbuildPatchApplyMaybe()): 1.757 New.
	(function CygbuildCmdPrepMain()): 1.757 Call
	`CygbuildPatchApplyMaybe'.
	(Main ()): New user command [patch] to apply all external
	patches under CYGWIN-PATCH/*.patch.
	(function CygbuildPatchPrefixStripCountFromFilename()): 1.757 New.
	(function CygbuildPatchPrefixStripCountFromContent()): 1.757 New.
	(function CygbuildPatchApplyRun()): 1.757 Added --test option
	support. Do not actually patch.
	(top level::CYGBUILD_PATCH_OPT): Removed --strip=0.

	* etc/template/package.README (IRC channel:): 1.17 Added
	new heading 'IRC channel'.

2005-09-20 Tue  Jari Aalto  <jari dot aalto A T cante dot net>

	* bin/cygbuild.pl
	(OPTIONAL EXTERNAL FILES::)preremove-manifest-from.lst: 1.223
	New file. Documented its use.

	* etc/template/postinstall.sh.tmp (Environment): 1.14 Added double
	quotes around every variable settings, because `$dest' CAN
	nclude directory with spaces.
	(InstallConffiles ()): 1.14 New.

	* etc/template/preremove.sh.tmp (Environment): 1.2 Added double
	quotes around every variable settings, because `$dest' CAN
	nclude directory with spaces.
	(InstallConffiles ()): 1.2 New.

2005-09-19 Mon  Jari Aalto  <jari dot aalto A T cante dot net>

	* bin/cygbuild.sh (function CygbuildDefineGlobalMain()): 1.755
	Many global variables were renamed.
	(function CygbuildInstallCygwinPartMain()): 1.755 Rewrote
	whole function.

2005-09-18 Sun  Jari Aalto  <jari dot aalto A T cante dot net>

	* bin/cygbuild.sh (function CygbuildInstallPackageInfo()): 1.752
	Added LC_ALL=C
	(function CygbuildCmdInstallCheckBinFiles()): 1.753 Check if file
	size is too big and print warning. User may have forgot to
	compile the file against shared libraries.

2005-09-17 Sat  Jari Aalto  <jari dot aalto A T cante dot net>

       -- command [source-package] mistakenly added binary package in that
	    tar file. Now fixed.
	-- 1.751 is stable again and can be used for production.

	* etc/template/preremove-manifest.lst.tmp: New empty file.
	See manual page for explanation.

	 * bin/cygbuild.pl (Help::Using preremove and postinstall for /etc
	configuration files): 1.223 New topic in section
	CYGWIN PACKAGE POLICY NOTES
	(HELP::OPTIONAL EXTERNAL FILES): 1.223 Documented preremove.sh and
	preremove-manifest.lst files.

	* bin/cygbuild.sh (function CygbuildInstallCygwinPartMain()): 1.747
	Added variable `tofile'. Better message.
	(function CygbuildInstallCygwinPartPostinstall()): 1.747
	Added variable `tofile'. Better message.
	(top level::cygbuild_opt_exclude_version_control): 1.748 Added
	.cvsignore, .svnignore, .hgignore, .bzrignore
	(function CygbuildCmdPkgSourceStandard()): 1.750 mistakenly
	added binary package inside source archive. Fixed.
	(function CygbuildDefineGlobalMain()): 1.750 New
	variable LIST_TEMPLATE_CYGPREREMOVE. Renamed
	SCRIPT_CYGPREREMOVE => SCRIPT_CYGPREREMOVE_DIR
	(function CygbuildInstallCygwinPartMain()): 1.750 Added install
	of preremove-manifest.lst file.

	* etc/template/postinstall.sh.tmp: 1.14 Fixed PATH.
	Added variable `manifest' =>  manifest-PACKAGE.lst file.

	 * etc/template/preremove.sh.tmp (Main "$@"): 1.1 Added
	initial content.

2005-09-16 Fri  Jari Aalto  <jari dot aalto A T cante dot net>

	-- setup.hin is no examined with [check] command and the obvious
	   mistakes are reposted.

	* etc/template/package.README (Mailing List:): 1.17 typo:
	License => License:

	* bin/cygbuild.pl (Help::CYGWIN PACKAGE POLICY NOTES): 1.223 New
	heading 1. Wrote topic 'Music file formats *.mp3, *.ogg etc.'

	* bin/cygbuild.sh (top level::cygbuild_opt_exclude_object_files):
	1.744 New.
	(top level::CYGBUILD_TAR_INSTALL_EXCLUDE): Use
	$cygbuild_opt_exclude_object_files
	(top level::CYGBUILD_CVSDIFF_OPTIONS): Use
	$cygbuild_opt_exclude_object_files
	(top level::CYGBUILD_DIFF_OPTIONS): Use
	$cygbuild_opt_exclude_object_files
	(top level::CYGBUILD_TAR_EXCLUDE): Use
	$cygbuild_opt_exclude_object_files
	(function CygbuildDefineGlobalMain()): 1.744 New variable
	$DIR_CYGPATCH_RELATIVE to nclude 'CYGWIN-PATCHES'. Do not
	use hard coded name.
	(function CygbuildCmdInstallCheckReadme()): 1.746 Do not test
	find(1) exit status, but the $retval- This is better error handling.
	(function CygbuildCmdInstallCheckSetupHint()): 1.746 New.

2005-09-13 Tue  Jari Aalto  <jari dot aalto A T cante dot net>

	-- Radical changes in the code. The last known good version is
	   cygbuild.sh 1.737. See CVS tag 'devel-2005-09-13'.
	-- Support ./.sinst with custom
	   packaging locations, like under usr/local.
	-- New option --install-usrlocal must be included in
	   every command to use url/local prefixes instead of the
	   cygwin Net Release's standard usr/ install location. This
	   makes it possible to create privatedly installed packages.
	-- setup.hint 'requires:' dependency check code completely
	   rewritten in Perl module cygbuild.pl. It now needs reliable
	   package database to do it right. To build the database,
	   added new option --init-pkgdb to cygbuild.sh (the first
	   time db generation takes OODLES of time)

	* bin/cygbuild.pl (HELP::Install commands): 1.217 Documented command
	`check-deps'
	(HELP::OPTOIONS): Documented new option --install-prefix.
	(my $CYGWIN_PACKAGE_LIST_DIR): 1.217 New.
	(sub ReadmeFixSearch): 1.217 NEw.
	(sub FileRead): 1.217 New function. Faster. The old one
	was moved under name FileReadSlow().
	(sub ListSearch): 1.217 New.
	(sub CygcheckFilter): 1.217 Removed all extra code that tried to
	guess correct package name from e.g. DLL name cygICE-6.dll. It
	wasn't reliable.
	(sub CygcheckDepsNeeded): 1.217 Added NEW code to find out the
	exact library from where the DLL comes from.
	(verbose option): 1.217 Documented new option --init-pkgdb.

	* bin/cygbuild.sh (function CygbuildFilePackageGuessMain()): 1.736
	Do not run `CygbuildCmdDependCheckMain' any more automatically
	during check. It's too difficult to determine what
	are the correct libraies in require: statement. Moved this
	functionality to separate command `check-deps'.
	(function CygbuildCommandMain()): 1.736 Added option --version.
	(export CYGBUILD_TAR_INSTALL_EXCLUDE): 1.736 Comment above, typos
	fixed. Patch thanks to Dr. Volker Zell <Dr.Volker.Zell
	oracle.com>.
	(Main): Comment below `CygbuildDefineGlobalScript', typos
	fixed. Patch thanks to Dr. Volker Zell <Dr.Volker.Zell
	oracle.com>.
	(function CygbuildDefileInstallVariables()): 1.736 New. Moved
	Variable definitions from the beginning to this function.
	(function CygbuildCommandMain()): 1.736 Added options
	--install-prefix, --install-man-prefix, --install-usrlocal
	(function CygbuildMakefileRunInstallCygwinOptions()): 1.736
	Use $CYGBUILD_DOCDIR_FULL
	(function CygbuildCmdPostInstallMain()): 1.736 Use
	$CYGBUILD_INFO_FULL
	(function CygbuildDefileInstallVariables()): 1.736 New variables:
	$CYGBUILD_INFO_FULL, $CYGBUILD_DOCDIRCYG_FULL,
	$CYGBUILD_SYSCONFDIR
	(function CygbuildCmdInstallCheckBinFiles()): 1.736 Use
	$CYGBUILD_DOCDIRCYG_FULL
	(function CygbuildCmdInstallCheckDirStructure()): 1.736 Added
	/usr/local/bin check.
	(function CygbuildCmdInstallCheckDirStructure()): 1.739 Use
	$CYGBUILD_PREFIX not hard coded usr/bin to allow usr/local/bin
	(function CygbuildCmdInstallCheckDocPages()): 1.739 Use
	$CYGBUILD_PREFIX not hard coded usr/doc.
	(function CygbuildCmdInstallCheckManualPages()): 1.739 Use
	$CYGBUILD_MANDIR_RELATIVE, not hard coded usr/share/man
	(function CygbuildDefineGlobalPackageDatabase()): 1.743 New.
	(function CygbuildCommandMain()): 1.743 New option --init-pkgdb
	(top level::CYGBUILD_LIB_DIR_ROOT): 1.743 New.
	(top level::CYGBUILD_LIB_DIR_PKG): 1.743 New.

2005-09-12 Mon  Jari Aalto  <jari dot aalto A T cante dot net>

	* Makefile (OBJS_ETC_TMPL): Added missing double quote.
	(OBJS_ETC_MAIN): Added missing double quote.

	* bin/cygbuild.sh (function CygbuildFilePackageGuessMain()): 1.730
	REmoved extra calls to `pwd'. Use variable instead.
	(function CygbuildFilePackageGuessMain()): 1.730 Improved
	source archive search from current directory. Added tar.bz2 search.
	(function CygbuildCmdPkgSourceStandard()): 1.735 When -src.tar.bz2
	was made the content of .sinst/ was traaed up. But if there were
	older release files like -1, -2 and current was -3, then ALL
	these files end up in tar. Now cleans other releases.

2005-09-11 Sun  Jari Aalto  <jari dot aalto A T cante dot net>

	* etc/template/cygwin-announce.mail.tmp (PACKAGE CHANGES): 1.1 New.

	* etc/template/build.options.tmp: 1.3 Typo: libraies => libraries

	* etc/template/configure.sh.tmp: 1.14 Changed `$*' => `$@'

	* etc/template/manualpage.pod.tmp: 1.4 Added URL inside commant
	to point to POD manual. Added ENVIRONMENT section. Syntax checked
	with `podchecker' program.

	* bin/cygbuild.pl (Help::OPTIONS): 1.214 Corrected text in
	many options.

	* bin/cygbuild.sh (function CygbuildDefineGlobalCommands()): 1.728
	Print 'reading config file' only during --verbose option.
	(function CygbuildCommandMain()): 1.728 Don't print
	the '-- cygbuild.sh YYYY-MM-DD ...' string if --version
	or -V is asked.
	(function CygbuildCmdBuildMainMakefile()): 1.728 Added
	'set -x' under $debug to show makefile flags.

2005-09-10 Sat  Jari Aalto  <jari dot aalto A T cante dot net>

	* etc/template/package.README (Mailing List:): 1.16 Added
	new heading 'Mailing List:'

	* bin/cygbuild.sh (function CygbuildHelpShort()): 1.720 Delete
	path portion from `bin'. Moved URL to separate line.
	(CygbuildCommandMain::all): Display NOTE why `all' option
	is not really useful for development. It is used for
	build verification only.
	(CygbuildCommandMain::source-package): Added && tests to
	prevent calling other functions in case of error.
	(TOP): Added URL link to GPL. Removed FSF address, it has
	been changed.
	(top level): Moved `CYGBUILD_ID' to the beginning of file.
	It was printed in initial shell check.
	(function CygbuildFilesInstallMaybe()): 1.720 Wrong function
	IsTemplateFilesInstalled => CygbuildIsTemplateFilesInstalled
	(function CygbuildFilesInstallMaybe()): 1.720 Removed. Not
	used.
	(CygbuildCmdFilesWrite): 1.720 Do not copy already
	existing *.tmp files.
	(function CygbuildCmdInstallCheckPythonFile ()): 1.720 Wrong
	variable $PERL => $PYTHON. Added
	'head -1' to filter multiple bang slash #! paths.
	(function CygbuildCmdInstallCheckPerlFile ()): 1.720 Added
	'head -1' to filter multiple bang slash #! paths.

2005-09-09 Fri  Jari Aalto  <jari dot aalto A T cante dot net>

	* bin/cygbuild.sh (function CygbuildHelpSourcePackage()): 1.704
	Improved message that says what to do.
	(CygbuildCommandMain::all): Do not display error
	if sourcepackage cannot be built.
	(CygbuildCommandMain::source-package):
	Call CygbuildHelpSourcePackage() to check for environment
	first.
	(function CygbuildVersionControlType()): 1.704 Incorrect
	commands: CygbuildIsHgPackage => CygbuildIsMercurialPackage,
	CygbuildBzrPackage => CygbuildIsBzrPackage

2005-09-07 Wed  Jari Aalto  <jari dot aalto A T cante dot net>

	* etc/template/install-after.sh.tmp: 1.10 (Cmd): Rewrote.

2005-09-06 Tue  Jari Aalto  <jari dot aalto A T cante dot net>

	* bin/cygbuild.sh (function CygbuildCmdPkgDevelStandard()):
	1.704 Exclude *.dll files from the devel-bin packaging.
	(function CygbuildCmdBuildMainMakefile()): 1.704 Added subshell wrapper
	around MAKE, so that `source' wouldn't pollute the programs's namespace.
	Display content of `optfile' when verbose is on.
	(function CygbuildMakefileRunInstall()): 1.704 Removed
	EXTRA_ENV_OPTIONS_INSTALL `source' command to read
	install.env.options.
	(function CygbuildMakefileRunInstallCygwinOptions()): 1.704 Added
	subshell while reading install.env.options.

	* bin/cygbuild.pl: 1.197 (Help::) All `-NN.NN' were replaced
	with `-N.N'

2005-09-04 Sun  Jari Aalto  <jari dot aalto A T cante dot net>

	* etc/template/vc-cvs-checkout.sh: New

	* bin/cygbuild.pl (sub Date): 1.197 Added new ARG to select
	UTC time.
	(my $PASSORD_RET_SITES): 1.197 New.
	(sub PrintHash): 1.197 New.
	(sub Date): 1.197 Converted input args to HASH. Added option
	-time and -utc.
	(sub PackageCVScoScript): 1.197 Rewrote whole function.
	(Help::QUICK OVERVIEW::The big picture): 1.197 Updated.
	(sub DiffToExclude): 1.197 Added debugging support.

	* bin/cygbuild.sh (declare CYGBUILD_RETVAL): 1.704 Removed
	extra `$'.
	(function CygbuildIsMercurialPackage()): 1.704 New distributed
	revision control system.
	(function CygbuildIsBzrPackage()): 1.704 New distributed
	revision control system.
	(function CygbuildVersionControlType()): 1.704 Added new
	verion control system checks.
	(function CygbuildDefineGlobalMain()): 1.704
	New variables: $builddir_relative_vc_root, $builddir_vc_root.
	Changed $builddir_relative from .build/.build to .build/build
	(CygbuildCmdPkgSourceCvsdiff): 1.704 Moved checkout directory
	from ./build/.build/tmp/cvsout => ./build/vc
	(declare CYGBUILD_RETVAL): 1.704 Added quotes around variable.
	(function CygbuildFileCleanTemp()): 1.704 Corrected rm(1)
	command.
	(function CygbuildCmdPkgSourceCvsMain()): 1.704 Changed
	script name: PKG-source-install-N.N-1.sh
	=> PKG-N.N-1-source-install.sh
	(function CygbuildSourceDownloadScript()): 1.704 Use
	$SCRIPT_SOURCE_GET_BASE. Removed hard coded name.
	(function CygbuildCmdShadowDelete()): 1.704 Use
	$builddir_relative, removed hard coded test.

2005-09-03 Sat  Jari Aalto  <jari dot aalto A T cante dot net>

	* bin/cygbuild.sh (function CygbuildHelpShort()): 1.701
	Added note that --help requires full cygbuild suite.
	(Everywhere): Changed NN.NN => N.N version items.
	(top level::PATH): 1.704 Removed extra trailing '/'.
	(function CygbuildMakefileRunInstallPythonFix()): 1.704 Added
	new variable `root'. Makes code cleaner.
	(function CygbuildMakefileRunInstallPythonMain()): 1.704  Added
	new variable `root'. Makes code cleaner.
	(top level::export CYGBUILD_MANDIR_FULL): 1.704 Was `PREFIX'.
	Now it is namespace clean. Replaced all occurrances in other
	parts of the code.
	(top level::declare CYGBUILD_STATIC_VER_PACKAGE): 1.704 Renamed.
	Was `STATIC_VER_PACKAGE'. Replaced all other similart STATIC_VER_*
	packages. This makes them namespace clean.'
	(top level::declare -a CYGBUILD_STATIC_ABSOLUTE_SCRIPT_PATH):
	Ditto.
	(top level::declare -a CYGBUILD_STATIC_PERL_MODULE): 1.704 Ditto
	(top level::declare $CYGBUILD_RETVAL): 1.704 Ditto.

2005-09-02 Fri  Jari Aalto  <jari dot aalto A T cante dot net>

	* etc/template/Makefile.tmp (INSTALL_OBJSMAN1): 1.9 New.
	(MANDIR1): 1.9 Renamed. Was `MANDIR'

	* etc/makefile/net.mk (sf-upload-doc): Correctd
	target order from: doc sf-uload-no-root => sf-uload-no-root doc

	* etc/template/manualpage.pod.tmp (please see): 1.3 Added
	heading OPTIONS.

	* bin/cygbuild.pl (Help::LIBRARY USAGE): 1.197 Small fixes
	and reformatting of example code.
	(Help::MISCELLANEOUS::Cygwin postinstall script conventions): 1.197
	New topic.
	(Help::PACKAGE MAINTENANCE COMMANDS::Packaging commands::repackage-all):
	1.197 Corrected spelling mistakes.
	(Help::PACKAGE MAINTENANCE COMMANDS::Packaging commands::finish):
	1.197 Text updated. Command is not disabled any more.
	(Help::PACKAGE MAINTENANCE COMMANDS::Other commands::shadow):
	1.197 Added note that 'reshadow' is all that is needed.
	(Help::FILES): Clarified 'no user files should be placed...'.
	(Help::::Packages with no version number): Clarified package format
	from NN.NN => N[N.]+.
	(Help::DESCRIPTION::Packaging directly from version controll repositories):
	Rewrote.
	(Help::QUICK OVERVIEW): Added "The big picture" with ascii graphics.

	* bin/cygbuild.sh (function CygbuildGPGverify()): 1.695
	Fixed gpg --verify command's file names: *.sig..sig => *.sig
	(function CygbuildCmdPublishSignature()): 1.698 Fix echo
	messages that show if signature is valid or not and ready
	for publish.
	(function CygbuildDefineEnvClear()): 1.698 New.
	(function Main): 1.698 Call `CygbuildDefineEnvClear'
	(function CygbuildBashPatternListMatch()): 1.700 New.
	(function CygbuildInstallPackageDocs()): 1.700 Use `CygbuildBashPatternListMatch'
	(export CYGBUILD_MANDIR_FULL): 1.700 New variable.
	(function CygbuildCmdInstallCheckTempFiles()): 1.700 rewrote to use for-loop.

2005-09-01 Thu  Jari Aalto  <jari dot aalto A T cante dot net>

	* bin/cygbuild.pl (Help::PACKAGE MAINTENANCE COMMANDS::Packaging
	commands::publish): 1.197 Variable CYGBUILD_PUBLISH_BIN which can
	contain custom script takes now 3 arguments, instead of 1 (gpgp
	signer, gpg pass phrase added).

	* bin/cygbuild.sh (CYGBUILD_GPG_SIGN_EXT): New variable.
	(CygbuildSignCleanAllMaybe): Use CYGBUILD_GPG_SIGN_EXT.
	(CygbuildGPGverify): Use CYGBUILD_GPG_SIGN_EXT.
	(CygbuildGPGsignFiles): Use CYGBUILD_GPG_SIGN_EXT.
	(CygbuildGPGsignMain): Use CYGBUILD_GPG_SIGN_EXT.
	(CygbuildCmdGPGVerifyMain): Use CYGBUILD_GPG_SIGN_EXT.
	(CygbuildCmdPublishSignature): Use CYGBUILD_GPG_SIGN_EXT.
	(CygbuildCmdPkgBinaryStandard): Use CYGBUILD_GPG_SIGN_EXT.
	(CygbuildCmdPkgSourceStandard): Use CYGBUILD_GPG_SIGN_EXT.
	(CygbuildCmdMkpatchMain): Use CYGBUILD_GPG_SIGN_EXT.
	(function CygbuildCmdPublishMain()): 1.695
	Use $OPTION_SIGN and $OPTION_PASSPHRASE and send them
	to external script.
	(function CygbuildCmdPublishExternal()): 1.695 Added
	`signer' and `pass' variables.

2005-08-31  Jari Aalto  <jari dot aalto A T cante dot net>

	* bin/cygbuild.sh (CYGBUILD_CONFIGURE_OPTIONS): Chnaged
	--libexecdir=/usr/lib which is FHS compliant. Was /usr/sbin
	in Cygwin documentation.
	<http://cygwin.com/setup.html#package_contents>. See thread
	<http://cygwin.com/ml/cygwin-apps/2005-07/msg00020.html>.

	* index.html: Added note, that setup.py is supported. Added
	WARNING that the setup.exe download method is not up to date.

	* bin/cygbuild.pl: (Help::Top page): CASE A, B, C clarified and
	corrected.

2005-08-30  Jari Aalto   <jari dot aalto A T cante dot net>

	* bin/cygbuild.sh (CygbuildVerb): Check $1 before
	printing message.
	(CygbuildDefineGlobalCompile): Use `CygbuildVerb'.
	(cygbuild_opt_exclude_bin_files): Added *.pyc.
	(cygbuild_opt_exclude_version_control): Added distributed
	version control dirs: .bzr, .hg.
	(CygbuildDefineGlobalMain): New variables
	`builddir_relative_root', `builddir_root'.
	(CygbuildCmdMkpatchMain): Use `builddir_root'; the .build
	directory instead of .build/.build to make patches.
	(CygbuildFileCleanTemp): Removed '-r' from rm(1).

2005-08-30  Jari Aalto  <jari dot aalto A T cante dot net>

	* bin/cygbuild.sh: Don't clear CFLAGS, CXXCLAGS and LDFLAGS. They
	may be set in Makefile. Rewrote the code to define `flags' variable.

2005-08-29  Jari Aalto  <jari dot aalto A T cante dot net>

	* etc/template/setup.hint: Added new category 'Audio'.

2005-08-20  Jari Aalto  <jari dot aalto A T cante dot net>

	-- Fixed Python compilation errors (must ignore user's CFLAGS
	   settings)
	-- Overall: Python package detection and checks were improved

	* etc/template/install-after.sh.tmp: (Cmd): Typo '}}' => '}'.

	* bin/cygbuild.pl (CygcheckDependencies): Skip directories.
	Tightened /bin directory check so that bin/this.exe is
	accepted but not /bin/lib/some/here/this.py

	* bin/cygbuild.sh: (CygbuildRunShell): New.
	(CygbuildMakefileRunInstallPythonFix): Improved `mv' sequence.
	Added `bin/lib/python*' move.
	(CygbuildConfCC): Removed code and moved it to `CygbuildRunShell'.
	(CygbuildCmdBuildPython): Use CygbuildRunShell' so that CFLAGS and
	all are set properly.
	* bin/cygbuild.sh (CYGBUILD_SHADOW_TOPLEVEL_IGNORE): Renamed.
	Was `SHADOW_TOPLEVEL_IGNORE'.
	(CYGBUILD_MAN_SECTION_ADDITIONAL): Renamed.
	Was `MAN_SECTION_ADDITIONAL
	8top level): Renamed `opt_exclude_*' to `cgbuild_opt_exclude_*'
	(CYGBUILD_IGNORE_FILE_TYPE): New.
	(CygbuildFileTypeMain): Ignore compiled pythong files etc.
	Use `CYGBUILD_IGNORE_FILE_TYPE'.
	(CygbuildCmdInstallCheckManualPages):
	Use `CYGBUILD_IGNORE_FILE_TYPE'.
	(CygbuildCmdInstallCheckBinFiles): Ignore Python *site-packages*
	directory.
	(CygbuildFileIgnore): New.
	(CygbuildCmdInstallCheckBinFiles): Ignore site-packages (Python)
	install dir.
	(CygbuildCmdInstallCheckReadme): Fixed egrep regexp. Th \<
	is word boundary, not literal. Use [<] instead.

2005-08-07   Jari Aalto  <jari dot aalto A T cante dot net>

	* bin/cygbuild.sh: (CygbuildCmdShadowMain): Added text
	'(ignore errors; if any)' to cleaning so that user does not
	get upset on missing target messages like
	'make: *** No rule to make target clean'

2005-04-13  Jari Aalto  <jari dot aalto A T cante dot net>

	* etc/template/package.README: Added new topic
	'Version control repository:'

2005-04-09 Sat  Jari Aalto  <jari dot aalto A T cante dot net>

	* bin/cygbuild.sh
	(function CygbuildMakefileRunInstallPythonFix()): 1.682
	Fix /usr/share/lib to /usr/lib

2005-03-20 Sun  Jari Aalto  <jari dot aalto A T cante dot net>

	* bin/cygbuild.sh (opt_exclude_tmp_files): 1.681 Added
	DEADJOE file from joe(1) editor.

2005-03-08 Tue  Jari Aalto  <jari dot aalto A T cante dot net>

	* etc/template/Makefile.tmp (DEBUG): 1.7 Commented out -g

	* etc/template/configure.sh.tmp: 1.13 Removed bash. Now
	runs under /bin/sh.

	* bin/cygbuild.sh (set -x): 1.675 Did not
	install postinstall.sh for package. Fixed.

	* etc/template/postinstall.sh.tmp: 1.13 Added `sharedir'.

2005-03-03 Thu  Jari Aalto  <jari dot aalto A T cante dot net>

	* etc/template/package.README (Cygwin port): 1.14 Extra
	newline removed.

	* bin/cygbuild.sh (function CygbuildInstallExtraManual()): 1.675
	Added check for '[' in file name (expand problem fix in for-loop)

	* etc/template/install-after.sh.tmp: 1.8 Removed -z test.

2005-03-02 Wed  Jari Aalto  <jari dot aalto A T cante dot net>

	* bin/cygbuild.sh (function CygbuildTreeSymlinkCopy()): 1.675
	Use -q, removed /dev/null in egrep.
	(function CygbuildMakeRunInstallFixPerl()): 1.675
	Use -q, removed /dev/null in egrep.
	(function CygbuildCommandMain()): 1.675
	Use -q, removed /dev/null in egrep.
	(function CygbuildCmdInstallCheckReadme()): 1.675 Added quotes
	around $PKG check.

2005-03-01 Tue  Jari Aalto  <jari dot aalto A T cante dot net>

	* etc/template/Makefile.tmp ($(PACKAGE)): 1.7 Target fixed.
	added $<

2005-02-28 Mon  Jari Aalto  <jari dot aalto A T cante dot net>

	* etc/makefile/vars.mk (SHAREDIR): 1.17 New.

	* Makefile (install-etc-dir-template): 1.26 Clean template
	directory.
	(ETCDIR_TMPL): 1.26 Changed from /etc/cygbuild/template to
	/usr/share/cygbuild/template
	(ETCDIR_TMPL_USER): 1.26 New.
	(install-etc-dir-template): 1.26 Install ETCDIR_TMPL_USER.
	(install-etc-template): 1.26 Clean ETCDIR_TMPL before
	install.
	(install-etc-template-symlink): 1.26 Clean ETCDIR_TMPL before
	install.

	* bin/cygbuild.pl (HELP::OPTIONAL EXTERNAL FILES): 1.191
	Documented new file `configure.env.options'.
	(HELP::FILES): 1.191 Document /usr/share/cygbuild/template and
	/etc/cygbuild/template.
	(HELP::OPTIONAL EXTERNAL FILES): 1.194 Documented 'manualpage.pod'

	* etc/template/build.env.options: New.

	* bin/cygbuild.sh (function CygbuildConfCC()): 1.672 Missing
	backslash Added.
	(function CygbuildDefineGlobalMain()): 1.672 New variable
	$EXTRA_BUILD_ENV_OPTIONS
	(function CygbuildCmdBuildMainMakefile()): 1.672 Source
	$EXTRA_BUILD_ENV_OPTIONS.
	(function CygbuildDefineGlobalMain()): 1.672 New variable
	$EXTRA_CONF_ENV_OPTIONS.
	(function CygbuildConfCC()): 1.672 use $EXTRA_CONF_ENV_OPTIONS
	(CYGBUILD_TEMPLATE_DIR_USER): 1.672 New.
	(CYGBUILD_TEMPLATE_DIR_MAIN): Renamed. Was
	$CYGBUILD_TEMPLATE_DIR. Changed from /etc/cygbuild/template
	to /use/share/cygbuild/template
	(function CygbuildCmdFilesMain()): 1.672 Use
	$CYGBUILD_TEMPLATE_DIR_USER
	(function CygbuildCmdFilesWrite()): 1.672 Changed call args.
	Now `to' is first and $* can have any directories.
	(function CygbuildFileExists()): 1.672 New.
	(function CygbuildCmdFilesWrite()): 1.672 Rewritten.
	Use `CygbuildFileExists' and accept $* args.
	(function CygbuildCmdFilesWrite()): 1.675 Incorrect test '='
	changed to '=='. Didn't copy package.README correctly.

2005-02-27 Sun  Jari Aalto  <jari dot aalto A T cante dot net>

	* etc/template/compiler.sh.tmp: New.

	* bin/cygbuild.sh (function CygbuildDefineGlobalMain()): 1.671
	set PATH to cinlude CYGWIN-PATCHES/ directory.
	(function CygbuildChmodExec()): 1.671 Rewote. Instead of one
	call arg, accept $*.

2005-02-16 Wed  Jari Aalto  <jari dot aalto A T cante dot net>

	* etc/template/install.env.options.tmp: 1.2 Streamlined.

	* etc/template/Makefile.PL.tmp (ExtUtils::MakeMaker;):
	New layout.

2005-02-09 Wed  Jari Aalto  <jari dot aalto A T cante dot net>

	* bin/cygbuild.sh (function CygbuildTreeSymlinkCopy()): 1.668
	Exit if `lndir' cannot be found. Removed cide to
	support 'cp -lr', which will not work.

2005-02-02 Wed  Jari  <jari dot aalto A T cante dot net>

	* bin/cygbuild.sh (function CygbuildCmdBuildMainMakefile()): 1.666
	CFLAGS, CXXFLAGS, LDFLAGS handfling was wrong. Corrected.

2005-02-01 Tue  Jari  <jari dot aalto A T cante dot net>

	* etc/template/Makefile.tmp (INSTALL): 1.5 Use $(PACKAGE)
	instead of 'foo'.

	* bin/cygbuild.sh (function CygbuildInstallCygwinPartMain()): 1.666
	Renamed. Was `CygbuildInstallCygwinPart'. Moved postinstall code
	to separate function.
	(function CygbuildInstallCygwinPartPostinstall()): 1.666 New.
	(function CygbuildMakefileRunInstall()): 1.666 Call
	`CygbuildInstallCygwinPartPostinstall' during Perl install.
	(function CygbuildPostinstallWrite()): 1.666 Do not display the
	postinstall-sh script any more.
	(function CygbuildChmodExec()): 1.666 Renamed. Was `ChmodExec'
	(function CygbuildRun()): 1.666 Renamed. Was `Run'
	(function CygbuildExitNoFile()): 1.666 Renamed. Was `ExitNoFile'
	(function CygbuildExitNoDir()): 1.666 Renamed. Was `ExitNoDir'
	(function CygbuildWarn ()): 1.666 Renamed. Was `Warn'
	(function CygbuildVerbWarn()): 1.666 Renamed. Was `VerbWarn'
	(function CygbuildVerb()): 1.666 Renamed. Was `Verb'
	(function CygbuildGrepCheck()): 1.666 New.
	(function MakefileUsesLibtoolCompile ()): 1.666 Use
	`CygbuildGrepCheck'
	(function MakefileUsesLibtoolMain ()): 1.666 Use
	`CygbuildGrepCheck'
	(function MakefileUsesRedirect()): 1.666 Use
	`CygbuildGrepCheck'
	(function CygbuildIsMakefileTarget()): 1.666 Use
	`CygbuildGrepCheck'
	(function CygbuildIsMakefileCplusplus ()): 1.666  Use
	`CygbuildGrepCheck'
	(function CygbuildIsX11Package()): 1.666 Use
	`CygbuildGrepCheck'
	(function CygbuildIsX11appDefaults()): 1.666 Use
	`CygbuildGrepCheck'
	(function CygbuildCmdInstallCheckPerlFile ()): 1.666 Use
	`CygbuildGrepCheck'
	(function CygbuildGPGverify()): 1.666 Use
	`CygbuildGrepCheck'

	* etc/template/Makefile.PL.tmp (AUTHOR): Use <> not () for email.

2005-01-29 Sat  Jari  <jari dot aalto A T cante dot net>

	* bin/cygbuild.sh (function CygbuildInstallExtraManual()): 1.662
	Added support to copy user supplied RAW manual pages. Those
	that the original package did not supply but which are available
	e.g. in another distribution. (Drop *.1 to CYGWIN_PATCHES/ and
	they will be copied correctly)

2005-01-28 Fri  Jari  <jari dot aalto A T cante dot net>

	* bin/cygbuild.sh (function CygbuildIsMakefileCplusplus ()): 1.662
	Incorrect regexp 'g++' => 'g[+][+]'.

	* etc/template/build.options.tmp: 1.2 Added CYGBUILD_CC
	and CYGBUILD_CXX

2005-01-27 Thu  Jari  <jari dot aalto A T cante dot net>

	* bin/cygbuild.sh (function CygbuildCommandMain()): 1.662
	Rename --DEBUG to --Debug. Added 'unset' to all OPTION_*
	variables.
	(function CygbuildConfCC()): 1.662 Added OPTION_DEBUG support.
	Now ./configure can be traced with 'cygbuild.sh -d 2 configure'.

2005-01-22 Sat  Jari  <jari dot aalto A T cante dot net>

	* Makefile (OBJS_ETC_TMPL): 1.24 '#' => '\#' in find.
	(OBJS_ETC_MAIN): 1.24 '#' => '\#' in find.

	* bin/cygbuild.pl (CygcheckDependencies): 1.187 Added \Q .. \E
	to correct regexp matching with $pwd.

	* etc/template/Makefile.PL.tmp: New template

	* bin/cygbuild.sh (function CygbuildInstallExtraManual()): 1.658
	Added X11 manual page support. Removed second for-loop.
	(function CygbuildInstallExtraManualCompress()): 1.658 Use [[ ]]
	test with DIR_DOC_GENERAL. Removed *.[1-9] search criteria
	from find(1). Compress all files found (like *.1x)
	(MAN_SECTION_ADDITIONAL): New.
	(CygbuildIsMakefileCplusplus): New.
	(CygbuildDefineGlobalCompile: Check g++ for ccache

2005-01-21 Fri  Jari  <jari dot aalto A T cante dot net>

	* bin/cygbuild.sh (function CygbuildCmdInstallCheckDirStructure()):
	1.658. Added usr/X11R6/bin check. Rewrote logic by using
	for-loop.

	* etc/template/install-after.sh.tmp (Main()): 1.6 Added sed command
	to delete trailing slash from $root.

2005-01-19 Wed  Jari  <jari dot aalto A T cante dot net>

	* bin/cygbuild.sh (function CygbuildTreeSymlinkCopy()): 1.655 Use
	[[ ]] test
	(function CygbuildDefineGlobalMain()): 1.655 Use [[ ]] test
	(function CygbuildNoticeMaybe()): 1.655 Use [[ ]] test
	(function CygbuildCmdReadmeFix()): 1.655 Use [[ ]] test
	(function CygbuildCmdPublishSignature()): 1.655 Use [[ ]] test
	(function CygbuildCmdPkgDevelStandard()): 1.655 Added quotes around
	$files.
	(function CygbuildDebianRules2Makefile()): 1.655 Use [[ ]] test
	(function CygbuildExtractTar()): 1.655 Use [[ ]] test
	(function CygbuildPatchCheck()): 1.655 Use [[ ]] test
	(function CygbuildCmdInstallCheckInfoFiles()): 1.656 Use [[ ]] test
	(function CygbuildCmdInstallCheckBinFiles()): 1.656 Added quotes around
	$installed.
	(function CygbuildCmdFilesWrite()): 1.656 Use [[ ]] tests
	(function CygbuildCmdFilesMain()): 1.656 Use [[ ]] test
	(function CygbuildFileExists()): 1.656 Removed. Replaced with
	[[ ]] tests.
	(function CygbuildIsX11Package()): 1.656 Removed CygbuildFileExists.
	(function CygbuildIsX11appDefaults()): 1.656 Removed
	CygbuildFileExists.
	(function CygbuildFileReadOptionsMaybe()): 1.656 Removed
	CygbuildFileExists.
	(function CygbuildDefineGlobalSrcOrig()): 1.656 Removed
	CygbuildFileExists.
	(function CygbuildCmdPkgDevelMain()): 1.656 Removed
	CygbuildFileExists.
	(function CygbuildCmdPkgBinaryMain()): 1.656 Removed
	CygbuildFileExists.
	(function CygbuildCmdPkgSourceStandard()): 1.656 Removed
	CygbuildFileExists.
	(function CygbuildCmdPkgSourceCvsdiff()): 1.656 Removed
	CygbuildFileExists
	(function CygbuildCmdPkgSourceMain()): 1.656 Removed
	CygbuildFileExists
	(function CygbuildPostinstallWrite()): 1.656 Removed
	CygbuildFileExists
	(function CygbuildPreRemoveWrite()): 1.656 Removed
	CygbuildFileExists
	(function CygbuildMakefileRunInstall()): 1.656 Removed
	CygbuildFileExists
	(function CygbuildPatchCheck()): 1.656 Removed
	CygbuildFileExists
	(function CygbuildPatchApply()): 1.656 Removed
	CygbuildFileExists
	(function CygbuildCmdMkpatchMain()): 1.656 Removed
	CygbuildFileExists
	(function CygbuildCmdPrepMain()): 1.656 Removed
	CygbuildFileExists
	(function CygbuildConfCC()): 1.656 Removed
	CygbuildFileExists
	(function CygbuildCmdConfMain()): 1.656 Removed
	CygbuildFileExists
	(function CygbuildCmdBuildMain()): 1.656 Removed
	CygbuildFileExists
	(function CygbuildInstallCygwinPart()): 1.656 Removed
	CygbuildFileExists
	(function CygbuildCmdInstallMain()): 1.656 Removed
	CygbuildFileExists
	(function CygbuildCmdPostInstallMain()): 1.656 Removed
	CygbuildFileExists
	(function CygbuildFileExists()): 1.656 Removed.
	(function CygbuildTemplatePath()): 1.656 Removed
	CygbuildDirExists
	(function CygbuildCmdMkpatchMain()): 1.656 Removed
	CygbuildDirExists
	(function CygbuildCmdPrepIsUnpacked()): 1.656 Removed
	CygbuildDirExists
	(function CygbuildCmdShadowDelete()): 1.656 Removed
	CygbuildDirExists
	(function ExitNoDir()): 1.656 Removed
	CygbuildDirExists
	(function CygbuildDirExists()): 1.656 Removed.

2005-01-17 Mon  Jari  <jari dot aalto A T cante dot net>

	* bin/cygbuild.sh (function CygbuildConfCC()): 1.655
	(function CygbuildDefineGlobalCompile()): 1.655 Emptied
	CYGBUILD_CFLAGS and CYGBUILD_CXXFLAGS
	(function CygbuildCmdBuildMainMakefile()): 1.655 Removed
	CFLAGS, CXXFLAGS, LDFLAGS from make(1)line and moved them before it.
	This will just clear the flags if they are empty,
	but allow Makefile to use defaults.
	(function CygbuildInstallExtraManual()): 1.655 Changed use
	message from 'mansect' to 'mandest'

2005-01-13 Thu  Jari  <jari dot aalto A T cante dot net>

	* bin/cygbuild.sh (function CygbuildPostinstallWrite()): 1.650
	Call `ChmodExec' after postinstall write.
	(function CygbuildCmdInstallCheckTempFiles()): 1.650
	Added `-s' file size test.
	(function CygbuildPathAbsoluteSearch()): 1.650
	Added `-s' file size test.
	(function CygbuildTarDirectory()): 1.652 Added `-s' file size test.
	(function CygbuildFileTypeByFile()): 1.652 Added `-s' file size test.
	(function CygbuildFileTypeByFile()): 1.652 Added `-s' file size test.
	(function CygbuildTreeSymlinkCopy()): 1.652 Added `-s' file size test.
	(function CygbuildDefineGlobalCommands()): 1.652
	Added `-s' file size test.
	(function CygbuildHelpLong()): 1.652 Added `-s' file size test.
	(function CygbuildGPGsignMain()): 1.652 Added `-s' file size test.
	(function CygbuildCmdReadmeFix()): 1.652 Added `-s' file size test.
	(function CygbuildCmdPkgSourceCvsdiff()): 1.652
	Added `-s' file size test.
	(function CygbuildCmdPkgSourceMain()): 1.652
	Added `-s' file size test.
	(function CygbuildExtractTar()): 1.652 Added `-s' file size test.
	(function CygbuildPatchCheck()): 1.652 Added `-s' file size test.
	(function CygbuildPatchCheck()): 1.652 Added `-s' file size test.
	(function CygbuildCmdMkpatchMain()): 1.652 Added `-s' file size test.
	(function CygbuildCmdDependMain()): 1.652 Added `-s' file size test.
	(function CygbuildInstallPackageDocs()): 1.652
	Added `-s' file size test.
	(function CygbuildCmdInstallCheckInfoFiles()): 1.652
	Added `-s' file size test.
	(function CygbuildCmdInstallCheckReadme()): 1.652
	Added `-s' file size test.
	(function CygbuildCmdInstallCheckReadme()): 1.652
	Added `-s' file size test.
	(function CygbuildCmdInstallCheckReadme()): 1.652
	Added `-s' file size test.
	(function CygbuildCmdInstallCheckBinFiles()): 1.652
	Added `-s' file size test.
	(function CygbuildCmdInstallCheckBinFiles()): 1.652
	Added `-s' file size test.
	(function CygbuildCmdStripMain()): 1.652
	Added `-s' file size test.
	(function CygbuildStripCheck()): 1.652
	Added `-s' file size test.
	(function CygbuildStripCheck()): 1.652
	Added `-s' file size test. simplified logic. Removed find(1)
	for *.sh.
	(function CygbuildCmdFilesMain()): 1.652
	Added `-s' file size test.
	(function CygbuildFileReleaseGuess()): 1.652
	Added `-s' file size test.
	(function CygbuildCommandMain()): 1.652
	Added `-s' file size test.
	(function CygbuildCmdInstallCheckPerlFile ()): 1.652 Added
	POD check.
	(function CygbuildCmdInstallCheckPerlFile ()): 1.654 Added
	missign 'fi'
	(function CygbuildPostinstallWrite()): 1.654 Removed display
	the script if itpostinstall already existed.

2005-01-12 Wed  Jari  <jari dot aalto A T cante dot net>

	* bin/cygbuild.sh (CygbuildMakeRunInstallFixPerl9: 1.650
	Corrected postinstall write command.
	(Locale::gettext>): 1.650 Added /dev/null to awk call to
	prevent it hanging on empty argument.

2005-01-08 Sat  Jari  <jari dot aalto A T cante dot net>

	* bin/cygbuild.sh (function CygbuildCmdDependMain()): 1.643
	Serious problems corrected.

2005-01-07 Fri  Jari  <jari dot aalto A T cante dot net>

	* etc/template/diff.options.tmp: 1.1 Added examples of
	-x cygbuild-ignore-autochecks and
	-x cygbuild-ignore-all-defaults

	* bin/cygbuild.pl (control repository.): 1.184 Documented new
	option -c|--checkout

	* etc/template/install.tar.options.tmp: 1.1 Changed -x to
	--exclude=

	* bin/cygbuild.sh (http:://wwww.fprot.org/): 1.639 Added
	trailing slash to $dir to fix symlinked source directories.
	(function CygbuildFileReadOptionsFromFile()): 1.639 Renamed. Was
	`FileReadOptions'
	(function CygbuildCmdMkpatchMain()): 1.639 Removed subshell
	from call to CygbuildFileReadOptionsMaybe()
	(function CygbuildConfCC()): 1.639 Removed subshell
	from call to CygbuildFileReadOptionsMaybe()
	(function CygbuildInstallPackageDocs()): 1.639 Removed subshell
	from call to CygbuildFileReadOptionsMaybe()
	(function CygbuildInstallTaropt2match ()): 1.639 New.
	(function CygbuildDetermineReadmeFile()): 1.641 Changed return
	value.
	(function CygbuildCmdReadmeFix()): 1.641 Removed subshell
	call from `CygbuildDetermineReadmeFile'.
	(function CygbuildInstallCygwinPart()): 1.641 Removed subshell
	call from `CygbuildDetermineReadmeFile'.
	(function CygbuildPathAbsoluteSearch()): 1.641  Removed subshell
	call from `which', `chase', `readlink'.
	(function CygbuildPathAbsolute()): 1.641 Wrong command
	`de' => cd
	(function CygbuildCommandPath()): 1.641 Removed subshell
	call from `CygbuildPathAbsolute'
	(function CygbuildPathAbsolute()): 1.641 Changed return values.
	(function CygbuildCommandPath()): 1.641  Changed return values.
	(function CygbuildHelpLong()): 1.641 Rewrote without subshell
	calls. Changed return values.
	(function CygbuildHelpSourcePackage()): 1.641 Rewrote without
	subshell calls. Added return value.
	(function CygbuildPerlModuleLocation()): 1.641 Rewrote without
	subshell calls. Added return value.
	(function CygbuildScriptPathAbsolute()): 1.641 Rewrote without
	subshell calls. Added return value.
	(function CygbuildTarDirectory()): 1.641 Rewrote without
	subshell calls.
	(function CygbuildFileTypeByFile()): 1.641 Rewrote without
	subshell calls.
	(function CygbuildTreeSymlinkCopy()): 1.641 Rewrote without
	subshell calls.
	(function CygbuildPathBinFast()): 1.641 Improved function.
	(function CygbuildDefineGlobalCommands()): 1.641 Rewrote without
	subshell calls.
	(function CygbuildGPGsignFiles()): 1.641 Rewrote without
	subshell calls.
	(function CygbuildCmdGPGVerifyMain()): 1.641 Rewrote without
	subshell calls.
	(function CygbuildCmdPkgDevelStandard()): 1.641 Rewrote without
	subshell calls.
	(function CygbuildCmdPkgSourceCVSdiff()): 1.641 Removed subshell
	call from Perl.
	(function CygbuildCmdDependMain()): 1.641 Rewrote without
	subshell calls.
	(function CygbuildCmdInstallCheckInfoFiles()): 1.641 Removed subshell
	call from Perl.
	(function CygbuildPatchCheck()): 1.641 Rewrote without
	subshell calls.
	(function CygbuildCmdInstallCheckBinFiles()): 1.641 Removed $FILE,
	already defined as global variable.
	(function CygbuildCmdInstallCheckBinFiles()): 1.641 Rewrote without
	subshell calls.
	(function CygbuildCmdStripMain()): 1.641 Rewrote without
	subshell calls.
	(function CygbuildStripCheck()): 1.641 Rewrote without
	subshell calls.
	(function CygbuildCommandPath()): 1.641 Rewrote without
	subshell calls.
	(function CygbuildTemplatePath()): 1.641 Logic rewritten. Now
	return 1 on error.
	(function CygbuildCmdFilesMain()): 1.641 Rewrote without
	subshell calls.
	(function CygbuildFileReleaseGuess()): 1.641 Rewrote without
	subshell calls.
	(function CygbuildSourceDownloadScript()): 1.641 Rewrote without
	subshell calls.
	(function CygbuildExtractMain()): 1.641 Rearranged.
	(function CygbuildGetOneDir()): 1.641 Rewrote without
	subshell calls. Logic rewritten.
	(function CygbuildFileConvertToUnix()): 1.641 Rewrote without
	subshell calls.
	(function CygbuildCygDirCheck()): 1.641  Rewrote without
	subshell calls.
	(function CygbuildSignCleanAllMaybe()): 1.641 Rewrote without
	subshell calls.
	(function CygbuildTarOptionCompress()): 1.641 Return 1 on error.
	(function CygbuildCmdInstallCheckPerlFile ()): 1.641 Rewrote without
	subshell calls.
	(function CygbuildCmdInstallCheckTempFiles()): 1.641 Rewrote without
	subshell calls.
	(function CygbuildCmdInstallCheckReadme()): 1.641  Rewrote without
	subshell calls.
	(function CygbuildCommandMain()): 1.641 Removed subshell call from
	`getopt'.
	(function CygbuildDetermineDocDir()): 1.641 Removed subshell call from
	for-loop.
	(function CygbuildTreeSymlinkCopy()): 1.642 Removed subshell call from
	for-loop.
	(function CygbuildGPGsignMain()): 1.642 Rewrote without
	subshell calls.
	(function CygbuildMakeRunInstallFixPerl()): 1.642 Removed subshell
	call from for-loop.
	(function CygbuildMakefileRunInstallFixInfo()): 1.642 Removed subshell
	call from for-loop.
	(function CygbuildPatchFindGeneratedFiles()): 1.642 Removed subshell
	call from for-loop.
	(function CygbuildCmdCleanMain()): 1.642  Removed subshell
	call from for-loop.
	(function CygbuildInstallPackageInfo()): 1.642 Removed subshell
	call from for-loop.
	(function CygbuildInstallPackageDocs()): 1.642
	(function CygbuildInstallExtraManualCompress()): 1.642  Removed
	subshell calls from for-loops.
	(function CygbuildCmdInstallCheckShellFiles ()): 1.642 Removed
	subshell call from for-loop.
	(function CygbuildCmdInstallCheckManualPages()): 1.642 Removed
	subshell call from for-loop.
	(function CygbuildCmdInstallCheckDocPages()): 1.642  Removed
	subshell call from for-loop.
	(function CygbuildCmdInstallCheckBinFiles()): 1.642 Removed
	subshell call from for-loop.
	(function CygbuildExtractTar()): 1.642 Removed
	subshell call from 'tr' commands.
	(function CygbuildFileReleaseGuess()): 1.642 Return 1 on error.
	(function CygbuildCmdInstallCheckPerlFile ()): 1.643 Incorrect
	stderr redirection in perl call. Fixed.
	(CygbuildCmdInstallCheckManualPages): 1.643 compressed manual
	pages can also be in *.bz2 format. Added support.
	(function CygbuildCmdInstallCheckManualPages()): 1.643
	Improved checking.
	(function CygbuildCmdPkgSourceMain()): 1.643 Check CVS/Root
	not, just existence of CVS/
	(function CygbuildIsCVSPackage()): 1.643 New.
	(function CygbuildAskYes()): 1.643 New.
	(function CygbuildCmdGPGVerifyMain()): 1.643 Use `CygbuildAskYes'
	(function CygbuildCmdPkgSourceMain()): 1.643 Ask explicitly
	CVS packaging.
	(function CygbuildCommandMain()): 1.643 Added missing long option
	--sign to `getopt'. Added new option -c|--checkout and variable
	$OPTION_VC_PACKAGE
	(function CygbuildCmdPkgSourceMain()): 1.643 use $OPTION_VC_PACKAGE.
	(function CygbuildCmdPkgSourceCvsMain()): 1.643 Renamed. Was
	`CygbuildCmdPkgSourceCvs'
	(function CygbuildVersionControlType()): 1.643 New.
	(function CygbuildIsSvnPackage()): 1.643 New.

2005-01-06 Thu  Jari  <jari dot aalto A T cante dot net>

	* etc/etc/programs.conf: 1.5 Added $FILE and $PYTHON.

	* etc/template/Makefile.tmp (MANDIR5): New.
	(MANDIR8): New.
	(SBINDIR): 1.3 New.
	(ETCDIR): 1.3 New.
	(install-etc): 1.3 New.
	(PACKAGE): 1.3 New.

	* bin/cygbuild.sh (function CygbuildCmdReadmeFix()): 1.627 Use $retval,
	not subshell to call `CygbuildDetermineReadmeFile'. Remove *.bak
	file.
	(function CygbuildCommandMain()): 1.627 Added option -e|--email for
	readmefix command to set 'maintained by'.
	(function CygbuildDefineGlobalCompile()): 1.627 Added better ccache
	message.
	(function CygbuildStrPackage()): 1.627 Added PANIC.
	(function CygbuildDefineGlobalMain()): 1.627 convert $pkgname
	to lowercase before assigning it to $PKG
	(function CygbuildCmdInstallCheckPerlFile ()): 1.627 Added Perl
	-cw syntax checks.
	(function CygbuildCmdInstallCheckMain()): 1.627 Call
	`CygbuildCmdInstallCheckPerlFile'.
	(function CygbuildCmdInstallCheckPerlFile ()): 1.632 Added bang-slash
	#! fixing/adding.
	(function Run()): 1.632 New.
	(function CygbuildDefineGlobalCommands()): 1.632 Added $FILE.
	(function CygbuildFileTypeMain()): 1.632 New.
	(function CygbuildFileTypeExtension()): 1.632 New.
	(function CygbuildFileTypeByFile()): 1.632 New.
	(set -x): 1.632 New.
	(function CygbuildFileTypeByFile()): 1.632 Corrected file(1)
	output detection.
	(function CygbuildCmdInstallCheckPythonFile ()): 1.632 New.
	(function CygbuildCmdInstallCheckShellFiles ()): 1.632 Call
	`CygbuildCmdInstallCheckPythonFile'
	(function CygbuildDefineGlobalCommands()): 1.632 Added $PYTHON
	(function CygbuildMakefileRunInstallPythonMain()): 1.632 Use
	$PYTHON
	(function CygbuildMakefileRunCleanPythonMain()): 1.632 Use
	$PYTHON
	(function CygbuildCmdBuildPython()): 1.632 Use
	$PYTHON
	(function CygbuildCmdConfMain()): 1.639 Added Automake support
	(function CygbuildCmdConfAutomake()): 1.639 New.

	* bin/cygbuild.pl (sub ReadmeFix): 1.184 Added check for missing
	NAME or EMAIL addresses.
	(top level): 1.184 Added $EMAIL to 'use Env'. Added $systemName,
	$systemEmail.
	(HElP::OPTIONS): 1.184 Documented --email option.
	(HELP::ENVIRONMENT): Added reference to option --email.

2005-01-03 Mon  Jari  <jari dot aalto A T cante dot net>

	* bin/cygbuild.sh
	(top level::CYGBUILD_MATCH_FILE_EXE): Incorrect match
	?() => +()
	(function CygbuildConfCC()): 1.627 Incorrect match
	?() => +()

2004-12-31 Fri  Jari  <jari dot aalto A T cante dot net>

	* bin/cygbuild.sh
	- If ccache is available, use it for faster compilation.
	- Make sure all external files are executable before running them,
	   otherwise dies on error 'Permission denied'.
	(function ChmodExec()): 1.612 New.
	(function CygbuildCmdPublishExternal()): 1.612 Use ChmodExec
	(function CygbuildCmdPkgExternal()): 1.612 Use ChmodExec
	(function CygbuildCmdPkgSourceExternal ()): 1.612 Use ChmodExec
	(function CygbuildExtractWithScript()): 1.612 Use ChmodExec
	(function CygbuildCmdMkpatchMain()): 1.612 Use ChmodExec
	(function CygbuildCmdConfMain()): 1.612 Use ChmodExec
	(function CygbuildCmdPrepMain()): 1.612 Use ChmodExec
	(function CygbuildCmdInstallMain()): 1.612 Use ChmodExec
	(function CygbuildDefineGlobalMain()): 1.614 Do not override
	user's CYGBUILD_CC and CYGBUILD_CXX settings.
	(function CygbuildDefineGlobalCompile()): 1.615 New. Do not
	use cache with libtool packages.
	(function MakefileUsesLibtool ()): 1.615 Code simplified.
	(function CygbuildDefineGlobalCompile()): 1.616 Better messages
	about 'ccache'
	(function CygbuildDefineGlobalCompile()): 1.617 Set
	CYGBUILD_LDFLAGS to -no-undefined for libtool makefiles.
	(function CygbuildConfCC()): 1.617 Added CXX.
	(function MakefileUsesLibtool ()): 1.618 Added more matches
	to regexp: (install|compile|link)
	(function MakefileUsesLibtoolCompile ()): 1.620 New.
	(function MakefileUsesLibtoolMain ()): 1.620 Renamed.
	Was MakefileUsesLibtool()
	(function CygbuildDefineGlobalCompile()): 1.620 Print message
	about ccache to user if --mode=compile was found from
	libtool enabled Makefile
	(function CygbuildDefineGlobalCompile()): 1.621 Missing quote
	added to Verb() call.
	(function MakefileUsesLibtoolCompile ()): 1.622 Added -e option
	to egrep.
	(function MakefileUsesLibtoolCompile ()): 1.622 Added -e option
	to egrep.
	(function CygbuildDefineGlobalCompile()): 1.626 More ccache
	adjustments.

2004-12-30 Thu  Jari  <jari dot aalto A T cante dot net>

	* Makefile (install-etc-main-symlink): 1.23 Corrected Rule
	description.
	(OBJS_ETC_MAIN): 1.23 Exclude temporary files.
	(OBJS_ETC_TMPL): 1.23 Exclude temporary files.

	* etc/etc/programs.conf: 1.4 Added TR.

	* bin/cygbuild.sh
	- Serious problems with shouce packaging scripts. The apply patch
	  did not include the default options, so patch failed.
	- New variable $CYGBUILD_CC
	(function CygbuildCommandMain()): 1.583
	Call to CygbuildStrRelease() was wrong if release was already found.
	New variable srcGuess, use it.
	Added [ ! "$release" ] check.
	(function CygbuildFilePackageGuessMain()): 1.583 Return new
	variable $srcdir if this is unpack script foo-2.1-1.sh
	(Call syntax:): 1.583 Changed `cat' to `echo'. Wording changes.
	(function CygbuildIsVersionMatch()): 1.583 Renamed.
	Was `CygbuildCygbuildIsVersionMatch
	(function CygbuildIsArchiveScript()): 1.583 New.
	(function CygbuildIsReleaseMatch()): 1.583 New.
	(function CygbuildPatchApply()): 1.583 Typo:
	CYGBUILD_PATCHOPT => CYGBUILD_PATCH_OPT
	(function CygbuildDefineGlobalCommands()): 1.583 Added TR.
	(function CygbuildFileReleaseGuess()): 1.583 Use $TR.
	(function CygbuildExtractTar()): 1.583 Use $TR.
	(function CygbuildExtractTar()): 1.583 Added check for previous
	unpack dir.
	(function CygbuildCmdFinishMain()): 1.612 Removed $(pwd) from
	message.
	(function CygbuildDefineGlobalMain()): 1.612 Added ccache cupport
	(function CygbuildCmdBuildMainMakefile()): 1.612 Set CC to
	$CYGBUILD_CC
	(function Verb ()): 1.612 New.
	(function VerbWarn ()): 1.612 New.

2004-12-29 Wed  Jari  <jari dot aalto A T cante dot net>

	* bin/cygbuild.sh
	- Serious bug fixed: When making the source package with foo-2.2-1.sh
	script, it did not find original archive file.
	(function CygbuildPatchCheck()): 1.583 Typo:
	WArn => Warn.
	(opt_ignore_version_control): New. Skip RCS/CVS keywords.
	(CYGBUILD_DIFF_OPTIONS): 1.583 Added $opt_ignore_version_control.
	(CYGBUILD_CVSDIFF_OPTIONS): 1.583 Added $opt_ignore_version_control.
	(function CygbuildCmdDistcleanMain): 1.583 Added arg $2 ($opt).
	Do not display message.
	(function CygbuildCmdCleanMain()): 1.583 Added arg $2 ($opt).
	Do not display message.
	(function CygbuildCmdMkpatchMain()): 1.583 Send 'nomsg' option
	to CygbuildCmdCleanMain() and CygbuildCmdDistcleanMain().
	(function CygbuildFilePackageGuessArchive ()): 1.583 New. Use AWK.
	(function CygbuildFilePackageGuessMain()): 1.583 Removed
	multiple grep commands and used CygbuildFilePackageGuessArchive()

2004-12-28 Tue  Jari  <jari dot aalto A T cante dot net>

	* bin/cygbuild.sh (function CygbuildIsAutoconfPackage()): 1.583 New.
	(function CygbuildIsAutotoolPackage()): 1.583 New.
	(function CygbuildMakefileRunInstall()): 1.583 Suppose all
	CygbuildIsAutotoolPackage() packages support DESTDIR.
	(function CygbuildCmdInstallCheckDirStructure()): 1.583 Incorrect
	variable $dir2 => $dir3 in test.
	(function CygbuildCmdBuildMainMakefile()): 1.583 Moved CFALGS etc.
	after make(1) call, not before.

	* bin/cygbuild.pl (sub MakefileDestdirSupport): 1.178 Search
	configure, configure.in as well.

2004-12-27 Mon  Jari  <jari dot aalto A T cante dot net>

	* bin/cygbuild.pl (top-levele): 1.178 Moved $debug to
	global variables; not my() any more. Removed extra 'Pod::Text'.
	(PackageCVScoScript): Quoted '$*' in shell script. Fixes error
	'Use of $* is deprecated at cygbuild.pl line 3239.'.
	Added global definitions for
	$File::Find::name and $File::Find::fullname
	(CygcheckDepsNeeded): Fixed error 'Useless use of lc in void
	context at cygbuild.pl line 2701'.

2004-12-24 Fri  Jari  <jari dot aalto A T cante dot net>

	* etc/template/configure.sh.tmp (function Bootstrap()): 1.12 Added
	configure.in

	* bin/cygbuild.sh (function CygbuildIsAutomakePackage()): 1.583 Added
	makefile.in
	(function CygbuildMakefileRunInstall()): 1.583 Corrected $makeScript,
	which was $SCRIPT_TEMPLATE_INSTALL_AFTER but should have been
	$SCRIPT_TEMPLATE_INSTALL_MAKE
	(function CygbuildMakefileRunInstall()): 1.583 Added Python support.
	(function CygbuildMakefileRunInstallPython()): 1.583 New.
	(function CygbuildCmdCleanMain()): 1.583 Added Python support.
	(function CygbuildCmdDistcleanMain): 1.583 Added Python support.

2004-12-23 Thu  Jari  <jari dot aalto A T cante dot net>

	* bin/cygbuild.sh (CygbuildDefineGlobalMain): 1.583 All
	input variables now include prefix 'arg'
	(function CygbuildSrcDirLocation()): 1.583 Added support for Debian
	*.orig/ archive packaging structure.
	(function CygbuildCmdMkpatchMain()): 1.583 Added missing backslash from
	'making patch failed ...'

2004-12-21 Tue  Jari  <jari dot aalto A T cante dot net>

	* etc/template/build.options.tmp: 1.1 Added `CYGBUILD_CXXFLAGS'.

	* bin/cygbuild.sh (function CygbuildFilePackageGuessMain()):
	1.583 Added 'DESCRIPTION' at the beginning of function.
	(function CygbuildCmdBuildMainMakefile()): 1.583 Added
	`CYGBUILD_CXXFLAGS'.
	(function CygbuildDefineGlobalMain()): 1.583 Added
	`CYGBUILD_CXXFLAGS'.

	* bin/cygbuild.pl (HELP::BUGS): 1.178 Added heading
	'Other archive formats like *.zip are not recognized'.

2004-12-18 Sat  Jari  <jari dot aalto A T cante dot net>

	* etc/template/install.tar.options.tmp: New.

	* etc/template/install.env.options.tmp: New.

	* bin/cygbuild.pl
	(OPTIONAL EXTERNAL FILES::install.tar.options): 1.178 file
	renamed. Was `install.options'.

	* bin/cygbuild.sh (function CygbuildCommandMain()): 1.582
	Removed message: 'Wait, checking environment'.
	(function CygbuildCmdInstallCheckDirStructure()): 1.582
	Check also usr/sbin
	(function CygbuildDefineGlobalMain()): 1.583 Changed filename
	'install.options' is now 'install.tar.options'.
	(function CygbuildDefineGlobalMain()): 1.583 New variable
	`EXTRA_ENV_OPTIONS_INSTALL'.
	(function CygbuildMakefileRunInstall()): 1.583 Use
	`EXTRA_ENV_OPTIONS_INSTALL'.

2004-12-17 Fri  Jari  <jari dot aalto A T cante dot net>

	* bin/cygbuild.pl (OPTIONAL EXTERNAL FILES::build.sh): 1.178
	moved ./configure example under `configure.sh'.

2004-12-16 Thu  Jari  <jari dot aalto A T cante dot net>

	* bin/cygbuild.sh: 1.582 (top level): Added back bash vs. sh
	test to prevent user mistakes. Removed `ps' and used 'eval'
	test.
	(CygbuildCommandMain): Removed Bash 3.x syntax '=~' and
	replaced it with bash 2.x compatible 'egrep'.

	* etc/template/Makefile.tmp (clean): 1.2 Added
	*.stackdump

2004-12-15 Wed  Jari Aalto  <jari dot aalto A T cante dot net>

	* bin/cygbuild.sh (function CygbuildMakefileName()): 1.579
	Removed 'static' cache of makefile. It dows not work because
	during configure the makefile is Makefile.in and in build phase
	it must be generated 'Makefile'.
	(declare -a STATIC_MAKEFILE): Removed.

2004-12-02 Thu  Jari Aalto  <jari dot aalto A T cante dot net>

	* etc/template/Makefile.tmp: 1.1 Added newline to the end.

2004-10-31 Sun  Jari Aalto  <jari dot aalto A T cante dot net>

	* bin/cygbuild.sh (function CygbuildCommandMain()): 1.568
	$release variable is now checked with pure bash. Removed
	`echo ... | egrep' test.
	(function MakefileUsesRedirect()): 1.568 Added check for
	non existing $file.
	(function CygbuildCmdMkpatchMain()): 1.568 Split one
	`echo' command's output to separate lines.

2004-10-20 Wed  Jari Aalto  <jari dot aalto A T cante dot net>

	* bin/cygbuild.pl (HELP::OPTIONAL EXTERNAL FILES):
	1.174 Documented build.options file.

	* bin/cygbuild.sh
	- The LC_ALL=C is needed to avoid the grep 3rd world
	  locales slowdown bug.
	(function CygbuildIsMakefileTarget()): 1.573
	Added LC_ALL=C to egrep.
	(function CygbuildIsX11Package()): 1.573 Added LC_ALL=C to egrep.
	(function CygbuildMoveToTempDir()): 1.573 Added LC_ALL=C to egrep.
	(function CygbuildTreeSymlinkCopy()): 1.573 Added LC_ALL=C to egrep.
	(function CygbuildCygDirCheck()): 1.573 Added LC_ALL=C to egrep.
	(function CygbuildMakeRunInstallFixPerl()): 1.573
	Added LC_ALL=C to egrep.
	(function CygbuildPatchCheck()): 1.573 Added LC_ALL=C to egrep.
	(function CygbuildCmdMkpatchMain()): 1.573 Added LC_ALL=C to egrep.
	(function CygbuildCmdInstallCheckReadme()): 1.573
	Added LC_ALL=C to egrep.
	(function CygbuildCmdInstallCheckReadme()): 1.573
	Added LC_ALL=C to egrep.
	(function CygbuildCmdInstallCheckManualPages()): 1.573
	Added LC_ALL=C to egrep.
	(function CygbuildCmdInstallCheckMain()): 1.573
	Added LC_ALL=C to egrep.
	(function CygbuildCmdInstallCheckMain()): 1.573
	Added LC_ALL=C to egrep.
	(function CygbuildFilePackageGuessMain()): 1.573
	Added LC_ALL=C to egrep.
	(function CygbuildFilePackageGuessMain()): 1.573
	Added LC_ALL=C to egrep.
	(function CygbuildFileReleaseGuess()): 1.573
	Added LC_ALL=C to egrep.
	(function CygbuildCommandMain()): 1.573
	Added LC_ALL=C to egrep.
	(function CygbuildDefineGlobalMain()): 1.573
	EXTRA_BUILD_OPTIONS, new variable. New configuration file
	`build.options'.
	(function CygbuildCmdBuildMainMakefile()): 1.573
	Use `EXTRA_BUILD_OPTIONS'.

2004-10-19 Tue  Jari Aalto  <jari dot aalto A T cante dot net>

	* bin/cygbuild.sh (function CygbuildPathAbsoluteSearch()): 1.573
	Added LC_ALL=C to egrep.
	(function MakefileUsesLibtool ()): 1.573 Added LC_ALL=C to egrep.

2004-10-17 Sun  Jari Aalto  <jari dot aalto A T cante dot net>

	* etc/template/setup.hint: 1.5 Added new category 'Science'
	and announced by Christopher Faylor 2004-10-10 in cygwin-apps
	Message-ID: <20041010185528.GG14377@trixie.casa.cgf.cx>

	* bin/cygbuild.pl (HELP::OPTIONAL EXTERNAL FILES): 1.174
	Documented `confgure.options' file.

	* etc/template/configure.options.tmp: New user configuration
	file.cygbui

	* etc/etc/programs.conf: 1.3 Added CAT.

	* etc/template/install-after.sh.tmp: 1.5 Removed quotes
	around $test varibale in '-d' test. Added slighly more verbose
	examples.

	* bin/cygbuild.sh (function CygbuildDefineGlobalMain()): 1.573
	Removed -no-undefined from CYGBUILD_LDFLAGS. It is only
	relevant during library compilation and not for regular
	programs where it would display: gcc: unrecognized option
	`-no-undefined'.
	(function CygbuildTreeSymlinkCopy()): 1.573 Use $FIND,
	not 'find'. Filter out .s?inst, .build directories while
	cleanin non wanted files before shadow.
	(function CygbuildCmdPostInstallMain()): 1.573 Use $FIND,
	not 'find'.
	(function CygbuildTreeSymlinkCopy()): 1.573 use $RM, not 'rm.
	(function CygbuildFileCleanNow()): 1.573 use $RM, not 'rm.
	(function CygbuildFileCleanTemp()): 1.573 use $RM, not 'rm.
	(CygbuildMakeRunInstallFixPerl): 1.573 use $RM, not 'rm.
	(function CygbuildMakefileRunInstallFixInfo()): 1.573
	use $RM, not 'rm.
	(function CygbuildCmdMkpatchMain()): 1.573 use $RM, not 'rm.
	(function CygbuildInstallExtraManualCompress()): 1.573
	use $RM, not 'rm.
	(function CygbuildDefineGlobalCommands()): 1.573 Define CAT.
	(function CygbuildCmdInstallCheckMain()): 1.573 use $EGREP,
	not 'egrep'.
	(function FileReadOptions()): 1.573 Added gsub() to awk
	script to rip of comments in the same line. Changed default
	'file' (which may exist) to /dev/null.
	(function CygbuildDefineGlobalMain()): 1.573 Changed
	NAME_SRC_PATCH to include '-cygwin', so patches will be
	now named as package-NN.NN-cygwin.patch
	(File::Find.pm): 1.573 Removed subshell call and
	variable `optionC'.
	(function MakefileUsesRedirect()): 1.573 Rewrote. Removed
	return strings 'yes' and 'no'. Now returns shell status $?.
	(function MakefileUsesLibtool ()): 1.573 New.
	(function CygbuildConfCC()): 1.573 Added Libtool check:
	remove option --libdir if project uses libtool.

2004-10-13 Wed  Jari Aalto  <jari dot aalto A T cante dt net>

	* bin/cygbuild.pl (HELP::MISCELLANEOUS): 1.174  Added note
	about LDFLAGS=-no-undefined

	* bin/cygbuild.sh (function CygbuildDefineGlobalMain()): 1.568
	CYGBUILD_LDFLAGS is now set to `-no-undefined'.
	(function CygbuildConfCC()): 1.568 Use CYGBUILD_LDFLAGS

2004-10-12 Tue  Jari Aalto  <jari dot aalto A T cante dt net>

	* bin/cygbuild.sh (function CygbuildCommandMain()): 1.568 Added
	check for unknow options. Fixed option v|verbose
	to -v|--verbose
	(function CygbuildIsBuilddirOk()): 1.568 some package only contain
	TOP level directories, so the check for ymbolic files -h failed.
	Added $builddir/*/* to check deeper.
	(function CygbuildCmdBuildMainMakefile()): 1.568 Improved error
	detection. If no makefile was found the -f option gave error.
	Put it inside 'else'.

2004-10-11  Jari Aalto   <jari dot aalto A T cante dt net>

	* etc/etc/programs.conf (PATCH): New variable.

	* bin/cygbuild.sh:
	(top level): Added comments above CYGBUILD_PATCH_OPT what
	the options mean.
	(CygbuildDefineGlobalCommands): Define PATCH.
	Added #global-def tags.
	(CygbuildPatchApply) Use $PATCH, not 'patch'.


2004-10-10 Sun  Jari Aalto  <jari dot aalto A T cante dt net>

	* bin/cygbuild.pl (HELP::OPTIONS): 1.173 Updated new long
	option names (like --verbose).

	* bin/cygbuild.sh
	-- Over 100 changes. All '>&2' were converted to call to `Warn'.
	(function CygbuildMain()): 1.564 Use $@, not $*
	(function CygbuildMain()): 1.564 Do not print short help, but
	a message that user should try -h.
	(function CygbuildPathBinFast()): 1.564 Incorrect return value
	/usr/PROG, when it should have been /bin/PROG.
	(function CygbuildCommandMain()): 1.564 Rewrote option handling.
	Instead of using bash built-in getopts, use getopt(1).
	(function Warn ()): 1.565 New.
	(You have): 1.565 Changed `cat' to `Warn'.

2004-10-07 Thu  Jari Aalto  <jari dot aalto A T cante dt net>

	* bin/cygbuild.sh (function CygbuildDefineGlobalMain()): 1.562
	Added comment why `builddir_relative' is `.build/.build' and
	not just `.build'
	(function CheckBash ()): 1.562 Output to stderr, not stdout.
	(function CygbuildCmdShadowDelete()): Exit if cannot
	remove builddir.

2004-10-06 Wed  Jari Aalto  <jari dot aalto A T cante dt net>

	* bin/cygbuild.sh (top level:CYGBUILD_MATCH_FILE_EXE): 1.559 New
	(function CygbuildInstallPackageDocs()): 1.559 .pl, .py and other
	files are now chmod 755 instead of default 644.
	(function CygbuildTreeSymlinkCopy()): 1.559 Added CygbuildPushd
	CygbuildPopd becasue of chdir
	(function CygbuildTreeSymlinkCopy()): 1.561 Remove *.exe files
	before shadow. A bug in lndir(1) found.

2004-09-28 Tue  Jari Aalto  <jari dot aalto A T cante dt net>

	* bin/cygbuild.sh (function CygbuildTreeSymlinkCopy()): 1.557
	Did not shadow dot-files like .depend - Fixed.

2004-09-26 Sun  Jari Aalto  <jari dot aalto A T cante dt net>

	* bin/cygbuild.pl (Help::Other commands): 1.172
	Added 'reshadow' command's explanation.

	* bin/cygbuild.sh
	(function CygbuildCmdBuildMainMakefile()): 1.557
	Use option '-f' to read makefile (e.g. -f GNUMakefile).
	Added missing 'local' definitions.
	(function CygbuildCmdCleanMain()): 1.557
	Use option '-f' to read makefile
	(function CygbuildCmdDistcleanMain): 1.557
	Use option '-f' to read makefile
	(function CygbuildMakefileRunInstallCygwinOptions()): 1.557
	Use option '-f' to read makefile

	* etc/etc/programs.conf: 1.1 Added note, that no private
	variables should be defined here.

2004-09-01 Wed  Jari Aalto  <jari dot aalto A T cante dt net>

	* bin/cygbuild.pl (HELP::diff.options): 1.170 things => thinks.
	oupl => couple, 'a re' => are and other typos fixed.

2004-08-19 Thu  Jari Aalto  <jari dot aalto A T cante dt net>

	* etc/makefile/vars.mk (VERSION): 1.16 Change YYYY.MMDD to YYYYMMDD.

	* etc/makefile/cygwin.mk (release-cygwin-bin-fix): 1.15 Added 'reshadow'
	in call to cygbuild.

	* Makefile (install-etc-main): 1.22 Added missing paren.
	(install-etc-template): 1.22 Added missing paren.

	* index.html (Mailing list): 1.28 Chnaged license from
	www.opencontent.org to creativecommons.org

	* etc/template/configure.sh.tmp (function Configure()): 1.11
	write error to stderr.

2004-08-18 Wed  Jari Aalto  <jari dot aalto A T cante dt net>

	* bin/cygbuild.sh (function CygbuildMakefilePrefixCheck()): 1.555
	Adjusted egrep regexp to find DESTDIR support in Makefile.

2004-08-18  Jari Aalto  <jari dot aalto A T cante dt net>

	* etc/template/postinstall.sh.tmp (PATH): Filled long comments to
	fit into column 75. Added variable $etcdir.

2004-06-28 Mon  Jari Aalto  <jari dot aalto A T cante dt net>

	* bin/cygbuild.sh (function Exit()): 1.552 function moved to
	the beginning of file.
	(function ExitNoDir()): 1.552 function moved to
	the beginning of file.
	(function ExitNoFile()): 1.552 function moved to
	the beginning of file.
	(function CygbuildCommandMain()): 1.552 Check that -s and -p option
	parameter is not another option (-arg), but a string.
	(function CygbuildInstallExtraMain()): 1.552 Removed
	`CygbuildInstallExtraManualCompress'.
	(function CygbuildCmdInstallMain()): 1.552 Call
	`CygbuildInstallExtraManualCompress'.
	(function CygbuildInstallExtraManualCompress()): 1.552 Added
	warning if DIR_DOC_GENERAL was not found.

2004-06-08 Tue  Jari Aalto  <jari dot aalto A T cante dt net>

	* bin/cygbuild.sh (function CygbuildTreeSymlinkCopy()): 1.551
	In addition to 'lndir', use 'cp -lr' if for some reason 'lndir'
	is not available.

2004-06-07 Mon  Jari Aalto  <jari dot aalto A T cante dt net>

	* bin/cygbuild.sh: (top level::CYGBUILD_DIFF_OPTIONS)
	1.549 Added --exclude=*.gmo
	(CygbuildCmdMkpatchMain): Improved error handling. Added more check, like
	existing $$difforig.

2004-06-04 Fri  Jari Aalto  <jari dot aalto A T cante dt net>

	* bin/cygbuild.pl (sub CygcheckDepsNeeded): 1.169 Previous chnages
	make function not to find new dependencies. The pronlem was $ARG, which
	must not be used inside grep().

	* bin/cygbuild.sh: 1.546 (top level::opt_exclude_bin_files): Added
	*.ico and *.xpm
	(function CygbuildInstallPackageDocs()): 1.546 Added check for $status
	after tar(1). User may have forgotten to run [files] before trying [install].
	(function CygbuildCmdInstallCheckManualPages()): 1.548 Ignore */doc/* files
	(function CygbuildCmdInstallCheckMain()): 1.548 Call
	`CygbuildCmdInstallCheckDirStructure'.
	(function CygbuildCmdInstallCheckDirStructure()): 1.548 New.

2004-06-03 Thu  Jari Aalto  <jari dot aalto A T cante dt net>

	* bin/cygbuild.sh
	- Not is is possible to give '-d 2' and watch the Perl module's
	  debug messages.
	(function CygbuildCmdDependCheckMain()): 1.545
	Added SetDebug() call to perl.
	(function CygbuildDebianRules2Makefile()): 1.545
	Added SetDebug() call to perl.
	(function CygbuildCmdPkgSourceCVS()): 1.545
	Added SetDebug() call to perl.
	(function CygbuildCmdPkgSourceCVSdiff()): 1.545
	Added SetDebug() call to perl.
	(function CygbuildCmdReadmeFix()): 1.545
	Added SetDebug() call to perl.

	* bin/cygbuild.pl (sub SetDebug): 1.168 New.
	(Find::prune): 1.168 Added more debug. Replaced extra -d test with
	if-statement (faster).
	(sub TestDriverFileScanMain): 1.168 New.
	(sub CygcheckDependencies): 1.168 Improved REGEXP to
	FileScanMain(). It dind't find symlinked binaries like jmacs ->
	joe.exe. This is a Perl issue in File::Find module which does not
	traverse file if it has already been found.
	(sub CygcheckDepsNeeded): 1.168 Improved parsing.
	cygncurses => libncurses.
	(CygcheckDependencies): 1.168 Improved 'cygcheck' call and added more
	debug.

2004-05-31  Jari Aalto  <jari dot aalto A T cante dt net>

	* bin/cygbuild.pl: (Help::BUGS) Added topic 'Perl and double
	install is needed'

2004-05-31 Jari Aalto  <jari dot aalto A T cante dt net>

	* bin/cygbuild.sh:
	(top level::SHADOW_TOPLEVEL_IGNORE): Removed `CYGWIN-PATCHES'. This
	directory must be shadowed, because the diff against original must
	included that directory.
	(CygbuildPatchFindGeneratedFiles):
	removed '-x CYGWIN-PATCHES'. The directory must be in the patch.
	(CygbuildMakeRunInstallFixPerl): The postinstall script now
	includes check for '-f $from' and '-f $to'
	(CygbuildPostinstallWrite): Changed message 'cannot wite' to
	'won't write'.
	(CygbuildCmdPkgBinaryStandard): Added check for missing
	$srcinstdir

2004-05-07  Jari Aalto  <jari dot aalto A T cante dt net>

	* etc/template/configure.sh.tmp: (Bootstrap): There
	was two duplicate test for ./autogen.sh. Removed. Now
	test presence of configure, which autogen.sh creates.
	(Configure): ${prefix}include => ${prefix}/include

2004-05-05 Wed  Jari Aalto  <jari dot aalto A T cante dt net>

	* bin/cygbuild.sh (function CygbuildCmdDependCheckMain()): 1.541
	Replaced exit => Exit()
	(function CygbuildCmdTestMain()): 1.541 Replaced exit => Exit()
	(function CygbuildCommandMain()): 1.541 Added better error handling
	after call to CygbuildFilePackageGuessMain(). If file system got full,
	no files can be created.
	(function CygbuildExtractTar()): 1.541 tar '$opt' had
	--no-same-owner in wrong place. It must be before -zxvf. Fixed.
	(function CygbuildExtractTar()): 1.541 Added check for
	Directory names that only vary in case:
	LibVNCServer-0.6  <=> libvncserver-0.6

	* bin/cygbuild.pl (sub CygcheckDependencies): 1.166 Added
	$FILE_REGEXP_PRUNE = '' - Did not find .exe or .dll files,
	because directory .inst/ was pruned from search.

2004-04-26 Mon  Jari Aalto  <jari dot aalto A T cante dt net>

	* bin/cygbuild.sh (export CYGBUILD_MANDIR_FULL): 1.541 Added
	*.eps

2004-04-25 Sun  Jari Aalto  <jari dot aalto A T cante dt net>

	* bin/cygbuild.sh (function CygbuildInstallPackageDocs()): 1.540
	Added test -s. Do not copy zero length files.

2004-04-19 Mon  Jari Aalto  <jari dot aalto A T cante dt net>

	* bin/cygbuild.sh (function CygbuildTreeSymlinkCopy()): 1.540
	Better error message if lndir(1) is missing. Refer to XFree*
	packages.

2004-04-16  Jari Aalto  <jari dot aalto A T cante dt net>

	* etc/template/preremove.sh.tmp: New.

2004-04-10 Sat  Jari Aalto  <jari dot aalto A T cante dt net>

	* bin/cygbuild.sh (function CygbuildInstallPackageDocs()): 1.538
	Added *.pdf
	(function CygbuildDefineGlobalMain()): 1.539 Moved $DIR_CYGPATCH
	upward. It must be defined before used. This fixes postinstall.sh
	which was not copied.

2004-04-07  Jari Aalto  <jari dot aalto A T cante dt net>

	* bin/cygbuild.sh (to): When extracting, use --no-same-owner

2004-04-05  Jari Aalto  <jari aalto A T poboxes dt com>

	* Makefile (install-etc-dir-template): use BIN, not DATA
	(install-docdir): use BIN, not DATA

2004-04-05  Jari Aalto  <jari aalto A T poboxes dt com>

	* etc/makefile/unix.mk: Use INSTALL_BIN to create directories.
	(install-man-dir): New.

2004-04-04  Jari Aalto  <jari aalto A T poboxes dt com>

	* bin/cygbuild.sh: Added `CygbuildPushd' and `CygbuildPopd'
	around whole configure.
	(top level): Moved code to `CheckBash'. Which is no longer run,
	because it sholws down startup time.
	(CygbuildInstallPackageDocs): Changed ?() to @() regexp.

2004-04-03  Jari Aalto  <jari aalto A T poboxes dt com>

	* bin/cygbuild.pl: (HELP::Packages with non-standard versioning
	schemes): Added documentation how to handle 'rc1' 'rc2' ...
	packages.

	* bin/cygbuild.sh: (CygbuildCmdInstallCheckLibFiles):
	Check of .dll files must be done with [[ ]], not [ ].

	* etc/etc/programs.conf: New. Faster startup when
	this is read.

	* Makefile (install-etc-template-symlink): Updated.
	(install-etc-template): Updated.
	(install-etc): Added `install-etc-main'
	(FROM_ETC_MAIN): New.

	* etc/makefile/vars.mk (INSTALL_BIN): Now includes $(INSTALL).
	(INSTALL_DATA): Now includes $(INSTALL).

	* bin/cygbuild.sh:
	(top level): New variables. CYGBUILD_CONFIG_PROGRAMS,
	CYGBUILD_ETC_DIR, CYGBUILD_CONFIG_MAIN
	(CygbuildDefineGlobalCommands):
	Read CYGBUILD_CONFIG_PROGRAMS.

2004-04-03  Jari Aalto  <jari aalto A T poboxes dt com>

	* bin/cygbuild.sh:
	(CygbuildDefineGlobalMain): Added EXTRA_CONF_OPTIONS =>
	configure.options
	(CygbuildConfigureOptionsExtra): Renamed. Was
	`CygbuildInstallExtraOptions'.
	(CygbuildConfCC): Read EXTRA_CONF_OPTIONS.

2004-04-03 Sat  Jari Aalto  <jari aalto A T poboxes dt com>

	* bin/cygbuild.sh (function CygbuildSetLDPATHpython()): 1.535 Added
	missing export statements.

2004-04-02 Fri  Jari Aalto  <jari aalto A T poboxes dt com>

	* bin/cygbuild.sh: 1.535 (top level:SHADOW_TOPLEVEL_IGNORE):
	Changed fro single quotes to double quotes. Regexp had
	misplaced (.
	(function CygbuildCmdShadowMain()): 1.535 Removed -n from
	echo(1).

2004-03-31 Wed  Jari Aalto  <jari aalto A T poboxes dt com>

	* bin/cygbuild.sh: 1.535
	(top level:SHADOW_TOPLEVEL_IGNORE): New variable.
	(top level:opt_exclude_version_control):
	Subversion uses .svn/ directory, not SVN/ => fixed. Added
	monotone verson control dir MT/.
	(function CygbuildTreeSymlinkCopy()): 1.535 Use
	`SHADOW_TOPLEVEL_IGNORE'. Removed case statement and used egrep.

2004-03-30 Tue  Jari Aalto  <jari aalto A T poboxes dt com>

	* bin/cygbuild.pl: 1.164 (HELP): Added new 'case B' to the
	Synopsis.

	* bin/cygbuild.sh
	-- Replaced all 1>&2 with simpler >&2.
	(function CygbuildCmdInstallCheckReadme()):
	1.534 Explanation messages warrant as INFO, not WARN flag.
	(function CygbuildCmdInstallCheckReadme()): 1.534 Removed $(( ))
	and used `let' instead.
	(function CygbuildCmdInstallCheckLibFiles()): 1.534 Added STDERR
	to warnign messages. Missing *.dll is now WARN, instead of INFO.

2004-03-29 Mon  Jari Aalto  <jari aalto A T poboxes dt com>

	* bin/cygbuild.sh: (top level):  1.531 Added *.tst to `opt_exclude_tmp_files'.
	(top level:CYGBUILD_INSTALL_IGNORE): Added *.TST

2004-03-28 Sun  Jari Aalto  <jari aalto A T poboxes dt com>

	* etc/template/preremove.eh.tmp: New file.

	* bin/cygbuild.sh: 1.531 (top level): opt_exclude_archive_files
	Changed. Now *.txr and *.gz and *.bz2. Added .arj and .zoo and
	.tbz
	(function CygbuildPreRemoveWrite()): 1.531 New.
	(function CygbuildInstallCygwinPart()): 1.531 Added support for
	preremove.

	* bin/cygbuild.pl: 1.163 (top level): new variable
	$FILE_REGEXP_PRUNE
	(Find::prune): 1.163 Added support to $FILE_REGEXP_PRUNE.

2004-03-27 Sat  Jari Aalto  <jari aalto A T poboxes dt com>

	* bin/cygbuild.pl: 1.160
	(HELP::PACKAGE MAINTENANCE COMMANDS::Other commands): Documented
	new command [rmshadow] and [reshadow].

	* bin/cygbuild.sh (function CygbuildCmdCleanMain()): 1.516
	Wrong directory change. Do not use objdir, but builddir.
	(function CygbuildCmdDistcleanMain): 1.516 Wrong directory change.
	Do not use objdir, but builddir.
	(function CygbuildMakefileRunClean()): 1.516 Removed distclean
	(function CygbuildCmdDistcleanMain): 1.516 Added message to tell
	in which directory.
	(function CygbuildMakefileCheck ()): 1.516 if -lc was found, print
	WARN instead of INFO.
	(function CygbuildCommandMain()): 1.516 Added new command
	[rmshadow].
	(function CygbuildCmdShadowDelete ()): 1.516 New.
	(function CygbuildTreeSymlinkCopy()): 1.516 Use $MKDIR.
	(function CygbuildCleanConfig ()): 1.516 New.
	(function CygbuildCmdPrepClean()): 1.516 Added `CygbuildCleanConfig'.
	(function CygbuildCmdConfMain()): 1.517 Autorun 'shadow' if not
	yet done.
	(function CygbuildMakefileName()): 1.517 if DIR is not set, use
	pwd(1), not just '.'. Better for debugging.
	(function CygbuildCommandMain()): 1.517 Added new command [reshadow].
	(function CygbuildCmdInstallCheckManualPages()): 1.519
	(function CygbuildCmdInstallCheckManualPages()): 1.519 Added check
	form naul pages copied directly from Debian. Wording must be changed.
	(function CygbuildCmdPrepClean()): 1.519 Send TOPDIR to every
	clean function. Added PREFIX check if Perl failed.
	(function CygbuildCommandMain()): commands [package]
	[source-package] now runs `CygbuildNoticeGPG' in verbose mode.
	(function CygbuildCmdShadowMain()): 1.523 Added 'clean'
	'distclean' before shadow.
	(function CygbuildCmdInstallMain()): 1.526 Added `return' if rm
	failed.

2004-03-24 Wed  Jari Aalto  <jari aalto A T poboxes dt com>

	* etc/template/postinstall.sh.tmp (PATH): Added X11 to PATH.

	* bin/cygbuild.pl (sub MakefileDestdirSupport): 1.156 Improved
	DESTDIR regexp.
	(sub CygcheckDependencies): 1.156 Call cygcheck with relative path.
	This fixed error: cygcheck reports: path/to/foo.exe - Cannot open
	foo.exe. Use PathToCygwin to make paths relative.
	(sub PathToCygwin): 1.156 New.
	(HELP::QUICK EXAMPLES): 1.157 New heading.
	(HELP::PACKAGE MAINTENANCE COMMANDS::Other commands): Documented
	new commands [shadow].
	(HELP::SYNOPSIS): Added [shadow].
	(HELP::PACKAGE MAINTENANCE COMMANDS::Packaging commands): Command
	`source-package-verify' removed.

	* bin/cygbuild.sh
	-- NEW FEATURE: Now build happens in .build/.build, instead of
	previous $srcdir. Symlinks have been used.
	(function CygbuildMakefilePrefixCheck()): 1.506
	Improved DESTDIR check from Makefile.
	(function CygbuildCmdInstallMain()): 1.507 Call
	`CygbuildInstallExtraMain'.
	(function CygbuildCommandMain()): 1.507 Removed all calls to
	`CygbuildInstallExtraMain'.
	(function CygbuildDefineGlobalMain()): 1.508 Changed
	to `builddir_relative' to `.build/.build'.
	(function CygbuildShadowCopy ()): 1.508 New.
	(function CygbuildCmdShadow ()): 1.508 New.
	(function CygbuildCommandMain()): 1.508 Added new command
	[shadow]
	(function CygbuildIsBuilddirOk()): 1.508 New.
	(function CygbuildCmdBuildMainMakefile()): 1.510 Added
	ExitNoDir for `builddir'.
	(function CygbuildHelpShort()): 1.511 Documented
	command [shadow].
	(function CygbuildTreeSymlinkCopy ()): 1.512 Variable `current'
	must be defined only after initial cd. Now link creation works.
	(function CygbuildCommandMain()): 1.514 Removed
	`source-package-verify'. No longer supported.
	(function CygbuildCmdVerifyMain()): 1.514 Removed.
	(function CygbuildBuildScriptPath()): 1.514 added one more elif.

2004-03-23 Tue  Jari Aalto  <jari aalto A T poboxes dt com>

	* etc/template/setup.hint: 1.4 Added category X11

	* bin/cygbuild.sh (function CygbuildCmdConfMain()): 1.505
	Added text for ./configure. It must take precedence.

2004-03-22 Mon  Jari Aalto  <jari aalto A T poboxes dt com>

	* etc/template/postinstall.sh.tmp: 1.9 Added /usr/bin
	in addition to /bin.

	RELEASED: 2003.0322

2004-03-21 Sun  Jari Aalto  <jari aalto A T poboxes dt com>

	* etc/template/build.sh.tmp: 1.2 Updated documentation.
	Fixed shebang line.

	* bin/cygbuild.pl (Help::OPTIONAL EXTERNAL FILES): 1.154
	Documented new file install.options
	(Help:: LIBRARY USAGE): 1.155 Wrote new topic

	* etc/template/install.options.tmp: New.

	* bin/cygbuild.sh
	(top level): Moved 'shopt -s extglob' to the beginning.
	(top level:CYGBUILD_SIGN_KEY_NOW): 1.502
	Removed. Not needed.
	(function CygbuildInstallPackageDocs()): 1.502 More abstract:
	added `scriptInstallDir' and `scriptInstallFile'.
	(top level:CYGBUILD_TAR_INSTALL_EXCLUDE): 1.502 Added RISC,
	.hp, bsd to exclude list.
	(function CygbuildDefineGlobalMain()): 1.502 Added
	EXTRA_TAR_OPTIONS_INSTALL to read from install.options
	(function FileReadOptions ()): 1.502 New.
	(function CygbuildInstallPackageDocs()): 1.502 Added
	EXTRA_TAR_OPTIONS_INSTALL
	(function FileReadOptionsMaybe ()): 1.502 New.
	(function CygbuildMain()): 1.504 Added exports
	CygbuildInstallPackageDocs, CygbuildInstallPackageInfo,
	CygbuildInstallCygwinPart
	(function CygbuildCmdBuildMain()): 1.504 Send $PKG $VER $REL
	to build.sh

2004-03-20 Sat  Jari Aalto  <jari aalto A T poboxes dt com>

	* bin/cygbuild.sh (top level:CYGBUILD_INSTALL_IGNORE): 1.502
	Added more README.<platform> file excludes.

	* etc/template/Makefile.tmp: New file.

	* etc/template/package.README (Upstream contact:): 1.12 Added
	Language: tag.

	* etc/makefile/unix.mk (clean-temp-files): 1.12 Updated.
	Added '(' ')' and 'core' to find.

2004-03-18 Thu  Jari Aalto  <jari aalto A T poboxes dt com>

	* etc/template/install-after.sh.tmp: 1.4 Changed bash => sh

	* bin/cygbuild.sh (function CygbuildCmdPrepPatch()): 1.494 New.
	(function CygbuildCmdPrepClean()): 1.494 New.
	(function CygbuildMain()): 1.494 Export `CygbuildCmdPrepPatch'.
	Command [package-sign] now checks if user did not use -s.
	(function CygbuildCommandMain()): 1.494 Removed cleaning
	commands from [all]. They are not in `CygbuildCmdPrepMain'.
	(function CygbuildDefineGlobalRoot()): 1.494 New
	SCRIPT_TEMPLATE_PREPARE
	(Help): 1.494 Version option is -V, not -v.
	(function CygbuildCmdMkdirs()): 1.497 Added arg VERBOSE. No
	longer use global $verbose.
	(function CygbuildPathAbsoluteSearch()): 1.497 Corrected namei(1)
	handling. Added -h tests. DISABLED namei(1) call. moved
	readlink(1) upward.
	(function CygbuildInstallExtraManualCompress()): 1.497 Added
	support to handle symbolic links to manual pages. (compression).
	(function CygbuildCmdPrepIsUnpacked()): 1.498 New.
	(function CygbuildCmdMkpatchMain()): 1.500 Added debug support.
	If $debug, then do not delete directories in .build/
	(function CygbuildDefineGlobalMain()): 1.500 Renamed.
	Was `CygbuildDefineGlobalRoot'.
	(function CygbuildIsX11appDefaults()): 1.500 Drp X11/ from
	search. Only search app-defaults.
	(function CygbuildConfCC()): 1.500 Added `CygbuildInstallOptions'
	and removed X11 test.
	(function CygbuildInstallExtraOptions ()): 1.500 New.
	(function CygbuildCmdInstallMain()): 1.500 Added local vars
	`scriptInstall' and `scriptAfter'.
	(function CygbuildConfOld()): 1.500 Removed. Unused.
	(function CygbuildMakefileRunInstallCygwinOptions()): 1.500 Added
	$3, REST flags.
	(function CygbuildMakefileRunInstall()): 1.500 Added $extra
	options (X11/appdefaults => --libdir change".
	(function CygbuildCmdInstallMain()): 1.501 Run 'find .inst -print'
	if $verbose mode is on.

	(function CygbuildCmdPublishToDir()): 1.492 Incorrect
	recursive dest loop. Created devel/devel/devel/... Fixed.

	* bin/cygbuild.pl (sub FileScanMain): 1.151 Added
	follow => to find().
	(HELP::OPTIONAL EXTERNAL FILES): 1.152 Documented prepare.sh

2004-03-17 Wed  Jari Aalto  <jari aalto A T poboxes dt com>

	* bin/cygbuild.sh (function CygbuildCommandMain()): 1.491
	Applied patch by Harold L Hunt II <huntharo@msu.edu> to
	check 'prep' and not complain about unpacked source.
	Removed command [install-prepare]. It doesn't exist. Leftover.
	(function CygbuildCmdMkpatchMain()): 1.491 Calls
	`CygbuildCmdCleanMain' and `CygbuildCmdDistcleanMain' were
	in wrong place.
	(function CygbuildMakefileRunInstall()): 1.491 Send
	$pfx and $docprefix to `CygbuildMakefileRunInstallCygwinOptions'.
	(function CygbuildMakefileRunInstallCygwinOptions()): 1.491 Added
	arguments PFX and DOCPFX
	(function CygbuildIsDestdirSupported()): 1.491 Added -exit arg
	to perl function call.

2004-03-17 Jari Aalto  <jari aalto A T poboxes dt com>

	RELEASED: 2004.0317

	* etc/makefile/vars.mk (SINSTDIR): 1.13 New.

	* etc/makefile/cygwin.mk (release-cygwin-bin-only): 1.12 Added
	ccommand [mkdirs] to call CYGBUILDBIN
	(release-cygwin-bin-fix): 1.12 Added
	ccommand [mkdirs] to call CYGBUILDBIN
	(TAR_FILE_CYGWIN_LATEST): 1.12 Updated.
	(TAR_FILE_CYGWIN): 1.12 Updated.
	(CURINSTDIR): 1.12 New.

	* bin/cygbuild.pl (HELP::OPTIONAL EXTERNAL FILES::diff.opt ions):
	Documented new -x cygbuild-ignore-autochecks and -x
	cygbuild-ignore-all-defaults

	* bin/cygbuild.sh (function CygbuildCmdPublishToDir()): 1.483
	Logic rewritten. Development signarures were incorrectly
	copied.
	(function CygbuildCmdPublishSignature()): 1.483 New.
	(function CygbuildGPGsignMain()): 1.484 tightened
	-name search option. Do not sign original package, only the ones
	that were made.
	(function CygbuildCmdPublishToDir()): 1.484 Wrong argument to
	MKDIR. Fixed.
	(top level:CYGBUILD_INSTALL_IGNORE): 1.485 Added *VMS*
	(top level:CYGBUILD_DIFF_OPTIONS): 1.486 config.* was too broead.
	Changed to config.cache config.log.
	(function CygbuildCmdMkpatchMain()): 1.487 Added support for -x
	 cygbuild-ignore-autochecks and -x cygbuild-ignore-all-defaults
	 (function CygbuildCmdPkgBinaryMain()): 1.488 Removed rm -rf,
	ns used plain rm.

2004-03-16 Tue  Jari Aalto  <jari aalto A T poboxes dt com>

	* etc/template/diff.sh.tmp: 1.2 Added !/bin/sh and removed
	bash'ism `local'.

	* etc/template/diff-before.sh.tmp: New.

	* bin/cygbuild.pl (sub CygcheckDependencies): 1.146 Removed
	extra $debug setting.
	(HELP::OPTIONAL EXTERNAL SCRIPTS): 1.147
	documented diff-before.sh
	(HELP::Packaging commands): 1.148 Documented new commands
	`repackage-devel'.

	* bin/cygbuild.sh (function CygbuildCmdPublishSetupFix()): 1.473
	Added $dest check.
	(function CygbuildGPGverify()): 1.473 Removed
	extra '(' from egrep.
	(top level:CYGBUILD_CONFIGURE_OPTIONS): 1.474 Added --bindir
	(function CygbuildDefineGlobalRoot()): 1.475 Somehow
	DIR_DOC_GENERAL was wrong. Must have been due to find/replace.
	(top level:CYGBUILD_INSTALL_IGNORE): Added MANIFEST.
	(function CygbuildCmdInstallCheckReadme()): 1.475 Added check
	that PKG is same as package.README.
	(function CygbuildPatchFindGeneratedFiles()): 1.477 Added
	$optextra ARG.
	(function CygbuildCmdMkpatchMain()): 1.477 Send $extraDiffOpt
	to `CygbuildPatchFindGeneratedFiles'.
	(function CygbuildDefineGlobalRoot()): 1.477 Added
	SCRIPT_TEMPLATE_DIFF_BEFORE, run it before diff(1).
	(function CygbuildCmdMkpatchMain()): 1.478 Added -d option
	support.
	(function CygbuildCommandMain()): 1.479 Added new
	command `repackage-devel'.
	(function CygbuildCmdPublishSetupFix()): 1.480 Added DEVEL *bin
	support.
	(function CygbuildCmdPkgBinaryStandard()): 1.480 Added more
	local varaibles to make function more maintainable.
	(function CygbuildCmdPkgDevelStandard()): 1.480 Added variables:
	pkgdev, pkgdoc, pkgbin. Simplified code with $taropt.
	(function CygbuildCmdPkgDevelStandard()): 1.480 Added sign support.

2004-03-15 Mon  Jari Aalto  <jari aalto A T poboxes dt com>

	* bin/cygbuild.pl
	(HELP::Install commands): 1.145 Removed command [test].
	It is not an alias to [check]
	(HELP::Packaging commands) 1.145 [packaeg-devel] updated to
	include *-bin references.

	* bin/cygbuild.sh (function CygbuildCmdCleanMain()): 1.452
	keep status to 0. It is not an error if 'clean' target was
	not found.
	(function CygbuildCmdDistcleanMain): 1.452 keep status to 0.
	(function CygbuildCmdGPGVerifyMain()): 1.452 New.
	(function CygbuildCommandMain()): 1.452 New command 'verify'.
	(function CygbuildCmdGPGVerifyMain()): 1.452 Check type of
	$0
	(export CYGBUILD_MANDIR_FULL): 1.471 --PREFIX and --exec-PREFIX
	changed to --prefix. (Error cause by variable replacements).

2004-03-14 Sun  Jari Aalto  <jari aalto A T poboxes dt com>

	* bin/cygbuild.pl (HELP::OPTIONAL EXTERNAL SCRIPTS): 1.143
	List of scripts Ordered alphabetically.
	(HELP::QUICK EXAMPLES): 1.143 New heading.
	(HELP::Install commands): 1.143 =item B<check> bullets
	shortedned. Looked bad in manual page.

	* bin/cygbuild.sh
	-- New command 'package-sign'.
	(function CygbuildDefineGlobalRoot()): 1.452
	Files are no longer installed to TOPDIR (../), but to .sinst/
	(function CygbuildDefineGlobalRoot()): 1.452 Renamed 10+ variables
	and removed `export'.
	(function CygbuildCygbuildDefineGlobalSrcOrigGuess()): 1.452
	Removed `export'.
	(function CygbuiFldGPGsignMain()): 1.452 New.
	(Help): 1.452 Documented `package-sign' command.
	(function CygbuildSignCleanMaybe()): 1.452 New.
	(function CygbuildCmdPkgSourceStandard()): 1.452 Call
	`CygbuildFileCleanNow'.
	(function CygbuildFileCleanNow()): 1.452 New.
	(function CygbuildGPGsignFileNow()): 1.452 New.
	(function CygbuildGPGsignFileOne()): 1.452 New.
	(function CygbuildCmdPkgBinaryStandard()): 1.452 Added
	`CygbuildFileCleanNow' and `CygbuildGPGsignFileNow'.
	(function CygbuildCmdPublishToDir()): 1.452 Now publishes
	also signatures.
	(function CygbuildGPGverify()): 1.452 Added arg QUIET.
	(function CygbuildNoticeGPG()): 1.452 New.
	(function CygbuildCommandMain()): 1.452 If -s was asked, but no
	gpg is available, display a warning. Commands `repackage-bin' and
	`repackage-source' now display a INFO if -s option is not used,
	but GPG would be available. `repackage-bin' not publishes as well.
	(function CygbuildCmdPublishToDir()): 1.452 Copy .sig files
	to publish area. Signatures are now checked when 'all' is run.
	(function CygbuildGPGsignatureCheck()): 1.452 New.
	(function CygbuildPatchApply()): 1.452 Drop directory portin from
	patch file path.
	(function CygbuildCmdMkpatchMain()): 1.452 Moved code around.
	1) Unpack the original first 2) then the current sources 3)
	take diff. In old version the order was 2, 1, 3. Also fixes
	invalid patch, when the path names were incorrect. This bug was
	introduces about 5 versions ago.
	(function CygbuildCmdPublishToDir()): 1.452 Delet always signature
	files from publish dir. New ones will be copied if they are valid.

2004-03-13 Sat  Jari Aalto  <jari aalto A T poboxes dt com>

	* etc/makefile/cygwin.mk: 1.11 Cosmetic changed. Lined up
	backslashes.

	* bin/cygbuild.pl (HELP::OPTIONS): 1.140 Documented gpg(1)
	options -s for sign and -p for pass phrase.

	* bin/cygbuild.sh: (CygbuildMain) 1.452 Adjusted `repackage-bin'
	functions calls.
	(function CygbuildCommandMain()): 1.452 Removed printing help
	if command was incorrect. Display only pointer to -h.
	(function CygbuildFilesExecutable ()): 1.452 `find' command lacked
	! -name "*sig"
	(CygbuildCmdPublishToDir): 1.452 Change TOPDIR to srcinstdir.
	(function CygbuildCmdMkpatchMain()): 1.452 Changed TMPDIR to
	builddir, so that copying patch is not done to /tmp any more.
	(function CygbuildCmdMkpatchMain()): 1.452 Added arg `signkey'.
	Added `CygbuildGPGsignFiles'.
	(function CygbuildGPGsignFiles()): 1.452 Added passh phrase support.

2004-03-12 Fri  Jari Aalto  <jari aalto A T poboxes dt com>

	* bin/cygbuild.sh (function CygbuildGPGavailableCheck()): 1.452 New.
	(function CygbuildGPGsign()): 1.452 New.
	(function CygbuildGPGverify()): 1.452 New.
	(function CygbuildCmdMkpatchMain()): 1.452 Added GPG signing.
	(function CygbuildPathBinFast()): 1.452 Added $* support
	(function CygbuildMain()): 1.452 Added -s KEY; sign command.

2004-03-11 Thu  Jari Aalto  <jari aalto A T poboxes dt com>

	* bin/cygbuild.pl (sub CygcheckDepsNeeded): 1.136 Added
	renaming possibilities, like cygipc2 => 'cygipc' with
	hash %rename.
	(sub CygcheckDependencies): 1.137 Added cygcheck error 'Cannot
	open' handling.
	(HELP): 1.139 Improved documentation all over.

	* bin/cygbuild.sh (function CygbuildFilesExecutable ()): 1.450
	Shorten DIR path.
	(function CygbuildCmdInstallCheckManualPages()): 1.450 Added
	extra subshell call. Don't know why - otw the find won't work.
	(ls -la): 1.450 Changed -s => ! -s. Added -type f
	(function CygbuildCmdInstallCheckBinFiles()): 1.452 Added
	subshell. Oterwise won't find binary files. This is odd?

2004-03-10 Wed  Jari Aalto  <jari aalto A T poboxes dt com>

	* bin/cygbuild.sh (function CygbuildCmdPostInstallMain()): 1.450
	Fixed ignoring -d command line option.

	* etc/template/package.README (Upstream contact:): 1.11 Added
	'License:' tag

2004-03-09 Tue  Jari Aalto  <jari aalto A T poboxes dt com>

	* bin/cygbuild.pl: 1.134 (HELP::OPTIONS): Documented new
	option -m.

	* bin/cygbuild.sh
	- 1.447 big chhanges: When takiking a diff, the source directory is
	  copied to /tmp so that a big package compilation (*.o) is not lost.
	(all): Reduced number of 'export' calls and replaced placed
	with tag '# global-def' (for definition).
	(function CygbuildCommandMain()): 1.437
	Removed `export' from option variables. Not needed. Added
	option -m --more-space
	(top level): 1.439 Define TEMPDIR. Tweaked CYGBUILD_TAR_EXCLUDE
	by adding temp files.
	(function CygbuildHelpShort()): 1.440 Documented option -m
	(function CygbuildCmdMkpatchMain()): 1.442 Moved pkg-ver-orig
	to $TEMPDIR instead of $TOPDIR.
	(function CygbuildCmdDistcleanMain): 1.442 Now takes parameter $1
	(function CygbuildCmdCleanMain()): 1.442 Now takes parameter $1

2004-03-08 Mon  Jari Aalto  <jari aalto A T poboxes dt com>

	* etc/template/install-after.sh.tmp: 1.3 Rewrote whole template.

	* bin/cygbuild.pl (Help::SYNOPSIS): 1.129 Added -v and -t
	options to example port section. Added 'C' alias hint.
	(HELP::FILES): 1.131 Documented temporary files.
	(HELP::OPTIONS 1.132 Removed =head2 and ordered all options
	a-z. This fixed POD error 'unterminated list at =head in paragraph
	46. ignoring.'

	* bin/cygbuild.sh
	- 1.433 .. 1.444 Extra newlines removed.
	(function CygbuildCmdInstallCheckLibFiles()): 1.431
	Added /man/ page check (had already *.info check).
	(function CygbuildCmdPublishToDir()): 1.431 Added *-bin* package
	handling.
	(function CygbuildFileConvertToUnix()): 1.435 New.
	(function CygbuildCmdInstallCheckMain()): 1.435 Call
	`CygbuildFileConvertToUnix'.
	(function MakefileUsesRedirect()): 1.435 Added egrep(1) option
	--files-with-matches for fater execution.
	(function CygbuildIsMakefileTarget()): 1.435 Added egrep(1) option
	--files-with-matches for fater execution.
	(function CygbuildIsX11Package()): 1.435 Added egrep(1) option
	--files-with-matches for fater execution.
	(function CygbuildIsX11appDefaults()): 1.435 Added egrep(1) option
	--files-with-matches for fater execution.

2004-03-07 Sun  Jari Aalto  <jari aalto A T poboxes dt com>

	* bin/cygbuild.pl (sub CygcheckDepsCheckMain): 1.127 Improved
	check for m4 in case there were no *.exe files.
	(sub Package): 1.128 Very rare case 'libadns1-1.1-1' triggered
	error. The version's dots, like in 1.1, must be quoted 1\.1

	* bin/cygbuild.sh (function CygbuildCommandMain()): 1.427 Added
	error chech after `CygbuildDefineGlobalRoot'.
	(function CygbuildDefineGlobalRoot()): 1.430 Removed all exports.
	Not needed and causes error: 'xargs: environment is too large
	for exec'
	(function CygbuildCmdConfMain()): 1.431 Improved Imakefile
	support.
	(function CygbuildCmdPkgDevelStandard()): 1.431 Added dev-bin
	package creation in case library contains e.g clients.

2004-03-06 Sat  Jari Aalto  <jari aalto A T poboxes dt com>

	* etc/template/postinstall.sh.tmp: 1.6 (InstalInfo): Corrected
	info installation.

	* bin/cygbuild.sh: 1.422 (top level:CYGBUILD_TAR_INSTALL_EXCLUDE):
	Added exclude for *-sh, stamp-vti, Makefile*
	(function CygbuildHelpShort()): 1.422 Improved help.
	(function CygbuildIsDestdirSupported()): 1.422 New.
	(function CygbuildMakefilePrefixCheck()): 1.422 Use
	`CygbuildIsDestdirSupported' instead of simle grep DESTDIR.
	(function CygbuildCommandMain()): 1.422 Changed $OPTION_DEBUG_VERIFY
	$OPTION_DEBUG
	(function CygbuildCmdPostInstallMain()): 1.422 Added support for -d
	debug. Added support for $test.
	(function CygbuildCommandMain()): 1.422 Added handling of -d option.
	(function CygbuildInstallExtraManual()): 1.425 Added check for missing
	manual SECTION number (*.X.pod)
	(function CygbuildCmdInstallCheckInfoFiles()): 1.425 missing postinstall
	is now ERROR; was WARN.
	(function CygbuildCmdInstallCheckLibFiles()): 1.426 New.
	(function CygbuildCmdInstallCheckMain()): 1.426 Check Libaries.

	* bin/cygbuild.pl (sub FileScanWanted): 1.124 New.
	(sub FileScanWantedM4): 1.124 New.
	(sub FileScanMain): 1.124 New.
	(sub FileScanIsM4): 1.124 New.
	(sub CygcheckDependencies): 1.124 Removed find(1) and
	used faster perl File::Find.
	(sub CygcheckDepsCheckMain): 1.124 Now checks M4 dependency.
	(sub MakefileDestdirSupport): 1.125 New.
	(HELP:Miscellaneous options): 1.125 New heading. Documented
	option -d LEVEL.

2004-03-05 Fri  Jari Aalto  <jari aalto A T poboxes dt com>

	* bin/cygbuild.pl (sub CygcheckFilter): 1.119 Changed
	xfree86-base => XFree86-base
	(sub CygcheckDepsNeeded): 1.120 do not lc() 'XFree' word.
	(sub CygcheckParse): 1.121 Ignore /dev/null dependency.
	(HELP::Contributing packages): Added link to
	http://cygwin.com/setup.html


	* bin/cygbuild.sh (function CygbuildCmdConfMain()): 1.407 Added
	imake(1) support
	(top level:CYGBUILD_TAR_INSTALL_EXCLUDE): exclude *.yo and
	*.pretbl files.
	(function CygbuildConfCC()): 1.410 Added $test support.
	(function CygbuildIsAutomakePackage()): 1.410 New.
	(function CygbuildIsX11Package()): 1.410 New.
	(function CygbuildIsX11appDefaults()): 1.410 New.
	(function CygbuildMakefileName()): 1.410 Now accepts 1 + N
	arguments to search other files, like Makefile.in
	(function CygbuildConfCC()): 1.410 X11 aplication are now configured
	with --libdir=/etc/X11 instead of /usr/lib
	(function CygbuildCmdMkdirs()): 1.413 Changed to use for-loop.
	do not create directories that already exist.
	(function CygbuildCmdInstallCheckBinFiles()): 1.414 Addede new
	check to search if the binary name already exists in the system
	(new package uses binary names that are already reserved)
	(function CygbuildCmdInstallCheckManualPages()): 1.416
	No more it is fatal, if programs have manual pages.
	(because the warning may be wrong!)
	(function CygbuildCmdInstallCheckBinFiles()): 1.416 If executables
	do not have permission +x, it is no longer fatal. (because the
	warning may be wrong!)

2004-03-04 Thu  Jari Aalto  <jari aalto A T poboxes dt com>

	* bin/cygbuild.pl: 1.118 (HELP::Install commands): Documented
	new test option -t.

	* etc/makefile/vars.mk: 1.12 Added !/usr/bin/make

	* etc/makefile/net.mk: 1.12 Added !/usr/bin/make

	* etc/makefile/id.mk: 1.2 Added !/usr/bin/make

	* etc/makefile/cygwin.mk: 1.10 Added !/usr/bin/make

	* etc/makefile/unix.mk: 1.11 Added .PHONY: lines.
	Added !/usr/bin/make.

	* bin/cygbuild.sh (function CygbuildCommandMain()): 1.404
	if command fails, exit straight away.
	(function CygbuildCmdInstallCheckBinFiles()): 1.405 Added
	check for Linux executables via file(1).
	(function CygbuildMakefileRunInstallCygwinOptions()): 1.407 Added
	$test feature. Make is running with -n.
	(function CygbuildInstallPackageDocs()): 1.407 Added $test
	feature.
	(function CygbuildCommandMain()): 1.407 Added new user option
	-t (test mode). Most handy with [install] command to see changes
	and not making them.

2004-03-03 Wed  Jari Aalto  <jari aalto A T poboxes dt com>

	* etc/template/install.sh.tmp: 1.2 Removed extra empty lines.

	* Makefile: 1.19 Added check and message
	'This makefile requires GNU Make.'.

	* bin/cygbuild.pl (HELP::Build commands): 1.114 Documented
	new command [distclean]
	(HELP::readmefix): Updated documentation to refer to ENVIRONMENT.
	(HELP::ENVIRONMENT): New user variables CYGBUILD_FULLNAME
	and CYGBUILD_EMACS
	(sub ReadmeFix): 1.115 Added Support for CYGBUILD_FULLNAME and
	CYGBUILD_EMAIL.
	(sub ReadmeFix): 1.117 Added <REL> tag substitution.

	* bin/cygbuild.sh
	-- Major internal changes. All File and directory checks
	   vere simplified to Exit*() functions.
	(declare RETVAL): 1.395 Changed extension
	.func => .tmp
	(CygbuildCmdCleanMain): 1.395 Indented lined between calls
	to `noglob'. Removed `distclean'.
	(function CygbuildCmdDistleanMain): 1.395 New.
	(function CygbuildCommandMain()): 1.395 [all] now calls
	`CygbuildCmdDistcleanMain'. New command [distclean].
	(function CygbuildCmdMkpatchMain()): 1.395 Added call to
	`CygbuildCmdDistcleanMain'.
	(function CygbuildCmdInstallCheckBinFiles()): 1.397 Added
	checks for .exe, .dll, .sh, .pl, .py
	(function CygbuildCmdInstallCheckMain()): 1.397 Call
	`CygbuildCmdInstallCheckBinFiles'.
	(function CygbuildCommandMain()): Removed alias [test] which
	was same as [check]. The [test] is usually a Makefile target, while
	[check] is a Cygbuild feature.
	(function CygbuildCmdInstallCheckTempFiles()): 1.397 Changed
	message from WARN to ERROR
	(function Exit()): 1.398 New.
	(function ExitNoDir()): 1.398 New.
	(http:://wwww.fprot.org/): 1.398 Added check for directories
	ending to *doc/, like in momdoc/.
	(function CygbuildDefineVersionVariables()): 1.403 Removed
	subshell call.
	(function CygbuildCommandMain()): 1.403 Removed subshell
	call from CygbuildFilePackageGuessMain'.
	(function CygbuildExtractTar()): 1.403 Removed subshell calls from
	`CygbuildStrPackage' and `CygbuildStrVersion'.
	(function CygbuildExtractMain()): 1.403 Removed subshell
	call from `CygbuildSourceDownloadScript'.
	(function CygbuildCmdMkpatchMain()): 1.403 Removed $verbose
	from rm(1) command and replaced it with simple echo message.

2004-03-02 Tue  Jari Aalto  <jari aalto A T poboxes dt com>

	* bin/cygbuild.sh (function CygbuildMakefileCheck ()): 1.393 New.
	Check Linux -lc library option.
	(function CygbuildCmdConfMain()): 1.393 Call `CygbuildMakefileCheck'.

2004-03-01 Mon  Jari Aalto  <jari aalto A T poboxes dt com>

	* bin/cygbuild.pl (HELP::Optional external scripts::postinstall.sh):
	1.113. Added note that script should assume that path is not set.

	* etc/template/postinstall.sh.tmp: 1.4 Added explicit setting so
	that /bin:/sbin are listed first. Changed sed(1) separator (/) to
	more readable (,)

	* bin/cygbuild.sh (top level:CYGBUILD_PATCH_OPT): 1.393
	Added option --set-utc.
	(top level:PATH): Added explicit setting so that /bin:/sbin
	are listed first.

2004-02-18 Wed  Jari Aalto  <jari aalto A T poboxes dt com>

	* bin/cygbuild.sh
	(function CygbuildCmdInstallCheckManualPages()): 1.390 Improved
	manual page detection. package.sh => package.1, not just
	package.sh.1
	(function CygbuildCommandMain()): 1.393 Added `clean'
	to [all]. UnRTF includes *.o files in package that must
	be removed.

2004-02-17 Tue  Jari Aalto  <jari aalto A T poboxes dt com>

	* etc/template/postinstall.sh.tmp: 1.3 Typo 'don nit' => 'do not'
	Removed all `export' statements. They are not needed.

	* etc/template/configure.sh.tmp (function ConfigurePerl()): 1.9
	Minor adjustments.

	* etc/template/manualpage.pod.tmp (please see): 1.1 Typos corrected.

	* etc/template/diff.sh.tmp: New.

	* etc/template/patch.exclude.tmp: New user option file.

	* bin/cygbuild.pl (sub CygcheckDepsCheckMain): 1.109 Too
	loose regexp "readme$", picked up ".#unrtf.README"
	(HELP: Packaging commands): 1.110 Documented new commands
	[repackage-all] and [repackage-bin]
	(HELP: Optional external scripts): 1.112 Documented new file
	`diff.options'

	* bin/cygbuild.sh
	(top level: opt_exclude_dir): Exclude directory 'debian'.
	(top level: CYGBUILD_FIND_EXCLUDE): Exclude directory 'debian'.
	(top level): New variables: opt_exclude_man_files,
	opt_exclude_info_files, opt_exclude_auto_files
	(top level: CYGBUILD_TAR_INSTALL_EXCLUDE): Added info files.
	(top level: opt_exclude_tmp_files): added *.dvi *.ps
	(function CygbuildTarDirectory()): 1.355
	Corrected AWK statement to notice tar directories like
	./package-nn.nn/, not just package-nn.nn/
	(function CygbuildCmdMkpatch()): 1.355 Added extra check for
	tar directory ".", which may be due to ./
	(function CygbuildCommandMain()): 1.356 The [all] command
	now runs CygbuildCmdCleanMain, before make. Bad packages
	sometimes include binaries and .o files and the make would
	say "target all is up to date."
	(function CygbuildCmdCleanMain()): 1.357 incorrect
	parameter sent to CygbuildMakefileName, was $(pwd), should have
	been $objdir
	(function CygbuildInstallExtraManualCompress()): 1.358 Removed
	$verbose from GZIP, the absolute path name in the produced output
	is too hard to read.
	(function CygbuildCmdMkpatch()): 1.358 Added $verbose to
	rm -rf.
	(function CygbuildCmdInstallCheckReadme()): 1.361 EGREP was
	misplaced. Fixed. Now notices incorrect VER-REL tags.
	(function CygbuildCmdMkpatch()): 1.364 Removed subshell call
	from `CygbuildPatchFindGeneratedFiles'.
	(function CygbuildPatchFindGeneratedFiles()): 1.364 Added
	$opt_exclude_tmp_files
	(function CygbuildCmdMkpatch()): 1.365 Removed
	subshell from `CygbuildTarOptionCompress'.
	(function CygbuildDefineGlobalRoot()): 1.365 New variable
	`patchExcludeOptions'.
	(function CygbuildCmdMkpatch()): 1.365 Import
	`patchExcludeOptions' from separate file if it exists.
	(top level: CYGBUILD_PUBLISH_BIN): Added comment to explain what
	this and CYGWIN_BUILD_PUBLISH_DIR variable are used for.
	(function CygbuildFilesExecutable ()): 1.370 Mistakenly didn't
	restore set -o noglob. Fixed.
	(function CygbuildCommandMain()): 1.371 [repackage] did not run
	CygbuildInstallExtraMain, which compressed manual pages. Fixed.
	(function CygbuildCmdReadmeFix()): 1.372 Added better error
	handling in case `RedmeFix' fails.
	(function CygbuildCommandMain()): 1.372 Added command
	[repackage-bin]
	(function CygbuildCmdInstallCheckReadme()): 1.374 Added check
	for 'Your name', 'Your email'.
	(function CygbuildInstallPackageDocs()): 1.374 Removed
	subshell call from `CygbuildDetermineDocDir'.
	(function CygbuildDetermineDocDir()): 1.374 More generic
	algorithm to detect the document directory. Use egrep instead
	of hard coded doc/ docs/ .. choices.
	(function CygbuildCmdMkpatchMain()): 1.380 Renamed. Was
	`CygbuildCmdMkpatch'.
	(function CygbuildPatchCheck()): 1.380 Added information on
	what is in patch with -v ($verbose)
	(function CygbuildCmdInstallCheckMain()): 1.381 Added
	verbose message if everything was ok.
	(function CygbuildCmdInstallMain()): 1.383 Added status=$?
	after `CygbuildMakefileRunInstall'.
	(function CygbuildInstallPackageDocs()): 1.383 Moved -f test
	earlier and added `continue'. The checks against
	$CYGBUILD_INSTALL_IGNORE weere all wrong. Needed set -o noglob
	and set +o noglob
	(function CygbuildDefineGlobalSrcOrig()): 1.384 Improved error
	messge when $SRC_ORIG_PKG was not found.
	(function CygbuildCmdPostInstallMain()): 1.385 Renamed.
	Was `CygbuildCmdPostInstall'.
	(function CygbuildCmdInstallCheckManualPages()): 1.385 Ignore
	'postinstall' from checks.
	(function CygbuildCmdInstallCheckManualPages()): 1.385 Added
	check for fiels that start with dot.
	(function CygbuildCmdInstallMain()): 1.387 Return $status
	after $scriptInstallAfter
	(function CygbuildCmdInstallCheckDocPages()): 1.387 New.
	(function CygbuildCommandMain()): 1.389  [repackage] Added call to
	`CygbuildStripCheck'.
	(function CygbuildCmdStripMain()): 1.389 Removed FIND and
	used generic `CygbuildFilesExecutable'.
	(function CygbuildCmdInstallCheckBinFiles()): 1.389 Added
	`$instdir' check.

2004-02-16 Mon  Jari Aalto  <jari aalto A T poboxes dt com>

	RELESED: release-2004.0216

	* Makefile (install-etc-template): 1.17 Incorrect
	-d $(ETCDIR) => -d $(ETCDIR_TMPL).

	* etc/makefile/unix.mk (clean-temp-files): 1.10 Removed xargs,
	which gave error: 'xargs: environment is too large for exec'

	* README: 1.17 Updated Copyright information.

	* bin/cygbuild-rebuild.pod: 1.1 Updated Copyright information.

	* index.html: 1.25 Updated Copyright information.
	Corrected amny typos and sentences.

	* bin/cygbuild.sh
	- pushd and popd are too noisy, added /dev/null
	(function CygbuildIsVersion()): 1.337
	Converted $() to use $retval.
	(function CygbuildPushd): 1.337 New.
	(function CygbuildPopd): 1.337 New.
	(top level: opt_exclude_tmp_files): Added a.out, core,
	*.BAK, .emacs_[0-9]*, .nfs*
	(function CygbuildCmdDependMain()): 1.342 Now functional.
	(function CygbuildPatchCheck()): 1.345 Added
	'No newline at end of file' check.
	(function CygbuildCmdPublishToDir()): 1.346 Changed ${VER}
	to simple $VER
	(function CygbuildInstallExtraManual()): 1.347 Wrong install
	mode for directories: $installFmodes => $installXmodes
	(function CygbuildInstallPackageDocs()): 1.347 Wrong install
	mode for directories: $installFmodes => $installXmodes
	(function CygbuildInstallPackageDocs()): 1.347 Wrong install
	mode for directories: $installFmodes => $installXmodes
	(function CygbuildInstallPackageDocs()): 1.347 chmod -R had
	wrong modes. 644 => 755 (+x in directories).
	(function CygbuildCommandMain()): 1.348 By popular request,
	the [all] runs [finish].
	(function CygbuildInstallPackageDocs()): 1.348 chmod now
	runs with $verbose.
	(function CygbuildCommandMain()): 1.349 commadn [package-all]
	was removed. It is now [repackage]
	(function CygbuildInstallPackageDocs()): 1.350 Rewrote
	chmod command. one for-loop with find to test directories and files
	(function CygbuildCmdInstallCheckManualPages()): 1.353 Incorrect
	find option: -path  "*/man*". Fixed.

2004-02-15 Sun  Jari Aalto  <jari aalto A T poboxes dt com>

	* bin/cygbuild.pl: 1.106 (Help: SYNOPSIS): Added [check] command
	to the CASE-A, and included '-r 1' for all commands, because it's
	more robust that way in recent releases.
	(sub CygcheckParse): 1.107 Fixed debug printing: use $path,
	not $1.
	(sub CygcheckFilter): 1.107 Added final RET debug. Fixed
	libcrypto-0.9.7 => libcrypto

	* bin/cygbuild.sh: 1.327
	- SED, AWK .. variables are no longer defined at the start of file.
	  Moved the settings in separate function.
	- Changed all 'cd xxx || return' commands to 'cd xxx || exit 1'.
	- Changed all perl calls to faster $PERL
	(function CygbuildCmdInstallCheckManualPages()): 1.327 Improved
	finding executable filed (find command changed to user -perm and
	all). Added check for incorrect manual page path location:
	allow nothing else than /share/man/
	(function CygbuildCmdInstallCheckMain()): 1.328 Added message
	'-- [check] command'
	(function CygbuildCmdDependCheckMain()): 1.329 Moved location
	of echo command.
	(function CygbuildCommandMain()): 1.330 Removed
	`CygbuildCmdInstallCheckMain' call from [install]. User must run
	separate [check] in order to check installation.
	(function CygbuildCmdInstallMain()): 1.332 Removed
	`CygbuildInstallExtraMain'. This is now called in [install]
	command at `CygbuildCommandMain'.
	(function CygbuildInstallExtraManual()): 1.332 Added messages
	to user: what's going on.
	(function CygbuildFilesExecutable ()): 1.332 New.
	(function CygbuildCmdMkdirs()): 1.332 Removed subshell call.
	(function CygbuildCmdPrepMain()): 1.332 Removed subshell call.
	(function CygbuildMakefileRunInstall()): 1.333 Removed subshell call.
	(function CygbuildDebianRules2MakefileMaybe()):
	1.333 Removed subshell call.
	(function CygbuildPathAbsoluteSearch()): 1.334 Removed subshell call.
	(function CygbuildMoveToTempDir ()): 1.334 Removed subshell call.
	(function CygbuildCmdPkgExternal()): 1.334 Removed subshell call.
	(function CygbuildCmdPkgBinaryStandard()):
	1.334 Removed subshell call.
	(function CygbuildCmdPkgSourceExternal ()): 1.334 Removed
	subshell call.
	(function CygbuildCmdPkgSourceCVSdiff ()): 1.334 Removed one
	subshell call (while running diff).
	(function CygbuildCmdPkgSourceCVS()): 1.334 Removed
	subshell call
	(function CygbuildMakefileRunClean()): 1.334 Removed
	subshell call
	(function CygbuildConfPerlMain()): 1.334 Removed
	subshell call
	(function CygbuildCmdBuildPython()): 1.334  Removed
	subshell call
	(function CygbuildCmdBuildMainMakefile()): 1.334 Removed
	subshell call
	(function CygbuildCmdBuildMain()): 1.334 Removed
	subshell call
	(function CygbuildCmdCleanMain()): 1.334 Removed
	subshell call
	(function CygbuildInstallPackageDocs()): 1.334 Removed
	subshell call
	(function CygbuildCmdInstallMain()): 1.334 Removed
	subshell call
	(function CygbuildCmdPkgDevelStandard()): 1.334 Removed
	subshell call
	(function CygbuildCmdPkgSourceStandard()): 1.334 Removed
	subshell call
	(function CygbuildExtractTar()): 1.334 Removed
	subshell call
	(function CygbuildCmdConfMain()): 1.334 Removed
	subshell call
	(function CygbuildDefineGlobalsRoot()): 1.334 Renamed `checkfile'
	to PKGLOG.
	(function CygbuildDefineGlobalCommands ()): 1.334 New.
	(function CygbuildBinPath()): 1.334 Renamed. Was `BinPath'.
	(function CygbuildPathBinFast()): 1.334 Renamed. Was `CygbuildBinPath'.
	(function CygbuildPathBinFast()): 1.334 Removed for-loop and
	used if, which should be faster.
	(function CygbuildCommandMain()): 1.334 Added call to
	`CygbuildDefineGlobalCommands'.
	(function CygbuildDefineGlobalCommands ()): 1.334 Added $PWD
	(function CygbuildFilePackageGuessMain()): 1.334
	`CygbuildFilePackageGuessFromDirectory' is no longer called in
	subshell.
	(function CygbuildCommandMain()): 1.334 Converted many $()
	calls to use $retval style calling.
	(function CygbuildFileReleaseGuess()): 1.334 Converted $()
	calls to use $retval style calling.
	(function CygbuildCmdVerifyMain()): 1.334 Converted $()
	calls to use $retval style calling.

2004-02-14 Sat  Jari Aalto  <jari aalto A T poboxes dt com>

	* etc/template/package.README: Added new heading
	`Upstream contact:'.

	* bin/cygbuild.pl
	- Added many $debug calls.
	- New algorithm for cygcheck dependencies check. The
	  windows files are dropped out by looking at WIN in path.
	(top level): Added import statement for Env::SYSTEMROOT
	(sub CygcheckDependencies): 1.102 Better error checking. Added
	*.dll search.
	(Help: TROUBLESHOOTING): Added error explanation of
	CygcheckDepsCheckMain; the [check] command.
	(sub CygcheckFilter): 1.104 the requirement is 'cygwin',
	not 'cygwin1' as reported by cygcheck.
	(sub CygcheckDepsCheckSetup): 1.105 Added `sort' for
	`requires:'.
	(sub CygcheckDepsCheckReadme): 1.105 Added `sort' for
	Runtime requirements:
	(sub CygcheckFilter): 1.105 Added  $SYSTEMROOT check.
	(sub CygcheckDepsCheckSetup): 1.105 Added better `requires:'
	line check: if it is empty or does not exist.

	* bin/cygbuild.sh: 1.313
	(top level: CYGBUILD_TAR_INSTALL_EXCLUDE): Exclude *.am files
	(top level): added shopt -s extglob
	for etra pattern match support.
	(tio level: CYGBUILD_FIND_OBJS): Added *.a and *.la
	(function CygbuildCmdInstallCheckReadme()): 1.313 Warning
	message divided to three lines.
	(function CygbuildCmdInstallCheckReadme()): 1.316 Improved
	README file checks. Adjusted grep matches and return codes.
	(function CygbuildCmdCleanMain()): 1.318 incorrect
	`CygbuildIsMakefileTarget' check. Added !
	(function CygbuildCmdDependCheckMain()): 1.319 Added notification
	that Perl module is being called.
	(function CygbuildPatchFindGeneratedFiles()): 1.322 Added  1>&2
	to exit messages.
	(function CygbuildCmdCleanMain()): 1.324 Rewrote `distclean'
	handling. Now only run `clean' and optionally `distclean'.

2004-02-13 Fri  Jari Aalto  <jari aalto A T poboxes dt com>

	* README: 1.16 Renamed all sh-script references to read
	'Generic build script'. Added a little more bullets
	to 'the advantges are' paragraph.

	* bin/cygbuild.pl: 1.99 (Help: SEE ALSO): Added instructions
	how to get the basic Snourne Shell sript from Cygwin CVS tree.
	(top level): 1.101 Changed all `print' funtions to `warn'
	in $debug statement tests.
	(sub ReadmeFix): 1.101 Must use `warn' instead of `print'
	on error before `exit'.

	* bin/cygbuild.sh: 1.310
	(top level: CYGBUILD_CVSDIFF_OPTIONS): Removed extra
	equal character `=', whcih did not belong there.
	(function CygbuildCmdBuildMainMakefile()): 1.311 Removed
	subshell call from `CygbuildMakefileName'.
	(function CygbuildIsMakefileTarget()): 1.311 Send $(pwd)
	to `CygbuildMakefileName'.
	(function CygbuildCmdCleanMain()): 1.311 Send $(pwd)
	to `CygbuildMakefileName'.
	Moved `CygbuildCmdCleanMain' call inside subshell, because
	only then cd $srcdir can see the Makefile.
	(function CygbuildDefineGlobalsRoot()): 1.311 Added
	[[ "$relver" == [0-9]* ]] test before [ ! $relver -gt 0  ]
	(function CygbuildDefineVersionVariables()): 1.311 Changed
	[ -gt to more secure [[ -gt
	(function CygbuildMain()): 1.311 Changed
	[ -gt to more secure [[ -gt

2004-02-11 Wed  Jari Aalto  <jari aalto A T poboxes dt com>

	* bin/cygbuild.sh
	(function CygbuildCommandMain()): 1.310
	Added [test} alias for [check]. Added [build] alias for
	[make]. Added [depend] to print all dependencies of
	*.exe and .dll files.
	(top level: CYGBUILD_CVSDIFF_OPTIONS): added
	--exclude=*.cache
	(top level: CYGBUILD_DIFF_OPTIONS): added
	--exclude=*.cache
	(function CygbuildCmdDependMain()): 1.310 New.

2004-02-10 Tue  Jari Aalto  <jari aalto A T poboxes dt com>

	* bin/cygbuild.pl
	(sub Version): 1.94 Modified regexp o
	accept foo-YYYYMMDD
	(sub Version): 1.95 Added debug messages and fixed matching foo-YYYYMMDD
	(sub ReadmeFix): 1.95 Added debug messages.
	(sub Package): 1.95 Added debug and fixed matching foo-YYYYMMDD
	(sub Release): 1.95 Added debug and fixed matching foo-YYYYMMDD

	* bin/cygbuild.sh
	- Now accepts CVS snapshot directory names like package-YYYYMMDD,
	  not just package-NN.NN (with dot somewhere in it)
	- Every function now has variable $id to help in debugging.
	(top level): Removed library files from $opt_exclude_bin_files.
	(function CygbuildDefineVersionVariables()):
	1.284 Extra variable `xxx' removed.
	(function CygbuildDefineVersionVariables()): 1.284 Added
	test for version numbers in format package-YYYYMMDD
	(function CygbuildDefineGlobalsRoot()): 1.286 REmoved version
	number test and used `CygbuildCygbuildIsVersionMatch'.
	(function CygbuildSrcDirCheck()): 1.286 Removed egrep call
	and used `CygbuildCygbuildIsVersionMatch'
	(function CygbuildSrcDirLocation()): 1.286 Removed egrep
	and replaced it with bash number test. Changed -o test
	into [ ] || [ ]
	(function CygbuildCmdInstallMain()): 1.287 Added message
	'-- [install] command'.
	(function CygbuildCmdInstallCheckReadme()): 1.287 Incorrect
	check for <package>.README, when it should have been
	<package>-<version>.README
	(function CygbuildInstallPackageDocs()): 1.287 Added [~#]
	test to filter Emacs backup files.
	(function CygbuildCmdInstallCheckTempFiles()): 1.288 Changed
	[ "$notes" ] to [[ "$notes" == */* ]]
	(function CygbuildCmdInstallCheckReadme()): 1.290 Wrong call,
	use $EGREP, not plain EGREP. Use `$path' instead of `$readme'
	with $EGREP call.
	(function CygbuildExtractTar()): 1.294 Simplified logic of
	unpacking archive great deal. Now peek inside archive before
	doing anything. Also now handles situation where there
	are multiple directories at the same place.
	(function CygbuildPatchApply()): 1.297 Return 1 if
	src_patch was not found
	(function CygbuildPathAbsoluteSearch()): 1.297 Added more
	cases. No more has to call external program for ./ ../
	and / absolute paths.
	(function CygbuildDefineVersionVariables()): 1.297 Adjusted
	version matching at the end.
	(function CygbuildFilePackageGuessMain()): 1.297 Now returns
	RELEASE if possible. There are TWO returns values instead of
	previous on.
	(function CygbuildCommandMain()): 1.297 Better handling
	in call to `CygbuildFilePackageGuessMain'. Read array and
	set `releaseGuess' so that other IF case need not be called.
	(function CygbuildCmdInstallCheckReadme()): 1.298 Added
	Check for missing -- version VERSION-RELEASE -- from
	package.README
	(function CygbuildCmdInstallMain()): 1.301 Strange error.
	It is not possible to assign local stat=$?, but it must
	be done in separate phases local stat; stat=$?
	(function CygbuildCmdPkgExternal()): 1.301 Variable
	name $prg fixed. (had a typo).
	(function CygbuildCmdPkgSourceExternal ()): 1.301 Changed
	$? status handling.
	(function CygbuildPatchFindGeneratedFiles()): 1.303 --brief
	option was missing while comparing which files differ.
	(function CygbuildPatchFindGeneratedFiles()): 1.303 Added more
	diff exclude options
	(function CygbuildCommandMain()): 1.303 [all] does not
	run `CygbuildCmdFinishMain' any more. Print a message instead.
	(function CygbuildTarDirectory()): 1.305 New.
	(function CygbuildExtractTar()): 1.305 Moved logic to
	`CygbuildTarDirectory
	(function CygbuildCmdMkpatch()): 1.305 Better code to extract
	tar files, when tar does not contain subdirectory at all.
	Peek inside and then decide what to do.
	(function CygbuildDefineGlobalsSrcOrig()): 1.308 Removed
	export src_orig_pkg.
	(function CygbuildCommandMain()): 1.308 Removed lot of code and
	now `CygbuildDefineGlobalsRoot' is called only once.

2004-02-09 Mon  Jari Aalto  <jari aalto A T poboxes dt com>

	* bin/cygbuild-rebuild.pod: New.

	* Makefile (cvs-install): 1.12 Added alias, which runs
	install-in-place
	($(DOCDIR)/cygbuild-rebuild.1): 1.13 New target.
	(doc): 1.13 Added cygbuild-rebuild.1
	(install-in-place): 1.14 Added install-man

	* etc/template/manualpage.pod.tmp: New. Skeleton for
	manual page.

	* etc/template/postinstall.sh.tmp:
	(Environment): Improved setting $package. Changed paths to
	latest FHS: /usr/share. Corrected `dest' variable.
	Removed test(1) and used [ ] instead.
	(InstalInfo): Added check for non existing info.

	* etc/template/package.README: Added note that
	the source package may not build without cygbuild.

	* bin/cygbuild.pl (sub CygcheckFilter): 1.88 Changed `push'
	to use hash instead. Duplicates will be removed. Added
	more logic to handle Cygwin X11 dependencies.
	(sub CygcheckFilter): 1.89 Added to ignore list USER32|GDI32
	(HELP: Install commands): Added new [check] command and its
	description.
	(HELP: Packages with non-standard versioning schemes):
	Removed suggestion to use YYYY.MMDDD, now suggest YYYYMMDD.

	* bin/cygbuild.sh
	- Now automatically compresses installed manual pages
	- User can supply his own manual pages from CYGWIN-PATCHES/
	(top level): Renamed `opt_exclude_dir_find' to `CYGBUILD_FIND_EXCLUDE'.
	(top level): New variables $DIFF, $AWK, $SED, $TAR
	(top lebel): New find(1) option 'opt_exclude_dir_find'.
	(top level): Surrounded all variables with double quotes [ "$var" ].
	This is more robust that using [ $var ], because if VAR contains
	two words with spaces, the test will break.
	(top level): Renamed all 'tar_opt_*' => 'opt_*'
	(top level CYGBUILD_DIFF_OPTIONS): Extra equal sign withing the
	options. This prevented [mkpatch] command working, because diff(1)
	exited with failure: unknown option.
	(function CygbuildCmdInstallCheckMain()): 1.261
	Renamed. Was `CygbuildCmdInstallCheck'.
	(function CygbuildCommandMain()): 1.261 Function was not
	found: `CygbuildCmdInstallCheckMain'. Fixed by renaming above.
	(function CygbuildPatchCheck()): 1.262 Added empty patch
	file check.
	(function CygbuildCmdPkgSourceStandard()): 1.263 Added
	call to `CygbuildPatchCheck'.
	(function CygbuildCmdMkpatch()): 1.263 Wrong diff status check.
	Changed = to != to notice diff failures.
	(function CygbuildPatchCheck()): 1.265 $notes put
	in quotes.
	(function CygbuildDirExists()): 1.265 Change variable name 'file'
	to 'dir'.
	(function CygbuildCommandMain()): 1.268 Added
	`CygbuildCmdCheckMain' to command [check]
	(function CygbuildInstallExtraManual): New.
	(function CygbuildInstallExtraManualCompress()): 1.269 NEw.
	(function CygbuildInstallExtraMain()): 1.269 New.
	(function CygbuildCommandMain()): 1.269 New command
	[install-extra] which copies maintainer supplies manual pages.
	Also compress all manuals in .inst/ directory.
	(function CygbuildCmdCleanMain()): 1.273 Changed xargs to
	for-loop. Too many files for xargs.
	(function CygbuildCmdFinishMain()): 1.275 Activated this part of
	the code
	(function CygbuildCmdInstallCheckMain()): 1.277 Added more README
	checks, like forgetting to update REL in version string.
	(function CygbuildMakefileRunInstallInfoFix()): 1.279 New.
	(function CygbuildMakefileRunInstallFixMain()): 1.279 New.
	(function CygbuildCmdInstallMain()): 1.279 Call
	`CygbuildMakefileRunInstallFixMain' after install, but before
	install-after.sh
	(function CygbuildDefineGlobalsRoot()): 1.279 Corrected `infodir'
	definition. This caused info files to appear in
	.inst/usr/usr/info when they should have gone to
	.inst/usr/share/info
	(function CygbuildCmdInstallCheckInfoFiles()): 1.280 New.
	(function CygbuildCmdInstallCheckTempFiles()): 1.280 New.
	(function CygbuildCmdInstallCheckReadme()): 1.280 New.
	(function CygbuildCmdInstallCheckMain()): 1.280 Rewritten.
	New modular design.
	(function CygbuildCmdInstallCheckManualPages()): 1.280 New.
	(function CygbuildCmdMkpatch()): 1.282 Removed --verbose
	optiont from tar extract. It is not necessary to see what
	files are in original package.

2004-02-08 Sun  Jari Aalto  <jari aalto A T poboxes dt com>

	* bin/cygbuild.sh: 1.255
	- All [ -z "xxx" ] or [ ! -z "xxx" ] tests converted to
	  more simpler [ ! xxx ] and [ xxx ] tests.
	- Added few $verbose tests and made some [WARN] messages
	  to appear only if -v option was sent to program.
	- Changed all 'grep' calls to use $EGREP
	(top level CYGBUILD_DIFF_OPTIONS): Added --exclude=*.Po
	(top level CYGBUILD_INSTALL_IGNORE): New.
	(function CygbuildInstallPackageDocs()): 1.256 Removed
	individual tests and now use $CYGBUILD_INSTALL_IGNORE
	(function CygbuildPathAbsoluteSearch()): 1.256 Fixed
	input parameter test.
	(function CygbuildScriptPathAbsolute()): 1.256 Fixed
	input parameter test.
	(function CygbuildCmdStripMain()): 1.256 Added strip
	check by calling file(1) to determine if it is needed.
	(function CygbuildInstallCygwinPart()): 1.259 Improved
	error checking.
	(function CygbuildCmdInstallMain()): 1.259 Improved error
	checking. If `CygbuildInstallCygwinPart' or any of the above
	fail, return with error (previously dind't check the status).
	(function CygbuildCommandMain()): 1.260 Changed order of options.
	Now they are listed alphabetically. Target [package-all] has
	now all the details to re-make package. Added aliases [repkg]
	and [repackage].

2004-02-07 Sat  Jari Aalto  <jari aalto A T poboxes dt com>

	* bin/cygbuild.sh (function CygbuildCmdFilesMain()): 1.254
	Cosmetics. Changed one WARN message.
	(function CygbuildCmdInstallMain()): 1.254 Missing NOT-operator
	from test `CygbuildDirExists'.
	(function CygbuildVersionInfo()): 1.254 Cosmetics.
	Perl call indentation.

2004-02-02 Mon  Jari Aalto  <jari aalto A T poboxes dt com>

	* bin/cygbuild.pl (sub CygcheckParse): 1.86 New.
	(sub CygcheckFilter): 1.86 New.
	(sub CygcheckDependencies): 1.86 New.
	(sub CygcheckDepsList): 1.86 New.
	(sub CygcheckDepsCheckSetupIni): 1.86 New.
	(sub FileRead): 1.86 Chnaged to use new Perl 5.8
	$FILE and removed local *FILE.
	(sub FileWrite): 1.86 New.
	(sub CygcheckDepsCheckMain): 1.86 New.
	(sub DiffToExclude): 1.86 Change my $dir to my $dirpart, because
	variable masked previous definition.

2004-02-01 Sun  Jari Aalto  <jari aalto A T poboxes dt com>

	* README (Package install): 1.14 Added make rule
	`install-in-place' for CVS install insructions.

	* Makefile (install-etc-template-symlink): 1.11 New rule.
	(install-in-place): 1.11 New.

	* etc/makefile/unix.mk (help-makefile): 1.9 Added -i option to
	grep to take #rule and #Rule words.
	(help): 1.9 Same change as in target `help-makefile'

	* bin/cygbuild.pl (Help): 1.84 Renamed command [check] to [test].
	Added explanation of new command [check].
	(sub RunCygcheck): 1.85 New.
	(sub BinPkgListing): 1.86 Renamed, was `BinpkgListing'
	(sub CygcheckParse): 1.86 New.
	(sub TestCygcheckParse): 1.86 New.

	STRANGE bash ERROr stanting somewhere 1.250. It's comething to
	do with calls like answer=$(CallFunction $param)
	'647846871 [exiting thread] bash 2700 cygthread::stub: erroneous
	thread activation'


	* bin/cygbuild.sh
	- Added [NOTE] to every external file call.
	(top level): Use absolute path names to run ps(1) etc. when
	checking if running under bourne shell. This makes the startup
	check faster. Reoved note about slow startup time.
	That has now been taken cared of by the cache code which reuses
	static variables if the call parameters are the same.
	(declare RETVAL): 1.250 Added missing dollar
	sign in front of variable CYGBUILD_NAME.
	(function CygbuildBuildScriptPath()): 1.250 Changed
	`CygbuildAbsoluteScriptPath' call to use non-subshell and $(<) syntax.
	(function CygbuildTemplatePath()): 1.250 Changed
	`CygbuildBuildScriptPath' call to use non-subshell and $(<) syntax.
	(CygbuildFilePackageGuessMain): 1.250 Changed
	`CygbuildBuildScriptPath' call to use non-subshell and $(<)
	syntax.Added logic to check if THIS script,
	which is being run, is like <package>-1.3-1.sh and based on it,
	search for correct *tar.gz from current directory.
	(function CygbuildScriptPathAbsolute()): 1.250 Renamed, was
	`CygbuildAbsoluteScriptPath'.
	(function CygbuildCmdInstallCheck()): 1.250 Added missing stderr 1>&2
	to echo
	(function CygbuildCmdInstallMain()): 1.250 Use `CygbuildDirExists'
	instead of simple -d test. Added stderr output.
	(function CygbuildTempFileClean ()): 1.250 Added '*' to rm
	command. Removed -f option.
	(function CygbuildCygDirCheck()): 1.250 Use `CygbuildDirExists'
	instead of -d test.
	(function CygbuildDetermineDocDir()): 1.250 Added stderr output.
	(function CygbuildCmdPkgSourceStandard()): 1.250 Added stderr output.
	(function CygbuildDebianRules2Makefile()): 1.250 Use `CygbuildDirExists'
	instead of -d test.
	(function CygbuildTemplatePath()): 1.250 Use `CygbuildDirExists'
	instead of -d test.
	(CYGBUILD_TAR_EXCLUDE): 1.250 Renamed, was CYGBUILD_TAR_OPT
	(top level): new variables `tar_opt_exclude_version_control',
	`tar_opt_exclude_tmp_files', `tar_opt_exclude_dir',
	`tar_opt_exclude_bin_files', `tar_opt_exclude_archive_files'
	(function CygbuildCmdTestMain()): 1.251 Renamed, was
	`CygbuildCmdCheckMain'.
	(function CygbuildCommandMain()): 1.251 command [check] renamed to
	[test]. Added new command [check] to run cygcheck for all
	installed files.
	(function CygbuildCmdCheckMain()): 1.251 New.
	(top level): declare -a STATIC_PERL_MODULE, New
	(top level): Added variable $PERL
	(function CygbuildPerlModuleLocation()): 1.251 Removed search for
	perl binary. Use $PERL instead.
	(function CygbuildPerlModuleLocation()): 1.251 Chnaged return
	values. was 'perl module', now returns only module.
	(function CygbuildCmdReadmeFix()): 1.251 Changed subshell call
	`CygbuildPerlModuleLocation' to use RETVAL method. This uses
	existing cache.
	(function CygbuildCmdPkgSourceCVS ()): 1.251 Changed subshell call
	`CygbuildPerlModuleLocation' to use RETVAL method. This uses
	existing cache.
	(function CygbuildDebianRules2Makefile()): 1.251 Changed subshell call
	`CygbuildPerlModuleLocation' to use RETVAL method. This uses
	existing cache.
	(function CygbuildMakeRunInstallFixPerl()): 1.251 Changed subshell call
	`CygbuildPerlModuleLocation' to use RETVAL method. This uses
	existing cache.

	(function CygbuildPathAbsoluteSearch()): 1.250 Renames, was
	`CygbuildScriptPathAbsoluteSearch'.
	(function CygbuildPathAbsolute()): 1.250 Renamed, was
	`CygbuildAbsolutePath'.
	(function CygbuildDefineGlobalsRoot()): 1.250 Call
	`CygbuildBuildScriptPath' instead of `CygbuildScriptPathAbsolute'.
	(CygbuildFilePackageGuessMain): 1.250 Call
	`CygbuildBuildScriptPath' instead of `CygbuildScriptPathAbsolute'.

2004-01-31 Sat  Jari Aalto  <jari aalto A T poboxes dt com>

	* index.html (Manual installation): 1.24 Spelling `extracting' =>
	extract. Title 'A Porting ...' => 'A porting ...'

	* bin/cygbuild.sh (function CygbuildCmdBuildMainMakefile()): 1.249
	Added check if there is Makefile at all. Display message
	which instructs user to run [conf]

2004-01-30 Fri  Jari Aalto  <jari aalto A T poboxes dt com>

	* bin/cygbuild.sh
	- Fixed the Makefile.PL install. Didn't use DESTDIR
	- Changed almost all -eq operators to '=', which is more
	   reliable
	(function CygbuildMakefileRunInstall()): 1.245
	Call `CygbuildMakefileRunInstallCygwinOptions' for Perl and
	normal install.
	(function CygbuildMakefileRunInstallCygwinOptions()): 1.245 New.
	(function CygbuildPostinstallWrite()): 1.245 Removed verbose
	check. Always print warning if cannot write postinstall.sh
	(function CygbuildFilesInstallMaybe()): 1.245 New.
	(function CygbuildIsTemplateFilesInstalled()): 1.245 New.
	(function CygbuildPostinstallWrite()): 1.245 Added call
	to `IsTemplateFilesInstalled'.
	Added -f options to rm(1).
	(function CygbuildMakeRunInstallFixPerl()): 1.245 Improved
	generated shell script code for postinstall. Now check for
	existing package before adding the .pod entry.
	(top level): Added check if script was called from bash(1)
	or mistakenly from sh(1).
	(function CygbuildTempFileClean ()): 1.246 New.
	(function CygbuildMain ()): 1.246 Added call to
	`CygbuildTempFileClean'.

2004-01-29 Thu  Jari Aalto  <jari aalto A T poboxes dt com>

	* bin/cygbuild.sh
	(function CygbuildLibInstallEnvironment()): 1.238
	added exports: localstatedir, datadir. Updated locations to /usr/share
	(CYGBUILD_FIND_OBJS): 1.238 New.
	(function CygbuildCmdCleanMain()): 1.238 use $CYGBUILD_FIND_OBJS.
	Do not just rm(1) current directory, but find all with find(1)
	(function CygbuildCommandMain()): 1.238 Added /dev/null after
	egrep in directive [release]. Added couple of more
	calls to `CygbuildNoticeMaybe' in [package] and [source-package].
	(function CygbuildMakefileName ()): 1.238 Added caching of
	values to $STATIC_MAKEFILE
	(declare -a STATIC_MAKEFILE): New top level variable.
	(function CygbuildCmdCleanMain()): 1.238 Use faster
	CygbuildMakefileName call.
	(function CygbuildConfCC()): 1.238 Use faster
	CygbuildMakefileName call.
	(function CygbuildMakefileRunInstall()): 1.238 Use faster
	CygbuildMakefileName call.
	(function CygbuildMakefilePrefixCheck()): 1.238 Use faster
	CygbuildMakefileName call.
	(function CygbuildIsMakefileTarget()): 1.238 Use faster
	CygbuildMakefileName call.
	(function CygbuildCmdPkgDevelStandard()): 1.238 Use $FIND, not find
	(function CygbuildMakeRunInstallFixPerl()): 1.238 Use $FIND, not find
	(function CygbuildInstallPackageInfo()): 1.238 Use $FIND, not find
	(function CygbuildCmdStripMain()): 1.238 Use $FIND, not find
	(function CygbuildStripCheck()): 1.238 Use $FIND, not find
	(CYGBUILD_TAR_INSTALL_EXCLUDE): 1.238 Top level.
	Added --exclude *.in
	(function CygbuildCmdInstallCheck()): 1.238 New.
	(function CygbuildCommandMain()): 1.238 Call
	`CygbuildCmdInstallCheck' after [install].
	(CYGBUILD_DIFF_OPTIONS): 1.239 added --exclude=*.stackdump
	(function CygbuildInstallPackageDocs()): 1.240 Added check
	to ignore Emacs backup files
	(function CygbuildCmdInstallCheck()): 1.240 Added check for
	Emacs backup files.
	(CygbuildCmdStripMain): 1.241 The find(1) options were all
	in wrong order. Fixed.
	(function CygbuildCommandMain()): 1.243 Added call to
	`CygbuildPatchCheck' after [makepatch].
	(function CygbuildDefineGlobalsRoot()): 1.243 Added NEW
	global variable `src_patch_generated'.

2004-01-28 Wed  Jari Aalto  <jari aalto A T poboxes dt com>

	* etc/template/setup.hint: 1.2 Added `conflicts:' field.

2004-01-27 Tue  Jari Aalto  <jari aalto A T poboxes dt com>

	* etc/makefile/vars.mk (INSTALL): 1.11 Changed from /bin
	to /usr/bin which exists in Linux.

	* etc/makefile/unix.mk (install-bin-symlink): 1.7 Added Rule:
	what was not shown in target 'help'.

	* etc/template/configure.sh.tmp (function Configure()): 1.8
	Extra backslash removed.

	* README (Making binary package): Explained
	targets `release-cygwin-bin' and `list-cygwin'.

	* Makefile ($(DOCDIR)/$(PACKAGE).1): 1.10 Added Perl 5.8
	tmp pod file cleaning: pod2htmi.tmp

	* bin/cygbuild.pl (that the): 1.82 Added more documentation
	to [source-package]. The cleaning effect is now explained.
	(sub ReadmeFix): 1.83 Added sub forward declaration for ERR().
	(BUGS): 1.83 Added new topic 'syntax error near ...' to explain
	more about mysterious error.

	* bin/cygbuild.sh
	- BIG CHANGES:
	- Uses cache in certain functions to speed up
	  execution. For example the Perl calls to find out version
	  information are cached.
	- Added clear section to the beginning of file where
	- all commands are now absolute, like /bin/ls to give
	  better execution speed.
	- Linux is now supported too.now runs under linux too
	variables are defined. Drew boxed topics.
	(function CygbuildMain()): 1.230
	Added CygbuildCmdCleanMain before target [patch].
	(function CygbuildMakefileRunClean()): 1.230 Added 'clean'
	in addition 'distclean'
	(function CygbuildCmdMkpatch()): 1.230 Call
	`CygbuildCmdCleanMain'.
	(function CygbuildAbsoluteScriptPath()): 1.233 New. Use
	cache to store the last value.
	(STATIC_ABSOLUTE_SCRIPT_PATH): 1.233 New global
	static variable.
	(STATIC_VER_ARRAY): New global static variable.
	(STATIC_VER_PACKAGE): New global static variable.
	(STATIC_VER_VERSION): New global static variable.
	(STATIC_VER_RELEASE):New global static variable.
	(STATIC_VER_STRING): New global static variable.
	(function CygbuildCommandsMain()): 1.233 Renamed. Was
	CygbuildMain'.
	(function CygbuildMain ()): 1.233 New. Put all init
	code inside function to make it easier to debug.
	(function CygbuildDefineVersionVariables()): 1.233 Added cache
	to remember values
	(function CygbuildAbsoluteScriptPath()): 1.233 Added cache
	to remember values
	(function CygbuildDefineVersionVariables()): 1.233 Removed
	export, they are now 'declared' at the begining.
	(function CygbuildDefineVersionVariables()): 1.233
	(function CygbuildDefineGlobalsRoot()): 1.233 Converted
	subshell function calls to use file parametrization.
	Now the cache values are set e.g. in call to `CygbuildStrVersion'
	and consequent calls use cache and do not compute it with
	Perl call every time. This is faster.
	(function CygbuildCommandMain()): 1.234 Target [package-all]
	now also runs [readmefix]. Removed [source-package-verify]
	because it is too expensive. User should test source package
	separately.
	(function CygbuildIsMakefileTarget()): 1.235 Removed `echo'
	which displayed [WARN] when target was not found.
	(function CygbuildCmdPublishNormal()): 1.235 Use
	`CygbuildDirExists' to test CYGWIN_BUILD_PUBLISH_DIR.
	(function CygbuildCmdPublishToDir()): 1.235 Renamed.
	Was `CygbuildCmdPublishNormal'.
	(function CygbuildCmdPublishMain()): 1.235 Added variable
	`bin'.
	(function CygbuildCmdPublishExternal()): 1.235 Removed
	global $CYGBUILD_PUBLISH_BIN. Instead accept parameter $1.
	(function CygbuildMain ()): 1.235 Moved exports
	to the beginning of function.
	(function CygbuildCmdPublishToDir()): 1.235 Removed global
	$CYGWIN_BUILD_PUBLISH_DIR. Instead accept parameter $1.
	(CygbuildDefineGlobalsSrcOrig): new variable `sourcefile'.
	Added missing assignment to `src_orig_pkg_nam'.
	(CygbuildCmdPkgSourceStandard): Use `CygbuildDirExists' instead of
	-d test. Added quoting to many variables.
	(CygbuildAbsoluteScriptPathSearch): Do not use /bin/which,
	it does not exist under Linux. Use $WHICH.
	(top level): Added variable $WHICH, $MAKE, $CP, $MV, $LS,
	$MKDIR, $TAR, $EGREPand function 'BinPath'.
	(CygbuildCmdStripMain): Under Linux there are no .exe files.
	Added find(1) to search for executable files.

2004-01-26 Mon  Jari Aalto  <jari aalto A T poboxes dt com>

	* etc/makefile/net.mk (sf-upload-cygwin-release): 1.8 Fixed
	comment for this target. It uploads the cygbuild that can
	be updated from Net release. It does not upload setup.ini

	* bin/cygbuild.pl (maintainer of): 1.80 Removed documentation
	of command 'all2'.
	(Help is): 1.81 Updated documentation to refer to /usr/share
	hierarchy.

	* README (Releasing packages to sourceforge): 1.11
	Added subtopic.

	* index.html (Mailing list): 1.23 Removed CVS update method
	-section. This information is in Sourceforge anyway, no
	need to duplicate it.

	* etc/cygwin/setup.ini (install:): 1.7 Added New release
	2004.0126

	* CYGWIN-PATCHES/setup.hint (ldesc:): 1.2 Added
	external-source: cygbuild

	* bin/cygbuild.sh: Added 2>&1 printing to stderr for every [WARN].
	1.223 (at the end): Moved export -f
	statements to else-case. Only export if file is source(d)
	(function CygbuildDefineGlobalsRoot()): 1.223 New
	variable `src_pkg_build_script'.
	(function CygbuildCmdPkgSourceStandard()): 1.223 The Source
	script is no more called cygbuild-VER.sh, but PACKAGE-ver.sh
	(end of script): 1.223 Call CygbuildHelpShort if user
	gives no options.
	(function CygbuildMakefileName ()): 1.223 New.
	(function CygbuildCmdCleanMain()): 1.223 Call
	`CygbuildIsMakefileTarget' and do not hard code name
	Makefile.
	(function CygbuildFileExists()): 1.223 New.
	(function CygbuildMakefilePrefixCheck()): 1.223 Use
	`CygbuildFileExists'
	(function CygbuildMakefileRunInstall()): 1.223 Use
	`CygbuildFileExists' to check makefile.
	(function CygbuildDefineGlobalsRoot()): 1.223 Added check
	for empty 'relver' variable.
	(function CygbuildFilePackageGuessMain()): 1.223 Added better
	logic to determine tar.gz PACKAGE file from current directory.
	(function CygbuildCmdPkgSourceStandard()): 1.223 Retun $?
	in case of error.
	(function CygbuildCmdPkgSourceStandard()): 1.223 Use
	`CygbuildFileExists' instead of -f to check $orig.
	(function CygbuildCmdPkgSourceStandard()): 1.223 Use
	`CygbuildFileExists' instead of -f
	(function CygbuildCmdPkgSourceCVS ()): 1.223  Use
	`CygbuildFileExists' instead of -f
	(function CygbuildMakefilePrefixCheck()): 1.225 Removed -a
	and used &&
	(function CygbuildDefineGlobalsSrcOrig()): 1.225 Use
	`CygbuildFileExists' instead of -f and -z
	(function CygbuildCmdPrepMain()): 1.225 Added check for
	`$instdir', which means that 'all' phase has already patched
	the files. No need to try repatch, which would produce
	rejects.
	(function CygbuildMain()): 1.225 Removed command 'all2'.
	The 'all' now handles re-run.
	(function CygbuildDirExists()): 1.225 New.

2004-01-10 Sat  Jari Aalto  <jari aalto A T poboxes dt com>

	* etc/makefile/net.mk (sf-upload-release): 1.7 Updated all Rule
	texts.

	* etc/makefile/cygwin.mk (list-cygwin): 1.7 Rule text corrected.
	Removed instructions how to build cygwin release and moved them
	to README.
	(release-cygwin-bin-check): 1.7 New.

	* etc/makefile/unix.mk: 1.5 `help' target now sorts all
	antries instead of stepping through each make file.

2003-11-11 Tue  Jari Aalto  <jari aalto A T poboxes dt com>

	* etc/template/setup.hint: Added category `Security'

	* bin/cygbuild.sh (function CygbuildCmdCleanMain()): 1.219
	Added message `Running make clean'.
	(function CygbuildCmdCleanMain()): 1.220 If Makefile
	does not have clean target, display warning and run
	rm *.o instead.
	(function CygbuildCmdPublishNormal()): 1.221 Added /dev/null
	to *devel* and *doc* ls(1) commands. Those files are
	there only if library packages are made.

2003-11-09 Sun  Jari Aalto  <jari aalto A T poboxes dt com>

	* bin/cygbuild.sh
	(CYGBUILD_DIFF_OPTIONS): Exclude 'tmp' directory where e.g.
	verify (source-package-verify) is done. Otherwise made pach is
	incorrect.
	(function CygbuildCmdMkpatch()): 1.217 New
	feature. If package does not unpack to any directories, move all
	files manually to a temporary 'unpack' directory while doing diff.
	(function GetOneDir()): 1.217 Renamed. Was `GetOneDir'.
	(function CygbuildMoveToTempDir ()): 1.217 New.
	(function CygbuildCmdStripMain()): 1.217 Added option -print
	to find(1) call.
	(function CygbuildStripCheck()): 1.217 restore IFS after
	change.
	(function CygbuildCommandPath()): 1.217 restore IFS after
	change
	(function CygbuildMoveToTempDir ()): 1.218 Do not move
	cygbuild*sg, only the source files.
	New.
	(function CygbuildMain()): 1.218 Running `all' does no longer
	build source package, because it really needs full
	cygbuild-environment from sourceforge.

2003-11-08 Sat  Jari Aalto  <jari aalto A T poboxes dt com>

	* bin/cygbuild.sh (function CygbuildCmdBuildMainMakefile()): 1.217
	Pass same options and in `configure'. This is for Makefiles
	that contains varibables that are not set by GNU configure.

	* etc/template/package.README: Chhanged 1.3.22 references to
	Cygwin 1.5.x

	* etc/template/configure.sh.tmp (function Bootstrap()):
	Typo, file test was not for file 'autogen.sh'. Fixed.

2003-10-05 Sun  Jari Aalto  <jari aalto A T poboxes dt com>

	* bin/cygbuild.sh (function CygbuildCmdConfMain()): 1.216
	Added check for Makefile's `configure:' target. E.g.
	Exim has it, but it does not have standard ./configure
	script.
	(function CygbuildIsMakefileTarget()): 1.216 New. Check
	Makefile targets.

2003-10-03 Fri  Jari Aalto  <jari aalto A T poboxes dt com>

	RELEASE 2003-09-20. [package-devel] command fixes and
	new features.

	* etc/makefile/vars.mk (FTP): 1.9 New. `ncftpput'.

	* etc/makefile/cygwin.mk (cygwin-setup-ini-update): 1.6
	Added diagnostic echo message to the end.

	* bin/cygbuild.pl: 1.76 (Help:Packaging commands): Added
	new feature to command [publish]. If environment variable
	CYGBUILD_PUBLISH_BIN us set, user script is called instead
	pf builtin default.
	(Help:package-dev): Explained better how the new publishing
	method works for libraries. Separate directories are now
	used and separate setup.hint files.
	(sub CygwinSetupIniUpdate): 1.78 Version number was not found.
	Fixed.

	* bin/cygbuild.sh (function CygbuildCmdPublishSetupFix()): 1.214
	Added publish/doc and publish/devel directories. Also now
	copies setup-devel.hint and setup-doc.hint to the above places.
	(function CygbuildCmdPublishExternal()): 1.215 New.
	(function CygbuildCmdPublishMain()): 1.215 New.
	(function CygbuildCmdPublishNormal()): 1.215 Moved original
	logic here.

2003-10-01  Jari Aalto  <jari aalto A T poboxes dt com>

	* etc/cygwin/setup.ini (version): Added  string 2003.0920

2003-09-20 Sat  Jari Aalto  <jari aalto A T poboxes dt com>

	* etc/cygwin/setup.ini: Updated new release cygbuild-2003.0920

	* etc/makefile/cygwin.mk (release-cygwin-setup-ini): 1.5 New.

	* bin/cygbuild.pl (sub PackageCVScoScript): 1.75 Added
	\$CVSROOT to here document (was $CVSROOT). Added qouble quotes
	around EOF.
	(sub TestCygwinSetupIni): 1.75 New.
	(sub TestCygwinSetupIniEntry): 1.75 New.
	(sub CygwinSetupIniUpdate): 1.75 New.
	(sub CygwinSetupIniEntry): 1.75 New.

	RELEASE 2003-09-20. Bug fixes. The manual pages
	now go correctly to /usr/share/man

2003-09-19 Fri  Jari Aalto  <jari aalto A T poboxes dt com>

	* etc/makefile/net.mk (sf-upload-cygwin-release): 1.6 New.
	(sf-upload-cygwin-setup-ini): 1.6 Fixed.
	(SOURCEFORGE_LOGIN): 1.6 New.

	* etc/makefile/vars.mk (MANDIR): 1.7 Now /usr/share/man, was
	/usr/man
	(CYGWIN_RELEASE_FILE_PATH): 1.8 New.

	* index.html: 1.18 Lot of documentation changes.

	* bin/cygbuild.pl: 1.74 (HELP::Packaging commands): Updated
	documentation for [readmefix].

	* etc/template/configure.sh.tmp (function Configure()): Added
	-z test to check empty $1

	* bin/cygbuild.sh (function CygbuildHelpShort()): 1.210 Missing
	EOF added.
	(function CygbuildMain()): 1.210 Added if-case to check which
	commands needs the RELEASE -r option.
	(function CygbuildCmdPkgDevelStandard()): 1.210 Added check for
	non existing usr/man directory. The library does not ship with
	manual files.
	(function CygbuildMakefileRunInstall()): 1.212 added $man_prefix
	New.
	(function CygbuildMakefileRunInstall()): 1.212 Install
	'man' and 'doc files under /usr/share, not /usr. Use
	CYGBUILD_DOCDIR_PREFIX_RELATIVE
	Added info_prefix

	RELEASE 2003-09-19

2003-09-16 Tue  Jari Aalto  <jari aalto A T poboxes dt com>

	* Makefile (SH): 1.9 Added cygbuild-rebuild.sh
	(OBJS_ETC): Added '-type f'

	* bin/cygbuild-rebuild.sh: New file.
	(function Help ()): 1.208 New.
	(function Main): Added options -d and -i
	(function Main ()): 1.5 Added option --help

	* bin/cygbuild.pl: (Help) 1.73 New topic 'Manging several builds'
	New subtopics 'How to organize Cygwin Net Release builds' and
	'Rebuilding packages'.

	* bin/cygbuild.sh (function CygbuildConfOld()): 1.206 Removed
	variable CYGBUILD_CFLAGS.
	(top level): New variable CYGBUILD_CONFIGURE_OPTIONS.
	(function CygbuildConfCC()): 1.206 Removed variables
	CYGWIN_BUILD_CFLAGS CYGWIN_BUILD_LDFLAGS
	(function CygbuildMain()): 1.208 Radical changes. Removed
	'first' command loop completely, because it was too complex to sort
	out which options should be handled and which not. The idea of
	the 'first' loop was to make the program faster so that no
	extra variable definitions were needed for some commands.
	However it is more important to keep the program consistent and
	easy to maintain than optimise speed.

2003-09-15  Jari Aalto  <jari aalto A T poboxes dt com>

	* etc/template/configure.sh.tmp (function Configure()): Updated
	according to latest http://cygwin.com/setup.html and section
	'The package is configured using (at a minimum) the following paths:'

	* bin/cygbuild.pl: 1.70 (HELP::TROUBLESHOOTING): Wrote new section
	'While making source package, the mkpatch step dies with error'

	* bin/cygbuild.sh (--fuzz): Changed `docdir' from
	/usr/doc => /usr/share/doc according to latest Cygwin
	maintainer's guide.
	(top level): New variables CYGBUILD_DOCDIR_FULL
	and CYGBUILD_DOCDIR_RELATIVE
	(CygbuildCmdPkgDevelStandard): Use CYGBUILD_DOCDIR_FULL
	(CygbuildLibInstallEnvironment): Use CYGBUILD_DOCDIR_FULL
	(CygbuildDefineGlobalsRoot): Use CYGBUILD_DOCDIR_RELATIVE
	(CygbuildCmdPkgSourceCVSdiff): Improved diff(1)
	return value check.
	(CygbuildCmdMkpatch)Improved diff(1)
	return value check.
	(top level): Added *.swp to
	CYGBUILD_DIFF_OPTIONS

2003-09-15  Jari Aalto  <jari aalto A T poboxes dt com>

	* doc/README.html: New.

	* bin/cygbuild.sh: Added subshell ( ) around the
	call to makefile.

2003-09-14  Jari Aalto  <jari aalto A T poboxes dt com>

	* CYGWIN-PATCHES/setup.hint (ldesc): made it a single
	line. No line breaks.

	* bin/cygbuild.sh: Better -h message

2003-09-12 Fri  Jari Aalto  <jari aalto A T poboxes dt com>

	* bin/cygbuild.sh (function CygbuildCmdMkpatch()): 1.194
	Wrong call ${GetOneDir} => $(GetOneDir). This prevented making
	source packages.
	(function CygbuildExtractTar()): 1.196 Added call to
	CygbuildDefineGlobalsSrcOrig(). The [source-package-verify]
	command failed because it was missing.
	Removed duplicate entries *# and *~. Already had *[#~].
	(function CygbuildCmdVerifyMain()): 1.198 Added
	OPTION_DEBUG_VERIFY
	(function CygbuildMain()): 1.198 Added command line option -D
	to turn on OPTION_DEBUG_VERIFY for command [source-package-verify]
	(top level): New variable CYGBUILD_PATCH_OPT

	Ran documents through HTML conversion and uploaded them to
	Sourceforge project page.

	* README: 1.9 Typos corrected. Updated to the latest
	`net.mk' upload instructions and mention targer
	`sf-upload-release'.

	* etc/makefile/net.mk (SOURCEFORGE_UPLOAD_HOST): 1.4 New.
	(SOURCEFORGE_UPLOAD_DIR): 1.4 New.
	(sf-upload-release): 1.4 New.
	(sf-upload-release-check): 1.4 New.

2003-09-11 Thu  Jari Aalto  <jari aalto A T poboxes dt com>

	* etc/makefile/unix.mk (help): 1.4 Corrected to display rules for
	top level Makefile also. Added sort(1).

	* Makefile
	Moved all variables AFTER the `include' statements.
	(FROM_ETC_DIR): 1.6 New name.
	(OBJS_ETC): 1.6  Don't use ETC_DIR/* but better
	find + -maxdepth combination.
	(install-etc-template): 1.6 Made the installation more verbose
	with `echo'.

	* bin/cygbuild.pl (PackageCVSmain): Missing semicolon added.

2003-08-21 Thu  Jari Aalto  <jari aalto A T poboxes dt com>

	* bin/cygbuild.sh (function CygbuildCmdPkgSourceCVS ()): 1.191
	Call perl module with correct parameters.
	(function CygbuildCmdPkgSourceCVSdiff ()): 1.192 Better error
	message if Perl support module cannot be loaded.

	* bin/cygbuild.pl (sub PackageCVSmain): 1.64 Few tweaks in
	concerning input parameter.
	(sub CVSdiff): 1.65 Removed. Handled by shell script.
	(sub PackageCVSmain): 1.67 initialize `$pass.

2003-08-20 Wed  Jari Aalto  <jari aalto A T poboxes dt com>

	* bin/cygbuild.pl (Help::Directory CYGWIN-PATCHES/): 1.58
	Added documentation concerning install-after.sh
	(sub CVSdiff): 1.58 New.
	(sub CVSinfo): 1.58 New.
	(sub PackageCVScoScript): 1.58 New.
	(sub PackageCVSmain): 1.58 New.
	(sub DiffToExclude): 1.62 New.

	* etc/template/install-after.sh.tmp: New template.
	See documentation

	* bin/cygbuild.sh (function CygbuildInstallPackageDocs()): 1.166
	Added rules to ignore Subversion Version control ile *SVN*,
	*RCS*, *CVS* and .xml files (that are source files from which
	documentation is generated from).
	(top level): New variable CYGBUILD_TAR_INSTALL_EXCLUDE
	(function CygbuildMain()): 1.166 in target [package-devel],
	there was a typo in function call.
	(function CygbuildCmdInstallMain()): 1.166 Added support for
	install-after.sh
	(function CygbuildDefineGlobalsRoot()): 1.166 New variable
	`cyginstallAfter'.
	(function CygbuildCmdPublish()): 1.166 Dind't publish
	[package-devel] files. Now fixed.
	(top level): New variable CYGBUILD_DIFF_OPTIONS
	(top level): -- massive chanegs to variable names --
	All external script variables are now prefixed with `script'
	(function CygbuildCmdPkgSourceStandard()): 1.166 Moved logic
	here.
	(function CygbuildCmdPkgExternal()): 1.166 Added variable `prg'
	(function CygbuildCmdPkgSourceExternal ()): 1.166 New.
	(function CygbuildCmdPkgSourceMain()): 1.166 Rewritten. Now
	supports external script that makes the source package.
	(function CygbuildPerlModuleLocation()): 1.175 Better error messages.
	(function CygbuildCmdPkgBinaryMain()): 1.176 New.
	(function CygbuildExtractMain()): 1.177 New.
	(function CygbuildCmdPrep()): 1.177 Added support for CVS
	source package downloads.
	(function CygbuildFilePackageGuessUnpackDoUrl()): 1.177 New.
	(function CygbuildFilePackageGuessUnpack()): 1.178 If there
	is no tar file, see if there is external script that downloads
	sources.
	(function CygbuildCmdVerifyMain()): 1.178 Rewote logic of finding
	PACKAGE*-src.tar.bz2
	(function CygbuildFilePackageGuessFromDirectory()): 1.179
	Rewritten. use CygbuildDefineVersionVariables().
	(function CygbuildVersionInfo()): 1.179 Added more cheking. Now
	finds version inside the path name.
	(function CygbuildDefineGlobalsRoot()): 1.179 Improved
	error checking and PKG, VER, REL variable construction.
	(function CygbuildCmdPrepUrl()): 1.179 New.
	(function CygbuildSourceDownloadScript ()): 1.179 New.
	(function CygbuildApplyPatch()): 1.179 New.
	(function CygbuildFilePackageGuessUnpackDoTar()): 1.179 Removed.
	(function CygbuildFilePackageGuessUnpack()): 1.179 Removed.

	* etc/template/build.sh.tmp: 1.1 Extra line at the beginning
	removed.

2003-08-19 Tue  Jari Aalto  <jari aalto A T poboxes dt com>

	* etc/template/configure.sh.tmp (function ConfigurePerl()): 1.1
	Serious mistaken in the template file. (some variable
	was expanded to f-prot). Now completely rewritten.

	* bin/cygbuild.sh (function CygbuildCmdBuildPython()): 1.166 New.
	(function CygbuildCmdBuildMainMakefile()): 1.166 Moved
	logic to here.
	(function CygbuildCmdBuildMain()): 1.166 Added Python build
	support.
	(function CygbuildIsPythonPackage()): 1.166 New.
	(function CygbuildMain()): 1.166 Added [conf] alias back.
	It's too intuitive compared to [configure]
	(top level): CYGBUILD_TAR_OPT= included options
	--exclude='Makefile*' --exclude='MAKEFILE*'. I don't think they
	belong there. Source packages need makefiles, so removed.
	(top level): Added new variable CYGBUILD_DATE derived from
	version Id string.

2003-08-15 Fri  Jari Aalto  <jari aalto A T poboxes dt com>

	* bin/cygbuild.sh (function CygbuildConfCC()): 1.165
	Commented our call to CygbuildConfOld(). It is better that
	use specifies the build script. Make no further guesses.
	(function CygbuildConfDepend): 1.165 New.

2003-08-14 Thu  Jari Aalto  <jari aalto A T poboxes dt com>

	* bin/cygbuild.pl: (Help:BUGS) 1.57 Added note about errorneous
	command line parsing, which is eaily to confuse with conflicting
	commands.

	* bin/cygbuild.sh (function CygbuildMain()): 1.164 If
	both [source-package] and [source-package-verify] commands
	were given at command line the order of execution was wrong.
	Program started verify, when it should have started packaging.
	(function CygbuildCmdMkpatch()): 1.164 Removed --exclude=Makefile,
	because of course you poke around makefiles if there is no
	`install:' target.

2003-08-13 Wed  Jari Aalto  <jari aalto A T poboxes dt com>

	* etc/makefile/vars.mk (INSTALL): 1.3 Must be /bin/install,
	not /usr/bin/install.

	* bin/cygbuild.sh (function CygbuildMain()): 1.163
	Call `return' to terminate program if -V version option is used.
	(CygbuildNoticeCygwinPatches): Corrected typos.
	(function CygbuildCmdConfMain()): 1.163 REnamed variable
	from `conf' => `perlconf'.
	(function CygbuildConfCC()): 1.163 REmoved `verbose' tests.
	Now prints a warning if there is no `./configure' in the
	directory.
	(function CygbuildCygDirCheck()): 1.164 Use [] instead of
	'' for referring comands.
	(function CygbuildDefineGlobalsSrcOrig()): 1.164 Improved error
	message, when original file is not in format PKG-VER.tar.gz

2003-08-05 Tue  Jari Aalto  <jari aalto A T poboxes dt com>

	* bin/cygbuild.pl: 1.56 Fixed Perl POD tags. Missing '>' from
	B(old)-directives.

	* index.html (<H1> Links and download): 1.15 Added README.html
	link.
	(<H1> Links and download): 1.15 Converted links to relative.

	* Makefile (doc-readme): 1.4 New. Make HTML version of
	README.

	* README (Project Description): 1.8 Formatted document to
	comply with t2html.pl (See sourceforge project). The file can
	now be used as source to generate HTML version of it.
	(Converting text files into HTML): 1.8 New.

2003-08-03 Sun  Jari Aalto  <jari aalto A T poboxes dt com>

	* index.html (<H1> Links and download): 1.14 Fixed correct URL to
	view ChangeLog from CVS.

2003-08-01 Fri  Jari Aalto  <jari aalto A T poboxes dt com>

	* bin/cygbuild.sh (function CygbuildStripCheck()): 1.159
	Run CygbuildCmdStripMain() if symbols are found. This makes
	[install] to succeed if user forgot to [strip].
	(function CygbuildCmdPkgBinaryStandard()): 1.159 Added absolute
	path to message 'Making package ...'
	(function CygbuildCmdSpkgMain()): 1.159 Added absolute
	path to message 'Making package ...'
	(function CygbuildCmdVerifyMain()): 1.160 Improved error message
	'Original source package missing'.
	(function CygbuildMain()): 1.162 Removed short names 'prep',
	'mkdirs', 'src-package', 'rfix', 'conf'. Use longer names prepare,
	makedirs], source-package, readmefix, 'configure'. Removed 'build'
	=> use 'make' command.

	* README: 1.6 (Using CVS commands from Emacs): New.
	(Policy for documenting changes): New.

	* etc/makefile/net.mk: New file. Make targets to
	upload files to Sourceforge.
	(sf-uload-no-root): 1.2 New. Safeguard to ensure that USER variable
	is set correctly

	* Makefile (sf-upload-doc): 1.2 New.
	(install-etc-template): 1.3 Added -f if-check to drop CVS
	directory from install.

	* bin/cygbuild.pl: 1.51 (Help:SYNOPSIS) Upated the text to
	separate CASE A from CASE B, which are very different.
	(Help:AVAILABILITY): Added sourcefoge URL.
	(Help): Removed all 'shorthand' commands like 'prep' which
	no longer exist. Use 'prepare' etc.

	* index.html: 1.4 (Manual installation) Added CSS specs
	for SPAN.cmd* and added HTML tags into Unix commands
	to make the installation procedure more clear.
	(Disclaimer): 1.4 New.
	(What is Cygbuild): 1.4 Added TT-tags and fixed spelling
	in the topic.
	(CVS update method): Added color to commands with SPAN-tags.
	(TITLE):_  Changed from 'Cygbuild - A Cygwin Net Release Porting
	Tool' to 'Cygbuild - A Porting tool for making Cygwin Net Releases'
	(<H1> Links and download): 1.10 Moved 'At this stage of development...'
	upward away from 'News' topic.
	(<H1> Links and download): 1.11 Correct *checkout* link for
	ChanegLog. Link however does not work, but that's due to
	Sourceforge's own configurations.
	(<H1> Links and download): 1.12 Added absolute URL to
	cygbuild.html

	AT THIS POINT THE PROJECT WAS MOVED TO SOURCEFORGE

2003-07-31 Thu  Jari Aalto  <jari aalto A T poboxes dt com>

	Initial Cywin setup.exe support is now active. Try it.

	* index.html: 1.3 (Using Cygwin GUI setup.exe): New subtopic.
	(Manual installation): New subtopic.

	* etc/cygwin/setup.ini: New. Now it's possible to Use
	Cygwin's setup.exe and update 'cygbuild' directly form there.

2003-07-30 Wed  Jari Aalto  <jari aalto A T poboxes dt com>

	* bin/cygbuild.pl: (Help) 1.50 Added option -V to print version
	number.

	* etc/makefile/unix.mk (install-bin-symlink): 1.1 Installed
	relative symlink bin/cygbuild.sh which does not work. Fixed
	to use absolute path.

	* bin/cygbuild.sh: 1.155 Renamed all global top level
	variables at the beginning of file to have CYGBUILD_
	prefix. E.g `CYGBUILD_TAR_OPT'. New variable
	`CYGBUILD_TEMPLATE_DIR' lifted from local
	variable at CygbuildTemplatePath().
	Update variable CYGBUILD_HOMEPAGE_URL to point to
	sourceforge.

	* Makefile: 1.1 PL and SH macros must point to bin/
	directory. Fixed.

	* index.html: 1.2 New file uploaded to sourceforge project
	page.
	(Links and download): 1.2 Added Changelog link to browse
	the Checked out content of that file.

	* README: 1.2 (Package install instructions): New topic added.
	(Installing from a CVS checkout): New topic added.
	(Developer information): Added new topic.

2003-06-16 Mon  Jari Aalto  <jari aalto A T poboxes dt com>

	* cygbuild.sh: 1.89 Too many changes to the code to list here.
	(see the version number 1.12 => 1.89) Let just say, that it has
	taken lot of work to make it here.

2003-06-12 Thu  Jari Aalto  <jari aalto A T poboxes dt com>

	* cygbuild.sh: 1.41 Initial public version.

	* Makefile: 1.1 New.

	* README: 1.1 New.

	* cygbuild.pl: 1.12 Initial public version.
